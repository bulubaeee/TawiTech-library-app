(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function wa(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const vt={},cr=[],Ne=()=>{},Qu=()=>!1,Ni=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Aa=e=>e.startsWith("onUpdate:"),ie=Object.assign,ba=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},up=Object.prototype.hasOwnProperty,gt=(e,t)=>up.call(e,t),nt=Array.isArray,ur=e=>Oi(e)==="[object Map]",Xu=e=>Oi(e)==="[object Set]",st=e=>typeof e=="function",Nt=e=>typeof e=="string",Pn=e=>typeof e=="symbol",St=e=>e!==null&&typeof e=="object",Yu=e=>(St(e)||st(e))&&st(e.then)&&st(e.catch),Ju=Object.prototype.toString,Oi=e=>Ju.call(e),hp=e=>Oi(e).slice(8,-1),Zu=e=>Oi(e)==="[object Object]",Ra=e=>Nt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ns=wa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Mi=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},fp=/-\w/g,En=Mi(e=>e.replace(fp,t=>t.slice(1).toUpperCase())),dp=/\B([A-Z])/g,Gn=Mi(e=>e.replace(dp,"-$1").toLowerCase()),th=Mi(e=>e.charAt(0).toUpperCase()+e.slice(1)),Io=Mi(e=>e?`on${th(e)}`:""),fn=(e,t)=>!Object.is(e,t),Zs=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},eh=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Sa=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let uc;const ki=()=>uc||(uc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ca(e){if(nt(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Nt(r)?_p(r):Ca(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Nt(e)||St(e))return e}const pp=/;(?![^(]*\))/g,gp=/:([^]+)/,mp=/\/\*[^]*?\*\//g;function _p(e){const t={};return e.replace(mp,"").split(pp).forEach(n=>{if(n){const r=n.split(gp);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Pa(e){let t="";if(Nt(e))t=e;else if(nt(e))for(let n=0;n<e.length;n++){const r=Pa(e[n]);r&&(t+=r+" ")}else if(St(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const yp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ep=wa(yp);function nh(e){return!!e||e===""}const rh=e=>!!(e&&e.__v_isRef===!0),dn=e=>Nt(e)?e:e==null?"":nt(e)||St(e)&&(e.toString===Ju||!st(e.toString))?rh(e)?dn(e.value):JSON.stringify(e,sh,2):String(e),sh=(e,t)=>rh(t)?sh(e,t.value):ur(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[wo(r,i)+" =>"]=s,n),{})}:Xu(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>wo(n))}:Pn(t)?wo(t):St(t)&&!nt(t)&&!Zu(t)?String(t):t,wo=(e,t="")=>{var n;return Pn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let oe;class Tp{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=oe,!t&&oe&&(this.index=(oe.scopes||(oe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=oe;try{return oe=this,t()}finally{oe=n}}}on(){++this._on===1&&(this.prevScope=oe,oe=this)}off(){this._on>0&&--this._on===0&&(oe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function vp(){return oe}let It;const Ao=new WeakSet;class ih{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,oe&&oe.active&&oe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ao.has(this)&&(Ao.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ah(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,hc(this),lh(this);const t=It,n=ve;It=this,ve=!0;try{return this.fn()}finally{ch(this),It=t,ve=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)xa(t);this.deps=this.depsTail=void 0,hc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ao.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ho(this)&&this.run()}get dirty(){return Ho(this)}}let oh=0,rs,ss;function ah(e,t=!1){if(e.flags|=8,t){e.next=ss,ss=e;return}e.next=rs,rs=e}function Va(){oh++}function Da(){if(--oh>0)return;if(ss){let t=ss;for(ss=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;rs;){let t=rs;for(rs=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function lh(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ch(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),xa(r),Ip(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function Ho(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(uh(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function uh(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ps)||(e.globalVersion=ps,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ho(e))))return;e.flags|=2;const t=e.dep,n=It,r=ve;It=e,ve=!0;try{lh(e);const s=e.fn(e._value);(t.version===0||fn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{It=n,ve=r,ch(e),e.flags&=-3}}function xa(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)xa(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Ip(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let ve=!0;const hh=[];function Ge(){hh.push(ve),ve=!1}function We(){const e=hh.pop();ve=e===void 0?!0:e}function hc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=It;It=void 0;try{t()}finally{It=n}}}let ps=0;class wp{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Na{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!It||!ve||It===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==It)n=this.activeLink=new wp(It,this),It.deps?(n.prevDep=It.depsTail,It.depsTail.nextDep=n,It.depsTail=n):It.deps=It.depsTail=n,fh(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=It.depsTail,n.nextDep=void 0,It.depsTail.nextDep=n,It.depsTail=n,It.deps===n&&(It.deps=r)}return n}trigger(t){this.version++,ps++,this.notify(t)}notify(t){Va();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Da()}}}function fh(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)fh(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const zo=new WeakMap,Hn=Symbol(""),Ko=Symbol(""),gs=Symbol("");function Jt(e,t,n){if(ve&&It){let r=zo.get(e);r||zo.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new Na),s.map=r,s.key=n),s.track()}}function ze(e,t,n,r,s,i){const a=zo.get(e);if(!a){ps++;return}const l=u=>{u&&u.trigger()};if(Va(),t==="clear")a.forEach(l);else{const u=nt(e),f=u&&Ra(n);if(u&&n==="length"){const d=Number(r);a.forEach((g,E)=>{(E==="length"||E===gs||!Pn(E)&&E>=d)&&l(g)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(gs)),t){case"add":u?f&&l(a.get("length")):(l(a.get(Hn)),ur(e)&&l(a.get(Ko)));break;case"delete":u||(l(a.get(Hn)),ur(e)&&l(a.get(Ko)));break;case"set":ur(e)&&l(a.get(Hn));break}}Da()}function nr(e){const t=pt(e);return t===e?t:(Jt(t,"iterate",gs),Ee(e)?t:t.map(zt))}function Li(e){return Jt(e=pt(e),"iterate",gs),e}const Ap={__proto__:null,[Symbol.iterator](){return bo(this,Symbol.iterator,zt)},concat(...e){return nr(this).concat(...e.map(t=>nt(t)?nr(t):t))},entries(){return bo(this,"entries",e=>(e[1]=zt(e[1]),e))},every(e,t){return qe(this,"every",e,t,void 0,arguments)},filter(e,t){return qe(this,"filter",e,t,n=>n.map(zt),arguments)},find(e,t){return qe(this,"find",e,t,zt,arguments)},findIndex(e,t){return qe(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return qe(this,"findLast",e,t,zt,arguments)},findLastIndex(e,t){return qe(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return qe(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ro(this,"includes",e)},indexOf(...e){return Ro(this,"indexOf",e)},join(e){return nr(this).join(e)},lastIndexOf(...e){return Ro(this,"lastIndexOf",e)},map(e,t){return qe(this,"map",e,t,void 0,arguments)},pop(){return Xr(this,"pop")},push(...e){return Xr(this,"push",e)},reduce(e,...t){return fc(this,"reduce",e,t)},reduceRight(e,...t){return fc(this,"reduceRight",e,t)},shift(){return Xr(this,"shift")},some(e,t){return qe(this,"some",e,t,void 0,arguments)},splice(...e){return Xr(this,"splice",e)},toReversed(){return nr(this).toReversed()},toSorted(e){return nr(this).toSorted(e)},toSpliced(...e){return nr(this).toSpliced(...e)},unshift(...e){return Xr(this,"unshift",e)},values(){return bo(this,"values",zt)}};function bo(e,t,n){const r=Li(e),s=r[t]();return r!==e&&!Ee(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const bp=Array.prototype;function qe(e,t,n,r,s,i){const a=Li(e),l=a!==e&&!Ee(e),u=a[t];if(u!==bp[t]){const g=u.apply(e,i);return l?zt(g):g}let f=n;a!==e&&(l?f=function(g,E){return n.call(this,zt(g),E,e)}:n.length>2&&(f=function(g,E){return n.call(this,g,E,e)}));const d=u.call(a,f,r);return l&&s?s(d):d}function fc(e,t,n,r){const s=Li(e);let i=n;return s!==e&&(Ee(e)?n.length>3&&(i=function(a,l,u){return n.call(this,a,l,u,e)}):i=function(a,l,u){return n.call(this,a,zt(l),u,e)}),s[t](i,...r)}function Ro(e,t,n){const r=pt(e);Jt(r,"iterate",gs);const s=r[t](...n);return(s===-1||s===!1)&&La(n[0])?(n[0]=pt(n[0]),r[t](...n)):s}function Xr(e,t,n=[]){Ge(),Va();const r=pt(e)[t].apply(e,n);return Da(),We(),r}const Rp=wa("__proto__,__v_isRef,__isVue"),dh=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pn));function Sp(e){Pn(e)||(e=String(e));const t=pt(this);return Jt(t,"has",e),t.hasOwnProperty(e)}class ph{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Lp:yh:i?_h:mh).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=nt(t);if(!s){let u;if(a&&(u=Ap[n]))return u;if(n==="hasOwnProperty")return Sp}const l=Reflect.get(t,n,te(t)?t:r);if((Pn(n)?dh.has(n):Rp(n))||(s||Jt(t,"get",n),i))return l;if(te(l)){const u=a&&Ra(n)?l:l.value;return s&&St(u)?Wo(u):u}return St(l)?s?Wo(l):Ma(l):l}}class gh extends ph{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const u=Tn(i);if(!Ee(r)&&!Tn(r)&&(i=pt(i),r=pt(r)),!nt(t)&&te(i)&&!te(r))return u||(i.value=r),!0}const a=nt(t)&&Ra(n)?Number(n)<t.length:gt(t,n),l=Reflect.set(t,n,r,te(t)?t:s);return t===pt(s)&&(a?fn(r,i)&&ze(t,"set",n,r):ze(t,"add",n,r)),l}deleteProperty(t,n){const r=gt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&ze(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Pn(n)||!dh.has(n))&&Jt(t,"has",n),r}ownKeys(t){return Jt(t,"iterate",nt(t)?"length":Hn),Reflect.ownKeys(t)}}class Cp extends ph{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Pp=new gh,Vp=new Cp,Dp=new gh(!0);const Go=e=>e,Hs=e=>Reflect.getPrototypeOf(e);function xp(e,t,n){return function(...r){const s=this.__v_raw,i=pt(s),a=ur(i),l=e==="entries"||e===Symbol.iterator&&a,u=e==="keys"&&a,f=s[e](...r),d=n?Go:t?ui:zt;return!t&&Jt(i,"iterate",u?Ko:Hn),{next(){const{value:g,done:E}=f.next();return E?{value:g,done:E}:{value:l?[d(g[0]),d(g[1])]:d(g),done:E}},[Symbol.iterator](){return this}}}}function zs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Np(e,t){const n={get(s){const i=this.__v_raw,a=pt(i),l=pt(s);e||(fn(s,l)&&Jt(a,"get",s),Jt(a,"get",l));const{has:u}=Hs(a),f=t?Go:e?ui:zt;if(u.call(a,s))return f(i.get(s));if(u.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&Jt(pt(s),"iterate",Hn),s.size},has(s){const i=this.__v_raw,a=pt(i),l=pt(s);return e||(fn(s,l)&&Jt(a,"has",s),Jt(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,u=pt(l),f=t?Go:e?ui:zt;return!e&&Jt(u,"iterate",Hn),l.forEach((d,g)=>s.call(i,f(d),f(g),a))}};return ie(n,e?{add:zs("add"),set:zs("set"),delete:zs("delete"),clear:zs("clear")}:{add(s){!t&&!Ee(s)&&!Tn(s)&&(s=pt(s));const i=pt(this);return Hs(i).has.call(i,s)||(i.add(s),ze(i,"add",s,s)),this},set(s,i){!t&&!Ee(i)&&!Tn(i)&&(i=pt(i));const a=pt(this),{has:l,get:u}=Hs(a);let f=l.call(a,s);f||(s=pt(s),f=l.call(a,s));const d=u.call(a,s);return a.set(s,i),f?fn(i,d)&&ze(a,"set",s,i):ze(a,"add",s,i),this},delete(s){const i=pt(this),{has:a,get:l}=Hs(i);let u=a.call(i,s);u||(s=pt(s),u=a.call(i,s)),l&&l.call(i,s);const f=i.delete(s);return u&&ze(i,"delete",s,void 0),f},clear(){const s=pt(this),i=s.size!==0,a=s.clear();return i&&ze(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=xp(s,e,t)}),n}function Oa(e,t){const n=Np(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(gt(n,s)&&s in r?n:r,s,i)}const Op={get:Oa(!1,!1)},Mp={get:Oa(!1,!0)},kp={get:Oa(!0,!1)};const mh=new WeakMap,_h=new WeakMap,yh=new WeakMap,Lp=new WeakMap;function Fp(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Up(e){return e.__v_skip||!Object.isExtensible(e)?0:Fp(hp(e))}function Ma(e){return Tn(e)?e:ka(e,!1,Pp,Op,mh)}function Bp(e){return ka(e,!1,Dp,Mp,_h)}function Wo(e){return ka(e,!0,Vp,kp,yh)}function ka(e,t,n,r,s){if(!St(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Up(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function hr(e){return Tn(e)?hr(e.__v_raw):!!(e&&e.__v_isReactive)}function Tn(e){return!!(e&&e.__v_isReadonly)}function Ee(e){return!!(e&&e.__v_isShallow)}function La(e){return e?!!e.__v_raw:!1}function pt(e){const t=e&&e.__v_raw;return t?pt(t):e}function jp(e){return!gt(e,"__v_skip")&&Object.isExtensible(e)&&eh(e,"__v_skip",!0),e}const zt=e=>St(e)?Ma(e):e,ui=e=>St(e)?Wo(e):e;function te(e){return e?e.__v_isRef===!0:!1}function fr(e){return $p(e,!1)}function $p(e,t){return te(e)?e:new qp(e,t)}class qp{constructor(t,n){this.dep=new Na,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:pt(t),this._value=n?t:zt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Ee(t)||Tn(t);t=r?t:pt(t),fn(t,n)&&(this._rawValue=t,this._value=r?t:zt(t),this.dep.trigger())}}function Hp(e){return te(e)?e.value:e}const zp={get:(e,t,n)=>t==="__v_raw"?e:Hp(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return te(s)&&!te(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Eh(e){return hr(e)?e:new Proxy(e,zp)}class Kp{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Na(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ps-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&It!==this)return ah(this,!0),!0}get value(){const t=this.dep.track();return uh(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Gp(e,t,n=!1){let r,s;return st(e)?r=e:(r=e.get,s=e.set),new Kp(r,s,n)}const Ks={},hi=new WeakMap;let jn;function Wp(e,t=!1,n=jn){if(n){let r=hi.get(n);r||hi.set(n,r=[]),r.push(e)}}function Qp(e,t,n=vt){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:u}=n,f=K=>s?K:Ee(K)||s===!1||s===0?Ke(K,1):Ke(K);let d,g,E,S,L=!1,B=!1;if(te(e)?(g=()=>e.value,L=Ee(e)):hr(e)?(g=()=>f(e),L=!0):nt(e)?(B=!0,L=e.some(K=>hr(K)||Ee(K)),g=()=>e.map(K=>{if(te(K))return K.value;if(hr(K))return f(K);if(st(K))return u?u(K,2):K()})):st(e)?t?g=u?()=>u(e,2):e:g=()=>{if(E){Ge();try{E()}finally{We()}}const K=jn;jn=d;try{return u?u(e,3,[S]):e(S)}finally{jn=K}}:g=Ne,t&&s){const K=g,ct=s===!0?1/0:s;g=()=>Ke(K(),ct)}const U=vp(),z=()=>{d.stop(),U&&U.active&&ba(U.effects,d)};if(i&&t){const K=t;t=(...ct)=>{K(...ct),z()}}let W=B?new Array(e.length).fill(Ks):Ks;const X=K=>{if(!(!(d.flags&1)||!d.dirty&&!K))if(t){const ct=d.run();if(s||L||(B?ct.some((Et,I)=>fn(Et,W[I])):fn(ct,W))){E&&E();const Et=jn;jn=d;try{const I=[ct,W===Ks?void 0:B&&W[0]===Ks?[]:W,S];W=ct,u?u(t,3,I):t(...I)}finally{jn=Et}}}else d.run()};return l&&l(X),d=new ih(g),d.scheduler=a?()=>a(X,!1):X,S=K=>Wp(K,!1,d),E=d.onStop=()=>{const K=hi.get(d);if(K){if(u)u(K,4);else for(const ct of K)ct();hi.delete(d)}},t?r?X(!0):W=d.run():a?a(X.bind(null,!0),!0):d.run(),z.pause=d.pause.bind(d),z.resume=d.resume.bind(d),z.stop=z,z}function Ke(e,t=1/0,n){if(t<=0||!St(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,te(e))Ke(e.value,t,n);else if(nt(e))for(let r=0;r<e.length;r++)Ke(e[r],t,n);else if(Xu(e)||ur(e))e.forEach(r=>{Ke(r,t,n)});else if(Zu(e)){for(const r in e)Ke(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Ke(e[r],t,n)}return e}function Ss(e,t,n,r){try{return r?e(...r):e()}catch(s){Fi(s,t,n)}}function Ue(e,t,n,r){if(st(e)){const s=Ss(e,t,n,r);return s&&Yu(s)&&s.catch(i=>{Fi(i,t,n)}),s}if(nt(e)){const s=[];for(let i=0;i<e.length;i++)s.push(Ue(e[i],t,n,r));return s}}function Fi(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||vt;if(t){let l=t.parent;const u=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let g=0;g<d.length;g++)if(d[g](e,u,f)===!1)return}l=l.parent}if(i){Ge(),Ss(i,null,10,[e,u,f]),We();return}}Xp(e,n,s,r,a)}function Xp(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const re=[];let Ce=-1;const dr=[];let an=null,rr=0;const Th=Promise.resolve();let fi=null;function Yp(e){const t=fi||Th;return e?t.then(this?e.bind(this):e):t}function Jp(e){let t=Ce+1,n=re.length;for(;t<n;){const r=t+n>>>1,s=re[r],i=ms(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function Fa(e){if(!(e.flags&1)){const t=ms(e),n=re[re.length-1];!n||!(e.flags&2)&&t>=ms(n)?re.push(e):re.splice(Jp(t),0,e),e.flags|=1,vh()}}function vh(){fi||(fi=Th.then(wh))}function Zp(e){nt(e)?dr.push(...e):an&&e.id===-1?an.splice(rr+1,0,e):e.flags&1||(dr.push(e),e.flags|=1),vh()}function dc(e,t,n=Ce+1){for(;n<re.length;n++){const r=re[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;re.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Ih(e){if(dr.length){const t=[...new Set(dr)].sort((n,r)=>ms(n)-ms(r));if(dr.length=0,an){an.push(...t);return}for(an=t,rr=0;rr<an.length;rr++){const n=an[rr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}an=null,rr=0}}const ms=e=>e.id==null?e.flags&2?-1:1/0:e.id;function wh(e){try{for(Ce=0;Ce<re.length;Ce++){const t=re[Ce];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ss(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ce<re.length;Ce++){const t=re[Ce];t&&(t.flags&=-2)}Ce=-1,re.length=0,Ih(),fi=null,(re.length||dr.length)&&wh()}}let ye=null,Ah=null;function di(e){const t=ye;return ye=e,Ah=e&&e.type.__scopeId||null,t}function tg(e,t=ye,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&wc(-1);const i=di(t);let a;try{a=e(...s)}finally{di(i),r._d&&wc(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function So(e,t){if(ye===null)return e;const n=$i(ye),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,u=vt]=t[s];i&&(st(i)&&(i={mounted:i,updated:i}),i.deep&&Ke(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:u}))}return e}function Un(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let u=l.dir[r];u&&(Ge(),Ue(u,n,8,[e.el,l,e,t]),We())}}const eg=Symbol("_vte"),ng=e=>e.__isTeleport,rg=Symbol("_leaveCb");function Ua(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ua(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function bh(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const pi=new WeakMap;function is(e,t,n,r,s=!1){if(nt(e)){e.forEach((L,B)=>is(L,t&&(nt(t)?t[B]:t),n,r,s));return}if(os(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&is(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?$i(r.component):r.el,a=s?null:i,{i:l,r:u}=e,f=t&&t.r,d=l.refs===vt?l.refs={}:l.refs,g=l.setupState,E=pt(g),S=g===vt?Qu:L=>gt(E,L);if(f!=null&&f!==u){if(pc(t),Nt(f))d[f]=null,S(f)&&(g[f]=null);else if(te(f)){f.value=null;const L=t;L.k&&(d[L.k]=null)}}if(st(u))Ss(u,l,12,[a,d]);else{const L=Nt(u),B=te(u);if(L||B){const U=()=>{if(e.f){const z=L?S(u)?g[u]:d[u]:u.value;if(s)nt(z)&&ba(z,i);else if(nt(z))z.includes(i)||z.push(i);else if(L)d[u]=[i],S(u)&&(g[u]=d[u]);else{const W=[i];u.value=W,e.k&&(d[e.k]=W)}}else L?(d[u]=a,S(u)&&(g[u]=a)):B&&(u.value=a,e.k&&(d[e.k]=a))};if(a){const z=()=>{U(),pi.delete(e)};z.id=-1,pi.set(e,z),de(z,n)}else pc(e),U()}}}function pc(e){const t=pi.get(e);t&&(t.flags|=8,pi.delete(e))}ki().requestIdleCallback;ki().cancelIdleCallback;const os=e=>!!e.type.__asyncLoader,Rh=e=>e.type.__isKeepAlive;function sg(e,t){Sh(e,"a",t)}function ig(e,t){Sh(e,"da",t)}function Sh(e,t,n=se){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Ui(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Rh(s.parent.vnode)&&og(r,t,n,s),s=s.parent}}function og(e,t,n,r){const s=Ui(t,e,r,!0);Ph(()=>{ba(r[t],s)},n)}function Ui(e,t,n=se,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{Ge();const l=Cs(n),u=Ue(t,n,e,a);return l(),We(),u});return r?s.unshift(i):s.push(i),i}}const Je=e=>(t,n=se)=>{(!ys||e==="sp")&&Ui(e,(...r)=>t(...r),n)},ag=Je("bm"),Ch=Je("m"),lg=Je("bu"),cg=Je("u"),ug=Je("bum"),Ph=Je("um"),hg=Je("sp"),fg=Je("rtg"),dg=Je("rtc");function pg(e,t=se){Ui("ec",e,t)}const gg=Symbol.for("v-ndc");function mg(e,t,n,r){let s;const i=n,a=nt(e);if(a||Nt(e)){const l=a&&hr(e);let u=!1,f=!1;l&&(u=!Ee(e),f=Tn(e),e=Li(e)),s=new Array(e.length);for(let d=0,g=e.length;d<g;d++)s[d]=t(u?f?ui(zt(e[d])):zt(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(St(e))if(e[Symbol.iterator])s=Array.from(e,(l,u)=>t(l,u,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let u=0,f=l.length;u<f;u++){const d=l[u];s[u]=t(e[d],d,u,i)}}else s=[];return s}const Qo=e=>e?Yh(e)?$i(e):Qo(e.parent):null,as=ie(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Qo(e.parent),$root:e=>Qo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Dh(e),$forceUpdate:e=>e.f||(e.f=()=>{Fa(e.update)}),$nextTick:e=>e.n||(e.n=Yp.bind(e.proxy)),$watch:e=>Fg.bind(e)}),Co=(e,t)=>e!==vt&&!e.__isScriptSetup&&gt(e,t),_g={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:u}=e;let f;if(t[0]!=="$"){const S=a[t];if(S!==void 0)switch(S){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Co(r,t))return a[t]=1,r[t];if(s!==vt&&gt(s,t))return a[t]=2,s[t];if((f=e.propsOptions[0])&&gt(f,t))return a[t]=3,i[t];if(n!==vt&&gt(n,t))return a[t]=4,n[t];Xo&&(a[t]=0)}}const d=as[t];let g,E;if(d)return t==="$attrs"&&Jt(e.attrs,"get",""),d(e);if((g=l.__cssModules)&&(g=g[t]))return g;if(n!==vt&&gt(n,t))return a[t]=4,n[t];if(E=u.config.globalProperties,gt(E,t))return E[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Co(s,t)?(s[t]=n,!0):r!==vt&&gt(r,t)?(r[t]=n,!0):gt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:a}},l){let u,f;return!!(n[l]||e!==vt&&l[0]!=="$"&&gt(e,l)||Co(t,l)||(u=i[0])&&gt(u,l)||gt(r,l)||gt(as,l)||gt(s.config.globalProperties,l)||(f=a.__cssModules)&&f[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:gt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function gc(e){return nt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Xo=!0;function yg(e){const t=Dh(e),n=e.proxy,r=e.ctx;Xo=!1,t.beforeCreate&&mc(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:u,inject:f,created:d,beforeMount:g,mounted:E,beforeUpdate:S,updated:L,activated:B,deactivated:U,beforeDestroy:z,beforeUnmount:W,destroyed:X,unmounted:K,render:ct,renderTracked:Et,renderTriggered:I,errorCaptured:m,serverPrefetch:T,expose:A,inheritAttrs:v,components:b,directives:y,filters:Lt}=t;if(f&&Eg(f,r,null),a)for(const wt in a){const dt=a[wt];st(dt)&&(r[wt]=dt.bind(n))}if(s){const wt=s.call(n,n);St(wt)&&(e.data=Ma(wt))}if(Xo=!0,i)for(const wt in i){const dt=i[wt],me=st(dt)?dt.bind(n,n):st(dt.get)?dt.get.bind(n,n):Ne,Xn=!st(dt)&&st(dt.set)?dt.set.bind(n):Ne,Ae=Zh({get:me,set:Xn});Object.defineProperty(r,wt,{enumerable:!0,configurable:!0,get:()=>Ae.value,set:ce=>Ae.value=ce})}if(l)for(const wt in l)Vh(l[wt],r,n,wt);if(u){const wt=st(u)?u.call(n):u;Reflect.ownKeys(wt).forEach(dt=>{bg(dt,wt[dt])})}d&&mc(d,e,"c");function $t(wt,dt){nt(dt)?dt.forEach(me=>wt(me.bind(n))):dt&&wt(dt.bind(n))}if($t(ag,g),$t(Ch,E),$t(lg,S),$t(cg,L),$t(sg,B),$t(ig,U),$t(pg,m),$t(dg,Et),$t(fg,I),$t(ug,W),$t(Ph,K),$t(hg,T),nt(A))if(A.length){const wt=e.exposed||(e.exposed={});A.forEach(dt=>{Object.defineProperty(wt,dt,{get:()=>n[dt],set:me=>n[dt]=me,enumerable:!0})})}else e.exposed||(e.exposed={});ct&&e.render===Ne&&(e.render=ct),v!=null&&(e.inheritAttrs=v),b&&(e.components=b),y&&(e.directives=y),T&&bh(e)}function Eg(e,t,n=Ne){nt(e)&&(e=Yo(e));for(const r in e){const s=e[r];let i;St(s)?"default"in s?i=ti(s.from||r,s.default,!0):i=ti(s.from||r):i=ti(s),te(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function mc(e,t,n){Ue(nt(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Vh(e,t,n,r){let s=r.includes(".")?Hh(n,r):()=>n[r];if(Nt(e)){const i=t[e];st(i)&&ei(s,i)}else if(st(e))ei(s,e.bind(n));else if(St(e))if(nt(e))e.forEach(i=>Vh(i,t,n,r));else{const i=st(e.handler)?e.handler.bind(n):t[e.handler];st(i)&&ei(s,i,e)}}function Dh(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let u;return l?u=l:!s.length&&!n&&!r?u=t:(u={},s.length&&s.forEach(f=>gi(u,f,a,!0)),gi(u,t,a)),St(t)&&i.set(t,u),u}function gi(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&gi(e,i,n,!0),s&&s.forEach(a=>gi(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=Tg[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const Tg={data:_c,props:yc,emits:yc,methods:Jr,computed:Jr,beforeCreate:ne,created:ne,beforeMount:ne,mounted:ne,beforeUpdate:ne,updated:ne,beforeDestroy:ne,beforeUnmount:ne,destroyed:ne,unmounted:ne,activated:ne,deactivated:ne,errorCaptured:ne,serverPrefetch:ne,components:Jr,directives:Jr,watch:Ig,provide:_c,inject:vg};function _c(e,t){return t?e?function(){return ie(st(e)?e.call(this,this):e,st(t)?t.call(this,this):t)}:t:e}function vg(e,t){return Jr(Yo(e),Yo(t))}function Yo(e){if(nt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ne(e,t){return e?[...new Set([].concat(e,t))]:t}function Jr(e,t){return e?ie(Object.create(null),e,t):t}function yc(e,t){return e?nt(e)&&nt(t)?[...new Set([...e,...t])]:ie(Object.create(null),gc(e),gc(t??{})):t}function Ig(e,t){if(!e)return t;if(!t)return e;const n=ie(Object.create(null),e);for(const r in t)n[r]=ne(e[r],t[r]);return n}function xh(){return{app:null,config:{isNativeTag:Qu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wg=0;function Ag(e,t){return function(r,s=null){st(r)||(r=ie({},r)),s!=null&&!St(s)&&(s=null);const i=xh(),a=new WeakSet,l=[];let u=!1;const f=i.app={_uid:wg++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:am,get config(){return i.config},set config(d){},use(d,...g){return a.has(d)||(d&&st(d.install)?(a.add(d),d.install(f,...g)):st(d)&&(a.add(d),d(f,...g))),f},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),f},component(d,g){return g?(i.components[d]=g,f):i.components[d]},directive(d,g){return g?(i.directives[d]=g,f):i.directives[d]},mount(d,g,E){if(!u){const S=f._ceVNode||Ie(r,s);return S.appContext=i,E===!0?E="svg":E===!1&&(E=void 0),e(S,d,E),u=!0,f._container=d,d.__vue_app__=f,$i(S.component)}},onUnmount(d){l.push(d)},unmount(){u&&(Ue(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,g){return i.provides[d]=g,f},runWithContext(d){const g=pr;pr=f;try{return d()}finally{pr=g}}};return f}}let pr=null;function bg(e,t){if(se){let n=se.provides;const r=se.parent&&se.parent.provides;r===n&&(n=se.provides=Object.create(r)),n[e]=t}}function ti(e,t,n=!1){const r=em();if(r||pr){let s=pr?pr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&st(t)?t.call(r&&r.proxy):t}}const Nh={},Oh=()=>Object.create(Nh),Mh=e=>Object.getPrototypeOf(e)===Nh;function Rg(e,t,n,r=!1){const s={},i=Oh();e.propsDefaults=Object.create(null),kh(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:Bp(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function Sg(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=pt(s),[u]=e.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let g=0;g<d.length;g++){let E=d[g];if(Bi(e.emitsOptions,E))continue;const S=t[E];if(u)if(gt(i,E))S!==i[E]&&(i[E]=S,f=!0);else{const L=En(E);s[L]=Jo(u,l,L,S,e,!1)}else S!==i[E]&&(i[E]=S,f=!0)}}}else{kh(e,t,s,i)&&(f=!0);let d;for(const g in l)(!t||!gt(t,g)&&((d=Gn(g))===g||!gt(t,d)))&&(u?n&&(n[g]!==void 0||n[d]!==void 0)&&(s[g]=Jo(u,l,g,void 0,e,!0)):delete s[g]);if(i!==l)for(const g in i)(!t||!gt(t,g))&&(delete i[g],f=!0)}f&&ze(e.attrs,"set","")}function kh(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let u in t){if(ns(u))continue;const f=t[u];let d;s&&gt(s,d=En(u))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:Bi(e.emitsOptions,u)||(!(u in r)||f!==r[u])&&(r[u]=f,a=!0)}if(i){const u=pt(n),f=l||vt;for(let d=0;d<i.length;d++){const g=i[d];n[g]=Jo(s,u,g,f[g],e,!gt(f,g))}}return a}function Jo(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=gt(a,"default");if(l&&r===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&st(u)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const d=Cs(s);r=f[n]=u.call(null,t),d()}}else r=u;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===Gn(n))&&(r=!0))}return r}const Cg=new WeakMap;function Lh(e,t,n=!1){const r=n?Cg:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let u=!1;if(!st(e)){const d=g=>{u=!0;const[E,S]=Lh(g,t,!0);ie(a,E),S&&l.push(...S)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!u)return St(e)&&r.set(e,cr),cr;if(nt(i))for(let d=0;d<i.length;d++){const g=En(i[d]);Ec(g)&&(a[g]=vt)}else if(i)for(const d in i){const g=En(d);if(Ec(g)){const E=i[d],S=a[g]=nt(E)||st(E)?{type:E}:ie({},E),L=S.type;let B=!1,U=!0;if(nt(L))for(let z=0;z<L.length;++z){const W=L[z],X=st(W)&&W.name;if(X==="Boolean"){B=!0;break}else X==="String"&&(U=!1)}else B=st(L)&&L.name==="Boolean";S[0]=B,S[1]=U,(B||gt(S,"default"))&&l.push(g)}}const f=[a,l];return St(e)&&r.set(e,f),f}function Ec(e){return e[0]!=="$"&&!ns(e)}const Ba=e=>e==="_"||e==="_ctx"||e==="$stable",ja=e=>nt(e)?e.map(De):[De(e)],Pg=(e,t,n)=>{if(t._n)return t;const r=tg((...s)=>ja(t(...s)),n);return r._c=!1,r},Fh=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Ba(s))continue;const i=e[s];if(st(i))t[s]=Pg(s,i,r);else if(i!=null){const a=ja(i);t[s]=()=>a}}},Uh=(e,t)=>{const n=ja(t);e.slots.default=()=>n},Bh=(e,t,n)=>{for(const r in t)(n||!Ba(r))&&(e[r]=t[r])},Vg=(e,t,n)=>{const r=e.slots=Oh();if(e.vnode.shapeFlag&32){const s=t._;s?(Bh(r,t,n),n&&eh(r,"_",s,!0)):Fh(t,r)}else t&&Uh(e,t)},Dg=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=vt;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:Bh(s,t,n):(i=!t.$stable,Fh(t,s)),a=t}else t&&(Uh(e,t),a={default:1});if(i)for(const l in s)!Ba(l)&&a[l]==null&&delete s[l]},de=Kg;function xg(e){return Ng(e)}function Ng(e,t){const n=ki();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:u,setText:f,setElementText:d,parentNode:g,nextSibling:E,setScopeId:S=Ne,insertStaticContent:L}=e,B=(_,w,P,F=null,x=null,N=null,$=void 0,k=null,M=!!w.dynamicChildren)=>{if(_===w)return;_&&!Yr(_,w)&&(F=Ze(_),ce(_,x,N,!0),_=null),w.patchFlag===-2&&(M=!1,w.dynamicChildren=null);const{type:O,ref:J,shapeFlag:q}=w;switch(O){case ji:U(_,w,P,F);break;case vn:z(_,w,P,F);break;case Vo:_==null&&W(w,P,F,$);break;case Ve:b(_,w,P,F,x,N,$,k,M);break;default:q&1?ct(_,w,P,F,x,N,$,k,M):q&6?y(_,w,P,F,x,N,$,k,M):(q&64||q&128)&&O.process(_,w,P,F,x,N,$,k,M,Nn)}J!=null&&x?is(J,_&&_.ref,N,w||_,!w):J==null&&_&&_.ref!=null&&is(_.ref,null,N,_,!0)},U=(_,w,P,F)=>{if(_==null)r(w.el=l(w.children),P,F);else{const x=w.el=_.el;w.children!==_.children&&f(x,w.children)}},z=(_,w,P,F)=>{_==null?r(w.el=u(w.children||""),P,F):w.el=_.el},W=(_,w,P,F)=>{[_.el,_.anchor]=L(_.children,w,P,F,_.el,_.anchor)},X=({el:_,anchor:w},P,F)=>{let x;for(;_&&_!==w;)x=E(_),r(_,P,F),_=x;r(w,P,F)},K=({el:_,anchor:w})=>{let P;for(;_&&_!==w;)P=E(_),s(_),_=P;s(w)},ct=(_,w,P,F,x,N,$,k,M)=>{if(w.type==="svg"?$="svg":w.type==="math"&&($="mathml"),_==null)Et(w,P,F,x,N,$,k,M);else{const O=_.el&&_.el._isVueCE?_.el:null;try{O&&O._beginPatch(),T(_,w,x,N,$,k,M)}finally{O&&O._endPatch()}}},Et=(_,w,P,F,x,N,$,k)=>{let M,O;const{props:J,shapeFlag:q,transition:Q,dirs:Z}=_;if(M=_.el=a(_.type,N,J&&J.is,J),q&8?d(M,_.children):q&16&&m(_.children,M,null,F,x,Po(_,N),$,k),Z&&Un(_,null,F,"created"),I(M,_,_.scopeId,$,F),J){for(const _t in J)_t!=="value"&&!ns(_t)&&i(M,_t,null,J[_t],N,F);"value"in J&&i(M,"value",null,J.value,N),(O=J.onVnodeBeforeMount)&&Se(O,F,_)}Z&&Un(_,null,F,"beforeMount");const ot=Og(x,Q);ot&&Q.beforeEnter(M),r(M,w,P),((O=J&&J.onVnodeMounted)||ot||Z)&&de(()=>{O&&Se(O,F,_),ot&&Q.enter(M),Z&&Un(_,null,F,"mounted")},x)},I=(_,w,P,F,x)=>{if(P&&S(_,P),F)for(let N=0;N<F.length;N++)S(_,F[N]);if(x){let N=x.subTree;if(w===N||Kh(N.type)&&(N.ssContent===w||N.ssFallback===w)){const $=x.vnode;I(_,$,$.scopeId,$.slotScopeIds,x.parent)}}},m=(_,w,P,F,x,N,$,k,M=0)=>{for(let O=M;O<_.length;O++){const J=_[O]=k?ln(_[O]):De(_[O]);B(null,J,w,P,F,x,N,$,k)}},T=(_,w,P,F,x,N,$)=>{const k=w.el=_.el;let{patchFlag:M,dynamicChildren:O,dirs:J}=w;M|=_.patchFlag&16;const q=_.props||vt,Q=w.props||vt;let Z;if(P&&Bn(P,!1),(Z=Q.onVnodeBeforeUpdate)&&Se(Z,P,w,_),J&&Un(w,_,P,"beforeUpdate"),P&&Bn(P,!0),(q.innerHTML&&Q.innerHTML==null||q.textContent&&Q.textContent==null)&&d(k,""),O?A(_.dynamicChildren,O,k,P,F,Po(w,x),N):$||dt(_,w,k,null,P,F,Po(w,x),N,!1),M>0){if(M&16)v(k,q,Q,P,x);else if(M&2&&q.class!==Q.class&&i(k,"class",null,Q.class,x),M&4&&i(k,"style",q.style,Q.style,x),M&8){const ot=w.dynamicProps;for(let _t=0;_t<ot.length;_t++){const ft=ot[_t],Wt=q[ft],Qt=Q[ft];(Qt!==Wt||ft==="value")&&i(k,ft,Wt,Qt,x,P)}}M&1&&_.children!==w.children&&d(k,w.children)}else!$&&O==null&&v(k,q,Q,P,x);((Z=Q.onVnodeUpdated)||J)&&de(()=>{Z&&Se(Z,P,w,_),J&&Un(w,_,P,"updated")},F)},A=(_,w,P,F,x,N,$)=>{for(let k=0;k<w.length;k++){const M=_[k],O=w[k],J=M.el&&(M.type===Ve||!Yr(M,O)||M.shapeFlag&198)?g(M.el):P;B(M,O,J,null,F,x,N,$,!0)}},v=(_,w,P,F,x)=>{if(w!==P){if(w!==vt)for(const N in w)!ns(N)&&!(N in P)&&i(_,N,w[N],null,x,F);for(const N in P){if(ns(N))continue;const $=P[N],k=w[N];$!==k&&N!=="value"&&i(_,N,k,$,x,F)}"value"in P&&i(_,"value",w.value,P.value,x)}},b=(_,w,P,F,x,N,$,k,M)=>{const O=w.el=_?_.el:l(""),J=w.anchor=_?_.anchor:l("");let{patchFlag:q,dynamicChildren:Q,slotScopeIds:Z}=w;Z&&(k=k?k.concat(Z):Z),_==null?(r(O,P,F),r(J,P,F),m(w.children||[],P,J,x,N,$,k,M)):q>0&&q&64&&Q&&_.dynamicChildren?(A(_.dynamicChildren,Q,P,x,N,$,k),(w.key!=null||x&&w===x.subTree)&&jh(_,w,!0)):dt(_,w,P,J,x,N,$,k,M)},y=(_,w,P,F,x,N,$,k,M)=>{w.slotScopeIds=k,_==null?w.shapeFlag&512?x.ctx.activate(w,P,F,$,M):Lt(w,P,F,x,N,$,M):we(_,w,M)},Lt=(_,w,P,F,x,N,$)=>{const k=_.component=tm(_,F,x);if(Rh(_)&&(k.ctx.renderer=Nn),nm(k,!1,$),k.asyncDep){if(x&&x.registerDep(k,$t,$),!_.el){const M=k.subTree=Ie(vn);z(null,M,w,P),_.placeholder=M.el}}else $t(k,_,w,P,x,N,$)},we=(_,w,P)=>{const F=w.component=_.component;if(Hg(_,w,P))if(F.asyncDep&&!F.asyncResolved){wt(F,w,P);return}else F.next=w,F.update();else w.el=_.el,F.vnode=w},$t=(_,w,P,F,x,N,$)=>{const k=()=>{if(_.isMounted){let{next:q,bu:Q,u:Z,parent:ot,vnode:_t}=_;{const he=$h(_);if(he){q&&(q.el=_t.el,wt(_,q,$)),he.asyncDep.then(()=>{_.isUnmounted||k()});return}}let ft=q,Wt;Bn(_,!1),q?(q.el=_t.el,wt(_,q,$)):q=_t,Q&&Zs(Q),(Wt=q.props&&q.props.onVnodeBeforeUpdate)&&Se(Wt,ot,q,_t),Bn(_,!0);const Qt=vc(_),ue=_.subTree;_.subTree=Qt,B(ue,Qt,g(ue.el),Ze(ue),_,x,N),q.el=Qt.el,ft===null&&zg(_,Qt.el),Z&&de(Z,x),(Wt=q.props&&q.props.onVnodeUpdated)&&de(()=>Se(Wt,ot,q,_t),x)}else{let q;const{el:Q,props:Z}=w,{bm:ot,m:_t,parent:ft,root:Wt,type:Qt}=_,ue=os(w);Bn(_,!1),ot&&Zs(ot),!ue&&(q=Z&&Z.onVnodeBeforeMount)&&Se(q,ft,w),Bn(_,!0);{Wt.ce&&Wt.ce._def.shadowRoot!==!1&&Wt.ce._injectChildStyle(Qt);const he=_.subTree=vc(_);B(null,he,P,F,_,x,N),w.el=he.el}if(_t&&de(_t,x),!ue&&(q=Z&&Z.onVnodeMounted)){const he=w;de(()=>Se(q,ft,he),x)}(w.shapeFlag&256||ft&&os(ft.vnode)&&ft.vnode.shapeFlag&256)&&_.a&&de(_.a,x),_.isMounted=!0,w=P=F=null}};_.scope.on();const M=_.effect=new ih(k);_.scope.off();const O=_.update=M.run.bind(M),J=_.job=M.runIfDirty.bind(M);J.i=_,J.id=_.uid,M.scheduler=()=>Fa(J),Bn(_,!0),O()},wt=(_,w,P)=>{w.component=_;const F=_.vnode.props;_.vnode=w,_.next=null,Sg(_,w.props,F,P),Dg(_,w.children,P),Ge(),dc(_),We()},dt=(_,w,P,F,x,N,$,k,M=!1)=>{const O=_&&_.children,J=_?_.shapeFlag:0,q=w.children,{patchFlag:Q,shapeFlag:Z}=w;if(Q>0){if(Q&128){Xn(O,q,P,F,x,N,$,k,M);return}else if(Q&256){me(O,q,P,F,x,N,$,k,M);return}}Z&8?(J&16&&$e(O,x,N),q!==O&&d(P,q)):J&16?Z&16?Xn(O,q,P,F,x,N,$,k,M):$e(O,x,N,!0):(J&8&&d(P,""),Z&16&&m(q,P,F,x,N,$,k,M))},me=(_,w,P,F,x,N,$,k,M)=>{_=_||cr,w=w||cr;const O=_.length,J=w.length,q=Math.min(O,J);let Q;for(Q=0;Q<q;Q++){const Z=w[Q]=M?ln(w[Q]):De(w[Q]);B(_[Q],Z,P,null,x,N,$,k,M)}O>J?$e(_,x,N,!0,!1,q):m(w,P,F,x,N,$,k,M,q)},Xn=(_,w,P,F,x,N,$,k,M)=>{let O=0;const J=w.length;let q=_.length-1,Q=J-1;for(;O<=q&&O<=Q;){const Z=_[O],ot=w[O]=M?ln(w[O]):De(w[O]);if(Yr(Z,ot))B(Z,ot,P,null,x,N,$,k,M);else break;O++}for(;O<=q&&O<=Q;){const Z=_[q],ot=w[Q]=M?ln(w[Q]):De(w[Q]);if(Yr(Z,ot))B(Z,ot,P,null,x,N,$,k,M);else break;q--,Q--}if(O>q){if(O<=Q){const Z=Q+1,ot=Z<J?w[Z].el:F;for(;O<=Q;)B(null,w[O]=M?ln(w[O]):De(w[O]),P,ot,x,N,$,k,M),O++}}else if(O>Q)for(;O<=q;)ce(_[O],x,N,!0),O++;else{const Z=O,ot=O,_t=new Map;for(O=ot;O<=Q;O++){const qt=w[O]=M?ln(w[O]):De(w[O]);qt.key!=null&&_t.set(qt.key,O)}let ft,Wt=0;const Qt=Q-ot+1;let ue=!1,he=0;const Te=new Array(Qt);for(O=0;O<Qt;O++)Te[O]=0;for(O=Z;O<=q;O++){const qt=_[O];if(Wt>=Qt){ce(qt,x,N,!0);continue}let Ft;if(qt.key!=null)Ft=_t.get(qt.key);else for(ft=ot;ft<=Q;ft++)if(Te[ft-ot]===0&&Yr(qt,w[ft])){Ft=ft;break}Ft===void 0?ce(qt,x,N,!0):(Te[Ft-ot]=O+1,Ft>=he?he=Ft:ue=!0,B(qt,w[Ft],P,null,x,N,$,k,M),Wt++)}const Jn=ue?Mg(Te):cr;for(ft=Jn.length-1,O=Qt-1;O>=0;O--){const qt=ot+O,Ft=w[qt],Mr=w[qt+1],On=qt+1<J?Mr.el||Mr.placeholder:F;Te[O]===0?B(null,Ft,P,On,x,N,$,k,M):ue&&(ft<0||O!==Jn[ft]?Ae(Ft,P,On,2):ft--)}}},Ae=(_,w,P,F,x=null)=>{const{el:N,type:$,transition:k,children:M,shapeFlag:O}=_;if(O&6){Ae(_.component.subTree,w,P,F);return}if(O&128){_.suspense.move(w,P,F);return}if(O&64){$.move(_,w,P,Nn);return}if($===Ve){r(N,w,P);for(let q=0;q<M.length;q++)Ae(M[q],w,P,F);r(_.anchor,w,P);return}if($===Vo){X(_,w,P);return}if(F!==2&&O&1&&k)if(F===0)k.beforeEnter(N),r(N,w,P),de(()=>k.enter(N),x);else{const{leave:q,delayLeave:Q,afterLeave:Z}=k,ot=()=>{_.ctx.isUnmounted?s(N):r(N,w,P)},_t=()=>{N._isLeaving&&N[rg](!0),q(N,()=>{ot(),Z&&Z()})};Q?Q(N,ot,_t):_t()}else r(N,w,P)},ce=(_,w,P,F=!1,x=!1)=>{const{type:N,props:$,ref:k,children:M,dynamicChildren:O,shapeFlag:J,patchFlag:q,dirs:Q,cacheIndex:Z}=_;if(q===-2&&(x=!1),k!=null&&(Ge(),is(k,null,P,_,!0),We()),Z!=null&&(w.renderCache[Z]=void 0),J&256){w.ctx.deactivate(_);return}const ot=J&1&&Q,_t=!os(_);let ft;if(_t&&(ft=$&&$.onVnodeBeforeUnmount)&&Se(ft,w,_),J&6)Nr(_.component,P,F);else{if(J&128){_.suspense.unmount(P,F);return}ot&&Un(_,null,w,"beforeUnmount"),J&64?_.type.remove(_,w,P,Nn,F):O&&!O.hasOnce&&(N!==Ve||q>0&&q&64)?$e(O,w,P,!1,!0):(N===Ve&&q&384||!x&&J&16)&&$e(M,w,P),F&&xr(_)}(_t&&(ft=$&&$.onVnodeUnmounted)||ot)&&de(()=>{ft&&Se(ft,w,_),ot&&Un(_,null,w,"unmounted")},P)},xr=_=>{const{type:w,el:P,anchor:F,transition:x}=_;if(w===Ve){Yn(P,F);return}if(w===Vo){K(_);return}const N=()=>{s(P),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(_.shapeFlag&1&&x&&!x.persisted){const{leave:$,delayLeave:k}=x,M=()=>$(P,N);k?k(_.el,N,M):M()}else N()},Yn=(_,w)=>{let P;for(;_!==w;)P=E(_),s(_),_=P;s(w)},Nr=(_,w,P)=>{const{bum:F,scope:x,job:N,subTree:$,um:k,m:M,a:O}=_;Tc(M),Tc(O),F&&Zs(F),x.stop(),N&&(N.flags|=8,ce($,_,w,P)),k&&de(k,w),de(()=>{_.isUnmounted=!0},w)},$e=(_,w,P,F=!1,x=!1,N=0)=>{for(let $=N;$<_.length;$++)ce(_[$],w,P,F,x)},Ze=_=>{if(_.shapeFlag&6)return Ze(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const w=E(_.anchor||_.el),P=w&&w[eg];return P?E(P):w};let xn=!1;const Or=(_,w,P)=>{_==null?w._vnode&&ce(w._vnode,null,null,!0):B(w._vnode||null,_,w,null,null,null,P),w._vnode=_,xn||(xn=!0,dc(),Ih(),xn=!1)},Nn={p:B,um:ce,m:Ae,r:xr,mt:Lt,mc:m,pc:dt,pbc:A,n:Ze,o:e};return{render:Or,hydrate:void 0,createApp:Ag(Or)}}function Po({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Bn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Og(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function jh(e,t,n=!1){const r=e.children,s=t.children;if(nt(r)&&nt(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=ln(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&jh(a,l)),l.type===ji&&l.patchFlag!==-1&&(l.el=a.el),l.type===vn&&!l.el&&(l.el=a.el)}}function Mg(e){const t=e.slice(),n=[0];let r,s,i,a,l;const u=e.length;for(r=0;r<u;r++){const f=e[r];if(f!==0){if(s=n[n.length-1],e[s]<f){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<f?i=l+1:a=l;f<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function $h(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:$h(t)}function Tc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const kg=Symbol.for("v-scx"),Lg=()=>ti(kg);function ei(e,t,n){return qh(e,t,n)}function qh(e,t,n=vt){const{immediate:r,deep:s,flush:i,once:a}=n,l=ie({},n),u=t&&r||!t&&i!=="post";let f;if(ys){if(i==="sync"){const S=Lg();f=S.__watcherHandles||(S.__watcherHandles=[])}else if(!u){const S=()=>{};return S.stop=Ne,S.resume=Ne,S.pause=Ne,S}}const d=se;l.call=(S,L,B)=>Ue(S,d,L,B);let g=!1;i==="post"?l.scheduler=S=>{de(S,d&&d.suspense)}:i!=="sync"&&(g=!0,l.scheduler=(S,L)=>{L?S():Fa(S)}),l.augmentJob=S=>{t&&(S.flags|=4),g&&(S.flags|=2,d&&(S.id=d.uid,S.i=d))};const E=Qp(e,t,l);return ys&&(f?f.push(E):u&&E()),E}function Fg(e,t,n){const r=this.proxy,s=Nt(e)?e.includes(".")?Hh(r,e):()=>r[e]:e.bind(r,r);let i;st(t)?i=t:(i=t.handler,n=t);const a=Cs(this),l=qh(s,i.bind(r),n);return a(),l}function Hh(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Ug=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${En(t)}Modifiers`]||e[`${Gn(t)}Modifiers`];function Bg(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||vt;let s=n;const i=t.startsWith("update:"),a=i&&Ug(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>Nt(d)?d.trim():d)),a.number&&(s=n.map(Sa)));let l,u=r[l=Io(t)]||r[l=Io(En(t))];!u&&i&&(u=r[l=Io(Gn(t))]),u&&Ue(u,e,6,s);const f=r[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Ue(f,e,6,s)}}const jg=new WeakMap;function zh(e,t,n=!1){const r=n?jg:t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!st(e)){const u=f=>{const d=zh(f,t,!0);d&&(l=!0,ie(a,d))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!i&&!l?(St(e)&&r.set(e,null),null):(nt(i)?i.forEach(u=>a[u]=null):ie(a,i),St(e)&&r.set(e,a),a)}function Bi(e,t){return!e||!Ni(t)?!1:(t=t.slice(2).replace(/Once$/,""),gt(e,t[0].toLowerCase()+t.slice(1))||gt(e,Gn(t))||gt(e,t))}function vc(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:u,render:f,renderCache:d,props:g,data:E,setupState:S,ctx:L,inheritAttrs:B}=e,U=di(e);let z,W;try{if(n.shapeFlag&4){const K=s||r,ct=K;z=De(f.call(ct,K,d,g,S,E,L)),W=l}else{const K=t;z=De(K.length>1?K(g,{attrs:l,slots:a,emit:u}):K(g,null)),W=t.props?l:$g(l)}}catch(K){ls.length=0,Fi(K,e,1),z=Ie(vn)}let X=z;if(W&&B!==!1){const K=Object.keys(W),{shapeFlag:ct}=X;K.length&&ct&7&&(i&&K.some(Aa)&&(W=qg(W,i)),X=Er(X,W,!1,!0))}return n.dirs&&(X=Er(X,null,!1,!0),X.dirs=X.dirs?X.dirs.concat(n.dirs):n.dirs),n.transition&&Ua(X,n.transition),z=X,di(U),z}const $g=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ni(n))&&((t||(t={}))[n]=e[n]);return t},qg=(e,t)=>{const n={};for(const r in e)(!Aa(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Hg(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:u}=t,f=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?Ic(r,a,f):!!a;if(u&8){const d=t.dynamicProps;for(let g=0;g<d.length;g++){const E=d[g];if(a[E]!==r[E]&&!Bi(f,E))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?Ic(r,a,f):!0:!!a;return!1}function Ic(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!Bi(n,i))return!0}return!1}function zg({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Kh=e=>e.__isSuspense;function Kg(e,t){t&&t.pendingBranch?nt(e)?t.effects.push(...e):t.effects.push(e):Zp(e)}const Ve=Symbol.for("v-fgt"),ji=Symbol.for("v-txt"),vn=Symbol.for("v-cmt"),Vo=Symbol.for("v-stc"),ls=[];let pe=null;function xe(e=!1){ls.push(pe=e?null:[])}function Gg(){ls.pop(),pe=ls[ls.length-1]||null}let _s=1;function wc(e,t=!1){_s+=e,e<0&&pe&&t&&(pe.hasOnce=!0)}function Gh(e){return e.dynamicChildren=_s>0?pe||cr:null,Gg(),_s>0&&pe&&pe.push(e),e}function cn(e,t,n,r,s,i){return Gh(yt(e,t,n,r,s,i,!0))}function Wh(e,t,n,r,s){return Gh(Ie(e,t,n,r,s,!0))}function Qh(e){return e?e.__v_isVNode===!0:!1}function Yr(e,t){return e.type===t.type&&e.key===t.key}const Xh=({key:e})=>e??null,ni=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Nt(e)||te(e)||st(e)?{i:ye,r:e,k:t,f:!!n}:e:null);function yt(e,t=null,n=null,r=0,s=null,i=e===Ve?0:1,a=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Xh(t),ref:t&&ni(t),scopeId:Ah,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ye};return l?($a(u,n),i&128&&e.normalize(u)):n&&(u.shapeFlag|=Nt(n)?8:16),_s>0&&!a&&pe&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&pe.push(u),u}const Ie=Wg;function Wg(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===gg)&&(e=vn),Qh(e)){const l=Er(e,t,!0);return n&&$a(l,n),_s>0&&!i&&pe&&(l.shapeFlag&6?pe[pe.indexOf(e)]=l:pe.push(l)),l.patchFlag=-2,l}if(om(e)&&(e=e.__vccOpts),t){t=Qg(t);let{class:l,style:u}=t;l&&!Nt(l)&&(t.class=Pa(l)),St(u)&&(La(u)&&!nt(u)&&(u=ie({},u)),t.style=Ca(u))}const a=Nt(e)?1:Kh(e)?128:ng(e)?64:St(e)?4:st(e)?2:0;return yt(e,t,n,r,s,a,i,!0)}function Qg(e){return e?La(e)||Mh(e)?ie({},e):e:null}function Er(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:u}=e,f=t?Yg(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Xh(f),ref:t&&t.ref?n&&i?nt(i)?i.concat(ni(t)):[i,ni(t)]:ni(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ve?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Er(e.ssContent),ssFallback:e.ssFallback&&Er(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&r&&Ua(d,u.clone(d)),d}function un(e=" ",t=0){return Ie(ji,null,e,t)}function Xg(e="",t=!1){return t?(xe(),Wh(vn,null,e)):Ie(vn,null,e)}function De(e){return e==null||typeof e=="boolean"?Ie(vn):nt(e)?Ie(Ve,null,e.slice()):Qh(e)?ln(e):Ie(ji,null,String(e))}function ln(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Er(e)}function $a(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(nt(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),$a(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Mh(t)?t._ctx=ye:s===3&&ye&&(ye.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else st(t)?(t={default:t,_ctx:ye},n=32):(t=String(t),r&64?(n=16,t=[un(t)]):n=8);e.children=t,e.shapeFlag|=n}function Yg(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Pa([t.class,r.class]));else if(s==="style")t.style=Ca([t.style,r.style]);else if(Ni(s)){const i=t[s],a=r[s];a&&i!==a&&!(nt(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function Se(e,t,n,r=null){Ue(e,t,7,[n,r])}const Jg=xh();let Zg=0;function tm(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Jg,i={uid:Zg++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Tp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Lh(r,s),emitsOptions:zh(r,s),emit:null,emitted:null,propsDefaults:vt,inheritAttrs:r.inheritAttrs,ctx:vt,data:vt,props:vt,attrs:vt,slots:vt,refs:vt,setupState:vt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Bg.bind(null,i),e.ce&&e.ce(i),i}let se=null;const em=()=>se||ye;let mi,Zo;{const e=ki(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};mi=t("__VUE_INSTANCE_SETTERS__",n=>se=n),Zo=t("__VUE_SSR_SETTERS__",n=>ys=n)}const Cs=e=>{const t=se;return mi(e),e.scope.on(),()=>{e.scope.off(),mi(t)}},Ac=()=>{se&&se.scope.off(),mi(null)};function Yh(e){return e.vnode.shapeFlag&4}let ys=!1;function nm(e,t=!1,n=!1){t&&Zo(t);const{props:r,children:s}=e.vnode,i=Yh(e);Rg(e,r,i,t),Vg(e,s,n||t);const a=i?rm(e,t):void 0;return t&&Zo(!1),a}function rm(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,_g);const{setup:r}=n;if(r){Ge();const s=e.setupContext=r.length>1?im(e):null,i=Cs(e),a=Ss(r,e,0,[e.props,s]),l=Yu(a);if(We(),i(),(l||e.sp)&&!os(e)&&bh(e),l){if(a.then(Ac,Ac),t)return a.then(u=>{bc(e,u)}).catch(u=>{Fi(u,e,0)});e.asyncDep=a}else bc(e,a)}else Jh(e)}function bc(e,t,n){st(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:St(t)&&(e.setupState=Eh(t)),Jh(e)}function Jh(e,t,n){const r=e.type;e.render||(e.render=r.render||Ne);{const s=Cs(e);Ge();try{yg(e)}finally{We(),s()}}}const sm={get(e,t){return Jt(e,"get",""),e[t]}};function im(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,sm),slots:e.slots,emit:e.emit,expose:t}}function $i(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Eh(jp(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in as)return as[n](e)},has(t,n){return n in t||n in as}})):e.proxy}function om(e){return st(e)&&"__vccOpts"in e}const Zh=(e,t)=>Gp(e,t,ys),am="3.5.24";let ta;const Rc=typeof window<"u"&&window.trustedTypes;if(Rc)try{ta=Rc.createPolicy("vue",{createHTML:e=>e})}catch{}const tf=ta?e=>ta.createHTML(e):e=>e,lm="http://www.w3.org/2000/svg",cm="http://www.w3.org/1998/Math/MathML",He=typeof document<"u"?document:null,Sc=He&&He.createElement("template"),um={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?He.createElementNS(lm,e):t==="mathml"?He.createElementNS(cm,e):n?He.createElement(e,{is:n}):He.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>He.createTextNode(e),createComment:e=>He.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>He.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Sc.innerHTML=tf(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=Sc.content;if(r==="svg"||r==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},hm=Symbol("_vtc");function fm(e,t,n){const r=e[hm];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Cc=Symbol("_vod"),dm=Symbol("_vsh"),pm=Symbol(""),gm=/(?:^|;)\s*display\s*:/;function mm(e,t,n){const r=e.style,s=Nt(n);let i=!1;if(n&&!s){if(t)if(Nt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&ri(r,l,"")}else for(const a in t)n[a]==null&&ri(r,a,"");for(const a in n)a==="display"&&(i=!0),ri(r,a,n[a])}else if(s){if(t!==n){const a=r[pm];a&&(n+=";"+a),r.cssText=n,i=gm.test(n)}}else t&&e.removeAttribute("style");Cc in e&&(e[Cc]=i?r.display:"",e[dm]&&(r.display="none"))}const Pc=/\s*!important$/;function ri(e,t,n){if(nt(n))n.forEach(r=>ri(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=_m(e,t);Pc.test(n)?e.setProperty(Gn(r),n.replace(Pc,""),"important"):e[r]=n}}const Vc=["Webkit","Moz","ms"],Do={};function _m(e,t){const n=Do[t];if(n)return n;let r=En(t);if(r!=="filter"&&r in e)return Do[t]=r;r=th(r);for(let s=0;s<Vc.length;s++){const i=Vc[s]+r;if(i in e)return Do[t]=i}return t}const Dc="http://www.w3.org/1999/xlink";function xc(e,t,n,r,s,i=Ep(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Dc,t.slice(6,t.length)):e.setAttributeNS(Dc,t,n):n==null||i&&!nh(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Pn(n)?String(n):n)}function Nc(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?tf(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(l!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=nh(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function sr(e,t,n,r){e.addEventListener(t,n,r)}function ym(e,t,n,r){e.removeEventListener(t,n,r)}const Oc=Symbol("_vei");function Em(e,t,n,r,s=null){const i=e[Oc]||(e[Oc]={}),a=i[t];if(r&&a)a.value=r;else{const[l,u]=Tm(t);if(r){const f=i[t]=wm(r,s);sr(e,l,f,u)}else a&&(ym(e,l,a,u),i[t]=void 0)}}const Mc=/(?:Once|Passive|Capture)$/;function Tm(e){let t;if(Mc.test(e)){t={};let r;for(;r=e.match(Mc);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Gn(e.slice(2)),t]}let xo=0;const vm=Promise.resolve(),Im=()=>xo||(vm.then(()=>xo=0),xo=Date.now());function wm(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ue(Am(r,n.value),t,5,[r])};return n.value=e,n.attached=Im(),n}function Am(e,t){if(nt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const kc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,bm=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?fm(e,r,a):t==="style"?mm(e,n,r):Ni(t)?Aa(t)||Em(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Rm(e,t,r,a))?(Nc(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&xc(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Nt(r))?Nc(e,En(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),xc(e,t,r,a))};function Rm(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&kc(t)&&st(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return kc(t)&&Nt(n)?!1:t in e}const Lc=e=>{const t=e.props["onUpdate:modelValue"]||!1;return nt(t)?n=>Zs(t,n):t};function Sm(e){e.target.composing=!0}function Fc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const No=Symbol("_assign");function Uc(e,t,n){return t&&(e=e.trim()),n&&(e=Sa(e)),e}const Oo={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[No]=Lc(s);const i=r||s.props&&s.props.type==="number";sr(e,t?"change":"input",a=>{a.target.composing||e[No](Uc(e.value,n,i))}),(n||i)&&sr(e,"change",()=>{e.value=Uc(e.value,n,i)}),t||(sr(e,"compositionstart",Sm),sr(e,"compositionend",Fc),sr(e,"change",Fc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[No]=Lc(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?Sa(e.value):e.value,u=t??"";l!==u&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===u)||(e.value=u))}},Cm=["ctrl","shift","alt","meta"],Pm={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Cm.some(n=>e[`${n}Key`]&&!t.includes(n))},Vm=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=((s,...i)=>{for(let a=0;a<t.length;a++){const l=Pm[t[a]];if(l&&l(s,t))return}return e(s,...i)}))},Dm=ie({patchProp:bm},um);let Bc;function xm(){return Bc||(Bc=xg(Dm))}const Nm=((...e)=>{const t=xm().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=Mm(r);if(!s)return;const i=t._component;!st(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,Om(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t});function Om(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Mm(e){return Nt(e)?document.querySelector(e):e}const km={class:"grid grid-cols-1 md:grid-cols-3 gap-3 text-white font-bold"},Lm={class:"text-center"},Fm={type:"submit",class:"w-full md:w-auto bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition font-semibold"},Um={__name:"BookForm",props:{editingBook:Object},emits:["addBook","updateBook","clearEdit"],setup(e,{emit:t}){const n=e,r=t,s=fr(""),i=fr(""),a=fr("");ei(()=>n.editingBook,u=>{u?(s.value=u.name,i.value=u.author,a.value=u.year):(s.value="",i.value="",a.value="")});function l(){const u={name:s.value,author:i.value,year:Number(a.value)};n.editingBook?(r("updateBook",u),r("clearEdit")):r("addBook",u),s.value="",i.value="",a.value=""}return(u,f)=>(xe(),cn("form",{onSubmit:Vm(l,["prevent"]),class:"bg-transparent p-6 rounded-lg shadow-md space-y-4"},[yt("div",km,[So(yt("input",{"onUpdate:modelValue":f[0]||(f[0]=d=>s.value=d),type:"text",placeholder:"Book Name",required:"",class:"w-full border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400"},null,512),[[Oo,s.value]]),So(yt("input",{"onUpdate:modelValue":f[1]||(f[1]=d=>i.value=d),type:"text",placeholder:"Author",required:"",class:"w-full border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400"},null,512),[[Oo,i.value]]),So(yt("input",{"onUpdate:modelValue":f[2]||(f[2]=d=>a.value=d),type:"number",placeholder:"Year",required:"",class:"w-full border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-400"},null,512),[[Oo,a.value]])]),yt("div",Lm,[yt("button",Fm,dn(e.editingBook?"Update Book":"Add Book"),1)])],32))}},Bm={class:"bg-gradient-to-br from-blue-50 to-white p-6 rounded-xl shadow-lg mt-6"},jm={key:0,class:"grid sm:grid-cols-2 lg:grid-cols-6 gap-4"},$m={class:"flex flex-col h-full justify-between"},qm=["onClick"],Hm={class:"text-gray-600 text-sm"},zm={class:"text-gray-600 text-sm"},Km={class:"flex justify-end mt-4"},Gm=["onClick"],Wm={key:1,class:"text-gray-500 italic text-center py-6"},Qm={__name:"BookList",props:{books:Array},setup(e){const t=e,n=Zh(()=>[...t.books].sort((r,s)=>r.name.localeCompare(s.name)));return(r,s)=>(xe(),cn("div",Bm,[s[4]||(s[4]=yt("h2",{class:"text-3xl font-bold mb-6 text-gray-800 flex items-center gap-2"},"  Library Books ",-1)),n.value.length?(xe(),cn("ul",jm,[(xe(!0),cn(Ve,null,mg(n.value,i=>(xe(),cn("li",{key:i.id,class:"bg-transparent border border-gray-200 rounded-lg shadow-sm hover:shadow-lg p-4 transition-all duration-300"},[yt("div",$m,[yt("div",null,[yt("h3",{onClick:a=>r.$emit("selectBook",i),class:"text-xl font-semibold text-blue-700 hover:text-blue-900 cursor-pointer mb-1"},dn(i.name),9,qm),yt("p",Hm,[s[0]||(s[0]=un(" ",-1)),s[1]||(s[1]=yt("strong",null,"Author:",-1)),un(" "+dn(i.author),1)]),yt("p",zm,[s[2]||(s[2]=un(" ",-1)),s[3]||(s[3]=yt("strong",null,"Year:",-1)),un(" "+dn(i.year),1)])]),yt("div",Km,[yt("button",{onClick:a=>r.$emit("editBook",i),class:"text-sm bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md font-medium transition"},"  Edit ",8,Gm)])])]))),128))])):(xe(),cn("p",Wm," No books available. Add your first one above  "))]))}},Xm={class:"mt-4 border p-2"},Ym={__name:"BookDetails",props:{book:Object},setup(e){return(t,n)=>(xe(),cn("div",Xm,[n[3]||(n[3]=yt("h2",{class:"font-bold"},"Book Details",-1)),yt("p",null,[n[0]||(n[0]=yt("strong",null,"Name:",-1)),un(" "+dn(e.book.name),1)]),yt("p",null,[n[1]||(n[1]=yt("strong",null,"Author:",-1)),un(" "+dn(e.book.author),1)]),yt("p",null,[n[2]||(n[2]=yt("strong",null,"Year:",-1)),un(" "+dn(e.book.year),1)])]))}},Jm=()=>{};var jc={};const ef=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},Zm=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},nf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,f=u?e[s+2]:0,d=i>>2,g=(i&3)<<4|l>>4;let E=(l&15)<<2|f>>6,S=f&63;u||(S=64,a||(E=64)),r.push(n[d],n[g],n[E],n[S])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ef(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Zm(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const f=s<e.length?n[e.charAt(s)]:64;++s;const g=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||f==null||g==null)throw new t_;const E=i<<2|l>>4;if(r.push(E),f!==64){const S=l<<4&240|f>>2;if(r.push(S),g!==64){const L=f<<6&192|g;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class t_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const e_=function(e){const t=ef(e);return nf.encodeByteArray(t,!0)},_i=function(e){return e_(e).replace(/\./g,"")},n_=function(e){try{return nf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function r_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const s_=()=>r_().__FIREBASE_DEFAULTS__,i_=()=>{if(typeof process>"u"||typeof jc>"u")return;const e=jc.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},o_=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&n_(e[1]);return t&&JSON.parse(t)},qa=()=>{try{return Jm()||s_()||i_()||o_()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},a_=e=>qa()?.emulatorHosts?.[e],l_=e=>{const t=a_(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},rf=()=>qa()?.config;class c_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}function Ha(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function u_(e){return(await fetch(e,{credentials:"include"})).ok}function h_(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[_i(JSON.stringify(n)),_i(JSON.stringify(a)),""].join(".")}const cs={};function f_(){const e={prod:[],emulator:[]};for(const t of Object.keys(cs))cs[t]?e.emulator.push(t):e.prod.push(t);return e}function d_(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let $c=!1;function p_(e,t){if(typeof window>"u"||typeof document>"u"||!Ha(window.location.host)||cs[e]===t||cs[e]||$c)return;cs[e]=t;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",i=f_().prod.length>0;function a(){const E=document.getElementById(r);E&&E.remove()}function l(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function u(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function f(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{$c=!0,a()},E}function d(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function g(){const E=d_(r),S=n("text"),L=document.getElementById(S)||document.createElement("span"),B=n("learnmore"),U=document.getElementById(B)||document.createElement("a"),z=n("preprendIcon"),W=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const X=E.element;l(X),d(U,B);const K=f();u(W,z),X.append(W,L,U,K),document.body.appendChild(X)}i?(L.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function g_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function m_(){const e=qa()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function __(){return!m_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function y_(){try{return typeof indexedDB=="object"}catch{return!1}}function E_(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(n){t(n)}})}const T_="FirebaseError";class Sr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=T_,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sf.prototype.create)}}class sf{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?v_(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Sr(s,l,r)}}function v_(e,t){return e.replace(I_,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const I_=/\{\$([^}]+)}/g;function yi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(qc(i)&&qc(a)){if(!yi(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function qc(e){return e!==null&&typeof e=="object"}function In(e){return e&&e._delegate?e._delegate:e}class Es{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const $n="[DEFAULT]";class w_{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new c_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(b_(t))try{this.getOrInitializeService({instanceIdentifier:$n})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=$n){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=$n){return this.instances.has(t)}getOptions(t=$n){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(t),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&t(i,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:A_(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=$n){return this.component?this.component.multipleInstances?t:$n:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function A_(e){return e===$n?void 0:e}function b_(e){return e.instantiationMode==="EAGER"}class R_{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new w_(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var ht;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ht||(ht={}));const S_={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},C_=ht.INFO,P_={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},V_=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=P_[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class of{constructor(t){this.name=t,this._logLevel=C_,this._logHandler=V_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ht))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?S_[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...t),this._logHandler(this,ht.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...t),this._logHandler(this,ht.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...t),this._logHandler(this,ht.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...t),this._logHandler(this,ht.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...t),this._logHandler(this,ht.ERROR,...t)}}const D_=(e,t)=>t.some(n=>e instanceof n);let Hc,zc;function x_(){return Hc||(Hc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function N_(){return zc||(zc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const af=new WeakMap,ea=new WeakMap,lf=new WeakMap,Mo=new WeakMap,za=new WeakMap;function O_(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(pn(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&af.set(n,e)}).catch(()=>{}),za.set(t,e),t}function M_(e){if(ea.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});ea.set(e,t)}let na={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ea.get(e);if(t==="objectStoreNames")return e.objectStoreNames||lf.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function k_(e){na=e(na)}function L_(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(ko(this),t,...n);return lf.set(r,t.sort?t.sort():[t]),pn(r)}:N_().includes(e)?function(...t){return e.apply(ko(this),t),pn(af.get(this))}:function(...t){return pn(e.apply(ko(this),t))}}function F_(e){return typeof e=="function"?L_(e):(e instanceof IDBTransaction&&M_(e),D_(e,x_())?new Proxy(e,na):e)}function pn(e){if(e instanceof IDBRequest)return O_(e);if(Mo.has(e))return Mo.get(e);const t=F_(e);return t!==e&&(Mo.set(e,t),za.set(t,e)),t}const ko=e=>za.get(e);function U_(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=pn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(pn(a.result),u.oldVersion,u.newVersion,pn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const B_=["get","getKey","getAll","getAllKeys","count"],j_=["put","add","delete","clear"],Lo=new Map;function Kc(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Lo.get(t))return Lo.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=j_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||B_.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&u.done]))[0]};return Lo.set(t,i),i}k_(e=>({...e,get:(t,n,r)=>Kc(t,n)||e.get(t,n,r),has:(t,n)=>!!Kc(t,n)||e.has(t,n)}));class $_{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(q_(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function q_(e){return e.getComponent()?.type==="VERSION"}const ra="@firebase/app",Gc="0.14.5";const Qe=new of("@firebase/app"),H_="@firebase/app-compat",z_="@firebase/analytics-compat",K_="@firebase/analytics",G_="@firebase/app-check-compat",W_="@firebase/app-check",Q_="@firebase/auth",X_="@firebase/auth-compat",Y_="@firebase/database",J_="@firebase/data-connect",Z_="@firebase/database-compat",ty="@firebase/functions",ey="@firebase/functions-compat",ny="@firebase/installations",ry="@firebase/installations-compat",sy="@firebase/messaging",iy="@firebase/messaging-compat",oy="@firebase/performance",ay="@firebase/performance-compat",ly="@firebase/remote-config",cy="@firebase/remote-config-compat",uy="@firebase/storage",hy="@firebase/storage-compat",fy="@firebase/firestore",dy="@firebase/ai",py="@firebase/firestore-compat",gy="firebase",my="12.5.0";const sa="[DEFAULT]",_y={[ra]:"fire-core",[H_]:"fire-core-compat",[K_]:"fire-analytics",[z_]:"fire-analytics-compat",[W_]:"fire-app-check",[G_]:"fire-app-check-compat",[Q_]:"fire-auth",[X_]:"fire-auth-compat",[Y_]:"fire-rtdb",[J_]:"fire-data-connect",[Z_]:"fire-rtdb-compat",[ty]:"fire-fn",[ey]:"fire-fn-compat",[ny]:"fire-iid",[ry]:"fire-iid-compat",[sy]:"fire-fcm",[iy]:"fire-fcm-compat",[oy]:"fire-perf",[ay]:"fire-perf-compat",[ly]:"fire-rc",[cy]:"fire-rc-compat",[uy]:"fire-gcs",[hy]:"fire-gcs-compat",[fy]:"fire-fst",[py]:"fire-fst-compat",[dy]:"fire-vertex","fire-js":"fire-js",[gy]:"fire-js-all"};const Ei=new Map,yy=new Map,ia=new Map;function Wc(e,t){try{e.container.addComponent(t)}catch(n){Qe.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ti(e){const t=e.name;if(ia.has(t))return Qe.debug(`There were multiple attempts to register component ${t}.`),!1;ia.set(t,e);for(const n of Ei.values())Wc(n,e);for(const n of yy.values())Wc(n,e);return!0}function Ey(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ty(e){return e==null?!1:e.settings!==void 0}const vy={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gn=new sf("app","Firebase",vy);class Iy{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw gn.create("app-deleted",{appName:this._name})}}const wy=my;function cf(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r={name:sa,automaticDataCollectionEnabled:!0,...t},s=r.name;if(typeof s!="string"||!s)throw gn.create("bad-app-name",{appName:String(s)});if(n||(n=rf()),!n)throw gn.create("no-options");const i=Ei.get(s);if(i){if(yi(n,i.options)&&yi(r,i.config))return i;throw gn.create("duplicate-app",{appName:s})}const a=new R_(s);for(const u of ia.values())a.addComponent(u);const l=new Iy(n,r,a);return Ei.set(s,l),l}function Ay(e=sa){const t=Ei.get(e);if(!t&&e===sa&&rf())return cf();if(!t)throw gn.create("no-app",{appName:e});return t}function gr(e,t,n){let r=_y[e]??e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Qe.warn(a.join(" "));return}Ti(new Es(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const by="firebase-heartbeat-database",Ry=1,Ts="firebase-heartbeat-store";let Fo=null;function uf(){return Fo||(Fo=U_(by,Ry,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ts)}catch(n){console.warn(n)}}}}).catch(e=>{throw gn.create("idb-open",{originalErrorMessage:e.message})})),Fo}async function Sy(e){try{const n=(await uf()).transaction(Ts),r=await n.objectStore(Ts).get(hf(e));return await n.done,r}catch(t){if(t instanceof Sr)Qe.warn(t.message);else{const n=gn.create("idb-get",{originalErrorMessage:t?.message});Qe.warn(n.message)}}}async function Qc(e,t){try{const r=(await uf()).transaction(Ts,"readwrite");await r.objectStore(Ts).put(t,hf(e)),await r.done}catch(n){if(n instanceof Sr)Qe.warn(n.message);else{const r=gn.create("idb-set",{originalErrorMessage:n?.message});Qe.warn(r.message)}}}function hf(e){return`${e.name}!${e.options.appId}`}const Cy=1024,Py=30;class Vy{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Xc();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Py){const s=Ny(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Qe.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Xc(),{heartbeatsToSend:n,unsentEntries:r}=Dy(this._heartbeatsCache.heartbeats),s=_i(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Qe.warn(t),""}}}function Xc(){return new Date().toISOString().substring(0,10)}function Dy(e,t=Cy){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Yc(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Yc(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class xy{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return y_()?E_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Sy(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Qc(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Qc(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Yc(e){return _i(JSON.stringify({version:2,heartbeats:e})).length}function Ny(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function Oy(e){Ti(new Es("platform-logger",t=>new $_(t),"PRIVATE")),Ti(new Es("heartbeat",t=>new Vy(t),"PRIVATE")),gr(ra,Gc,e),gr(ra,Gc,"esm2020"),gr("fire-js","")}Oy("");var My="firebase",ky="12.5.0";gr(My,ky,"app");var Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mn,ff;(function(){var e;function t(I,m){function T(){}T.prototype=m.prototype,I.F=m.prototype,I.prototype=new T,I.prototype.constructor=I,I.D=function(A,v,b){for(var y=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)y[Lt-2]=arguments[Lt];return m.prototype[v].apply(A,y)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,m,T){T||(T=0);const A=Array(16);if(typeof m=="string")for(var v=0;v<16;++v)A[v]=m.charCodeAt(T++)|m.charCodeAt(T++)<<8|m.charCodeAt(T++)<<16|m.charCodeAt(T++)<<24;else for(v=0;v<16;++v)A[v]=m[T++]|m[T++]<<8|m[T++]<<16|m[T++]<<24;m=I.g[0],T=I.g[1],v=I.g[2];let b=I.g[3],y;y=m+(b^T&(v^b))+A[0]+3614090360&4294967295,m=T+(y<<7&4294967295|y>>>25),y=b+(v^m&(T^v))+A[1]+3905402710&4294967295,b=m+(y<<12&4294967295|y>>>20),y=v+(T^b&(m^T))+A[2]+606105819&4294967295,v=b+(y<<17&4294967295|y>>>15),y=T+(m^v&(b^m))+A[3]+3250441966&4294967295,T=v+(y<<22&4294967295|y>>>10),y=m+(b^T&(v^b))+A[4]+4118548399&4294967295,m=T+(y<<7&4294967295|y>>>25),y=b+(v^m&(T^v))+A[5]+1200080426&4294967295,b=m+(y<<12&4294967295|y>>>20),y=v+(T^b&(m^T))+A[6]+2821735955&4294967295,v=b+(y<<17&4294967295|y>>>15),y=T+(m^v&(b^m))+A[7]+4249261313&4294967295,T=v+(y<<22&4294967295|y>>>10),y=m+(b^T&(v^b))+A[8]+1770035416&4294967295,m=T+(y<<7&4294967295|y>>>25),y=b+(v^m&(T^v))+A[9]+2336552879&4294967295,b=m+(y<<12&4294967295|y>>>20),y=v+(T^b&(m^T))+A[10]+4294925233&4294967295,v=b+(y<<17&4294967295|y>>>15),y=T+(m^v&(b^m))+A[11]+2304563134&4294967295,T=v+(y<<22&4294967295|y>>>10),y=m+(b^T&(v^b))+A[12]+1804603682&4294967295,m=T+(y<<7&4294967295|y>>>25),y=b+(v^m&(T^v))+A[13]+4254626195&4294967295,b=m+(y<<12&4294967295|y>>>20),y=v+(T^b&(m^T))+A[14]+2792965006&4294967295,v=b+(y<<17&4294967295|y>>>15),y=T+(m^v&(b^m))+A[15]+1236535329&4294967295,T=v+(y<<22&4294967295|y>>>10),y=m+(v^b&(T^v))+A[1]+4129170786&4294967295,m=T+(y<<5&4294967295|y>>>27),y=b+(T^v&(m^T))+A[6]+3225465664&4294967295,b=m+(y<<9&4294967295|y>>>23),y=v+(m^T&(b^m))+A[11]+643717713&4294967295,v=b+(y<<14&4294967295|y>>>18),y=T+(b^m&(v^b))+A[0]+3921069994&4294967295,T=v+(y<<20&4294967295|y>>>12),y=m+(v^b&(T^v))+A[5]+3593408605&4294967295,m=T+(y<<5&4294967295|y>>>27),y=b+(T^v&(m^T))+A[10]+38016083&4294967295,b=m+(y<<9&4294967295|y>>>23),y=v+(m^T&(b^m))+A[15]+3634488961&4294967295,v=b+(y<<14&4294967295|y>>>18),y=T+(b^m&(v^b))+A[4]+3889429448&4294967295,T=v+(y<<20&4294967295|y>>>12),y=m+(v^b&(T^v))+A[9]+568446438&4294967295,m=T+(y<<5&4294967295|y>>>27),y=b+(T^v&(m^T))+A[14]+3275163606&4294967295,b=m+(y<<9&4294967295|y>>>23),y=v+(m^T&(b^m))+A[3]+4107603335&4294967295,v=b+(y<<14&4294967295|y>>>18),y=T+(b^m&(v^b))+A[8]+1163531501&4294967295,T=v+(y<<20&4294967295|y>>>12),y=m+(v^b&(T^v))+A[13]+2850285829&4294967295,m=T+(y<<5&4294967295|y>>>27),y=b+(T^v&(m^T))+A[2]+4243563512&4294967295,b=m+(y<<9&4294967295|y>>>23),y=v+(m^T&(b^m))+A[7]+1735328473&4294967295,v=b+(y<<14&4294967295|y>>>18),y=T+(b^m&(v^b))+A[12]+2368359562&4294967295,T=v+(y<<20&4294967295|y>>>12),y=m+(T^v^b)+A[5]+4294588738&4294967295,m=T+(y<<4&4294967295|y>>>28),y=b+(m^T^v)+A[8]+2272392833&4294967295,b=m+(y<<11&4294967295|y>>>21),y=v+(b^m^T)+A[11]+1839030562&4294967295,v=b+(y<<16&4294967295|y>>>16),y=T+(v^b^m)+A[14]+4259657740&4294967295,T=v+(y<<23&4294967295|y>>>9),y=m+(T^v^b)+A[1]+2763975236&4294967295,m=T+(y<<4&4294967295|y>>>28),y=b+(m^T^v)+A[4]+1272893353&4294967295,b=m+(y<<11&4294967295|y>>>21),y=v+(b^m^T)+A[7]+4139469664&4294967295,v=b+(y<<16&4294967295|y>>>16),y=T+(v^b^m)+A[10]+3200236656&4294967295,T=v+(y<<23&4294967295|y>>>9),y=m+(T^v^b)+A[13]+681279174&4294967295,m=T+(y<<4&4294967295|y>>>28),y=b+(m^T^v)+A[0]+3936430074&4294967295,b=m+(y<<11&4294967295|y>>>21),y=v+(b^m^T)+A[3]+3572445317&4294967295,v=b+(y<<16&4294967295|y>>>16),y=T+(v^b^m)+A[6]+76029189&4294967295,T=v+(y<<23&4294967295|y>>>9),y=m+(T^v^b)+A[9]+3654602809&4294967295,m=T+(y<<4&4294967295|y>>>28),y=b+(m^T^v)+A[12]+3873151461&4294967295,b=m+(y<<11&4294967295|y>>>21),y=v+(b^m^T)+A[15]+530742520&4294967295,v=b+(y<<16&4294967295|y>>>16),y=T+(v^b^m)+A[2]+3299628645&4294967295,T=v+(y<<23&4294967295|y>>>9),y=m+(v^(T|~b))+A[0]+4096336452&4294967295,m=T+(y<<6&4294967295|y>>>26),y=b+(T^(m|~v))+A[7]+1126891415&4294967295,b=m+(y<<10&4294967295|y>>>22),y=v+(m^(b|~T))+A[14]+2878612391&4294967295,v=b+(y<<15&4294967295|y>>>17),y=T+(b^(v|~m))+A[5]+4237533241&4294967295,T=v+(y<<21&4294967295|y>>>11),y=m+(v^(T|~b))+A[12]+1700485571&4294967295,m=T+(y<<6&4294967295|y>>>26),y=b+(T^(m|~v))+A[3]+2399980690&4294967295,b=m+(y<<10&4294967295|y>>>22),y=v+(m^(b|~T))+A[10]+4293915773&4294967295,v=b+(y<<15&4294967295|y>>>17),y=T+(b^(v|~m))+A[1]+2240044497&4294967295,T=v+(y<<21&4294967295|y>>>11),y=m+(v^(T|~b))+A[8]+1873313359&4294967295,m=T+(y<<6&4294967295|y>>>26),y=b+(T^(m|~v))+A[15]+4264355552&4294967295,b=m+(y<<10&4294967295|y>>>22),y=v+(m^(b|~T))+A[6]+2734768916&4294967295,v=b+(y<<15&4294967295|y>>>17),y=T+(b^(v|~m))+A[13]+1309151649&4294967295,T=v+(y<<21&4294967295|y>>>11),y=m+(v^(T|~b))+A[4]+4149444226&4294967295,m=T+(y<<6&4294967295|y>>>26),y=b+(T^(m|~v))+A[11]+3174756917&4294967295,b=m+(y<<10&4294967295|y>>>22),y=v+(m^(b|~T))+A[2]+718787259&4294967295,v=b+(y<<15&4294967295|y>>>17),y=T+(b^(v|~m))+A[9]+3951481745&4294967295,I.g[0]=I.g[0]+m&4294967295,I.g[1]=I.g[1]+(v+(y<<21&4294967295|y>>>11))&4294967295,I.g[2]=I.g[2]+v&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.v=function(I,m){m===void 0&&(m=I.length);const T=m-this.blockSize,A=this.C;let v=this.h,b=0;for(;b<m;){if(v==0)for(;b<=T;)s(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<m;)if(A[v++]=I.charCodeAt(b++),v==this.blockSize){s(this,A),v=0;break}}else for(;b<m;)if(A[v++]=I[b++],v==this.blockSize){s(this,A),v=0;break}}this.h=v,this.o+=m},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var m=1;m<I.length-8;++m)I[m]=0;m=this.o*8;for(var T=I.length-8;T<I.length;++T)I[T]=m&255,m/=256;for(this.v(I),I=Array(16),m=0,T=0;T<4;++T)for(let A=0;A<32;A+=8)I[m++]=this.g[T]>>>A&255;return I};function i(I,m){var T=l;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=m(I)}function a(I,m){this.h=m;const T=[];let A=!0;for(let v=I.length-1;v>=0;v--){const b=I[v]|0;A&&b==m||(T[v]=b,A=!1)}this.g=T}var l={};function u(I){return-128<=I&&I<128?i(I,function(m){return new a([m|0],m<0?-1:0)}):new a([I|0],I<0?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return g;if(I<0)return U(f(-I));const m=[];let T=1;for(let A=0;I>=T;A++)m[A]=I/T|0,T*=4294967296;return new a(m,0)}function d(I,m){if(I.length==0)throw Error("number format error: empty string");if(m=m||10,m<2||36<m)throw Error("radix out of range: "+m);if(I.charAt(0)=="-")return U(d(I.substring(1),m));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=f(Math.pow(m,8));let A=g;for(let b=0;b<I.length;b+=8){var v=Math.min(8,I.length-b);const y=parseInt(I.substring(b,b+v),m);v<8?(v=f(Math.pow(m,v)),A=A.j(v).add(f(y))):(A=A.j(T),A=A.add(f(y)))}return A}var g=u(0),E=u(1),S=u(16777216);e=a.prototype,e.m=function(){if(B(this))return-U(this).m();let I=0,m=1;for(let T=0;T<this.g.length;T++){const A=this.i(T);I+=(A>=0?A:4294967296+A)*m,m*=4294967296}return I},e.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(L(this))return"0";if(B(this))return"-"+U(this).toString(I);const m=f(Math.pow(I,6));var T=this;let A="";for(;;){const v=K(T,m).g;T=z(T,v.j(m));let b=((T.g.length>0?T.g[0]:T.h)>>>0).toString(I);if(T=v,L(T))return b+A;for(;b.length<6;)b="0"+b;A=b+A}},e.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function L(I){if(I.h!=0)return!1;for(let m=0;m<I.g.length;m++)if(I.g[m]!=0)return!1;return!0}function B(I){return I.h==-1}e.l=function(I){return I=z(this,I),B(I)?-1:L(I)?0:1};function U(I){const m=I.g.length,T=[];for(let A=0;A<m;A++)T[A]=~I.g[A];return new a(T,~I.h).add(E)}e.abs=function(){return B(this)?U(this):this},e.add=function(I){const m=Math.max(this.g.length,I.g.length),T=[];let A=0;for(let v=0;v<=m;v++){let b=A+(this.i(v)&65535)+(I.i(v)&65535),y=(b>>>16)+(this.i(v)>>>16)+(I.i(v)>>>16);A=y>>>16,b&=65535,y&=65535,T[v]=y<<16|b}return new a(T,T[T.length-1]&-2147483648?-1:0)};function z(I,m){return I.add(U(m))}e.j=function(I){if(L(this)||L(I))return g;if(B(this))return B(I)?U(this).j(U(I)):U(U(this).j(I));if(B(I))return U(this.j(U(I)));if(this.l(S)<0&&I.l(S)<0)return f(this.m()*I.m());const m=this.g.length+I.g.length,T=[];for(var A=0;A<2*m;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(let v=0;v<I.g.length;v++){const b=this.i(A)>>>16,y=this.i(A)&65535,Lt=I.i(v)>>>16,we=I.i(v)&65535;T[2*A+2*v]+=y*we,W(T,2*A+2*v),T[2*A+2*v+1]+=b*we,W(T,2*A+2*v+1),T[2*A+2*v+1]+=y*Lt,W(T,2*A+2*v+1),T[2*A+2*v+2]+=b*Lt,W(T,2*A+2*v+2)}for(I=0;I<m;I++)T[I]=T[2*I+1]<<16|T[2*I];for(I=m;I<2*m;I++)T[I]=0;return new a(T,0)};function W(I,m){for(;(I[m]&65535)!=I[m];)I[m+1]+=I[m]>>>16,I[m]&=65535,m++}function X(I,m){this.g=I,this.h=m}function K(I,m){if(L(m))throw Error("division by zero");if(L(I))return new X(g,g);if(B(I))return m=K(U(I),m),new X(U(m.g),U(m.h));if(B(m))return m=K(I,U(m)),new X(U(m.g),m.h);if(I.g.length>30){if(B(I)||B(m))throw Error("slowDivide_ only works with positive integers.");for(var T=E,A=m;A.l(I)<=0;)T=ct(T),A=ct(A);var v=Et(T,1),b=Et(A,1);for(A=Et(A,2),T=Et(T,2);!L(A);){var y=b.add(A);y.l(I)<=0&&(v=v.add(T),b=y),A=Et(A,1),T=Et(T,1)}return m=z(I,v.j(m)),new X(v,m)}for(v=g;I.l(m)>=0;){for(T=Math.max(1,Math.floor(I.m()/m.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),b=f(T),y=b.j(m);B(y)||y.l(I)>0;)T-=A,b=f(T),y=b.j(m);L(b)&&(b=E),v=v.add(b),I=z(I,y)}return new X(v,I)}e.B=function(I){return K(this,I).h},e.and=function(I){const m=Math.max(this.g.length,I.g.length),T=[];for(let A=0;A<m;A++)T[A]=this.i(A)&I.i(A);return new a(T,this.h&I.h)},e.or=function(I){const m=Math.max(this.g.length,I.g.length),T=[];for(let A=0;A<m;A++)T[A]=this.i(A)|I.i(A);return new a(T,this.h|I.h)},e.xor=function(I){const m=Math.max(this.g.length,I.g.length),T=[];for(let A=0;A<m;A++)T[A]=this.i(A)^I.i(A);return new a(T,this.h^I.h)};function ct(I){const m=I.g.length+1,T=[];for(let A=0;A<m;A++)T[A]=I.i(A)<<1|I.i(A-1)>>>31;return new a(T,I.h)}function Et(I,m){const T=m>>5;m%=32;const A=I.g.length-T,v=[];for(let b=0;b<A;b++)v[b]=m>0?I.i(b+T)>>>m|I.i(b+T+1)<<32-m:I.i(b+T);return new a(v,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ff=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,mn=a}).apply(typeof Jc<"u"?Jc:typeof self<"u"?self:typeof window<"u"?window:{});var Gs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var df,Zr,pf,si,oa,gf,mf,_f;(function(){var e,t=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gs=="object"&&Gs];for(var c=0;c<o.length;++c){var h=o[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)t:{var h=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var R=o[p];if(!(R in h))break t;h=h[R]}o=o[o.length-1],p=h[o],c=c(p),c!=p&&c!=null&&t(h,o,{configurable:!0,writable:!0,value:c})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(c){var h=[],p;for(p in c)Object.prototype.hasOwnProperty.call(c,p)&&h.push([p,c[p]]);return h}});var i=i||{},a=this||self;function l(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function u(o,c,h){return o.call.apply(o.bind,arguments)}function f(o,c,h){return f=u,f.apply(null,arguments)}function d(o,c){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function g(o,c){function h(){}h.prototype=c.prototype,o.Z=c.prototype,o.prototype=new h,o.prototype.constructor=o,o.Ob=function(p,R,C){for(var j=Array(arguments.length-2),it=2;it<arguments.length;it++)j[it-2]=arguments[it];return c.prototype[R].apply(p,j)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function S(o){const c=o.length;if(c>0){const h=Array(c);for(let p=0;p<c;p++)h[p]=o[p];return h}return[]}function L(o,c){for(let p=1;p<arguments.length;p++){const R=arguments[p];var h=typeof R;if(h=h!="object"?h:R?Array.isArray(R)?"array":h:"null",h=="array"||h=="object"&&typeof R.length=="number"){h=o.length||0;const C=R.length||0;o.length=h+C;for(let j=0;j<C;j++)o[h+j]=R[j]}else o.push(R)}}class B{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function U(o){a.setTimeout(()=>{throw o},0)}function z(){var o=I;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class W{constructor(){this.h=this.g=null}add(c,h){const p=X.get();p.set(c,h),this.h?this.h.next=p:this.g=p,this.h=p}}var X=new B(()=>new K,o=>o.reset());class K{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ct,Et=!1,I=new W,m=()=>{const o=Promise.resolve(void 0);ct=()=>{o.then(T)}};function T(){for(var o;o=z();){try{o.h.call(o.g)}catch(h){U(h)}var c=X;c.j(o),c.h<100&&(c.h++,o.next=c.g,c.g=o)}Et=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function v(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}v.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};a.addEventListener("test",h,c),a.removeEventListener("test",h,c)}catch{}return o})();function y(o){return/^[\s\xa0]*$/.test(o)}function Lt(o,c){v.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,c)}g(Lt,v),Lt.prototype.init=function(o,c){const h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget,c||(h=="mouseover"?c=o.fromElement:h=="mouseout"&&(c=o.toElement)),this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Lt.Z.h.call(this)},Lt.prototype.h=function(){Lt.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var we="closure_listenable_"+(Math.random()*1e6|0),$t=0;function wt(o,c,h,p,R){this.listener=o,this.proxy=null,this.src=c,this.type=h,this.capture=!!p,this.ha=R,this.key=++$t,this.da=this.fa=!1}function dt(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function me(o,c,h){for(const p in o)c.call(h,o[p],p,o)}function Xn(o,c){for(const h in o)c.call(void 0,o[h],h,o)}function Ae(o){const c={};for(const h in o)c[h]=o[h];return c}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xr(o,c){let h,p;for(let R=1;R<arguments.length;R++){p=arguments[R];for(h in p)o[h]=p[h];for(let C=0;C<ce.length;C++)h=ce[C],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function Yn(o){this.src=o,this.g={},this.h=0}Yn.prototype.add=function(o,c,h,p,R){const C=o.toString();o=this.g[C],o||(o=this.g[C]=[],this.h++);const j=$e(o,c,p,R);return j>-1?(c=o[j],h||(c.fa=!1)):(c=new wt(c,this.src,C,!!p,R),c.fa=h,o.push(c)),c};function Nr(o,c){const h=c.type;if(h in o.g){var p=o.g[h],R=Array.prototype.indexOf.call(p,c,void 0),C;(C=R>=0)&&Array.prototype.splice.call(p,R,1),C&&(dt(c),o.g[h].length==0&&(delete o.g[h],o.h--))}}function $e(o,c,h,p){for(let R=0;R<o.length;++R){const C=o[R];if(!C.da&&C.listener==c&&C.capture==!!h&&C.ha==p)return R}return-1}var Ze="closure_lm_"+(Math.random()*1e6|0),xn={};function Or(o,c,h,p,R){if(Array.isArray(c)){for(let C=0;C<c.length;C++)Or(o,c[C],h,p,R);return null}return h=$(h),o&&o[we]?o.J(c,h,l(p)?!!p.capture:!1,R):Nn(o,c,h,!1,p,R)}function Nn(o,c,h,p,R,C){if(!c)throw Error("Invalid event type");const j=l(R)?!!R.capture:!!R;let it=x(o);if(it||(o[Ze]=it=new Yn(o)),h=it.add(c,h,p,j,C),h.proxy)return h;if(p=vl(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)b||(R=j),R===void 0&&(R=!1),o.addEventListener(c.toString(),p,R);else if(o.attachEvent)o.attachEvent(P(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function vl(){function o(h){return c.call(o.src,o.listener,h)}const c=F;return o}function _(o,c,h,p,R){if(Array.isArray(c))for(var C=0;C<c.length;C++)_(o,c[C],h,p,R);else p=l(p)?!!p.capture:!!p,h=$(h),o&&o[we]?(o=o.i,C=String(c).toString(),C in o.g&&(c=o.g[C],h=$e(c,h,p,R),h>-1&&(dt(c[h]),Array.prototype.splice.call(c,h,1),c.length==0&&(delete o.g[C],o.h--)))):o&&(o=x(o))&&(c=o.g[c.toString()],o=-1,c&&(o=$e(c,h,p,R)),(h=o>-1?c[o]:null)&&w(h))}function w(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[we])Nr(c.i,o);else{var h=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(h,p,o.capture):c.detachEvent?c.detachEvent(P(h),p):c.addListener&&c.removeListener&&c.removeListener(p),(h=x(c))?(Nr(h,o),h.h==0&&(h.src=null,c[Ze]=null)):dt(o)}}}function P(o){return o in xn?xn[o]:xn[o]="on"+o}function F(o,c){if(o.da)o=!0;else{c=new Lt(c,this);const h=o.listener,p=o.ha||o.src;o.fa&&w(o),o=h.call(p,c)}return o}function x(o){return o=o[Ze],o instanceof Yn?o:null}var N="__closure_events_fn_"+(Math.random()*1e9>>>0);function $(o){return typeof o=="function"?o:(o[N]||(o[N]=function(c){return o.handleEvent(c)}),o[N])}function k(){A.call(this),this.i=new Yn(this),this.M=this,this.G=null}g(k,A),k.prototype[we]=!0,k.prototype.removeEventListener=function(o,c,h,p){_(this,o,c,h,p)};function M(o,c){var h,p=o.G;if(p)for(h=[];p;p=p.G)h.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new v(c,o);else if(c instanceof v)c.target=c.target||o;else{var R=c;c=new v(p,o),xr(c,R)}R=!0;let C,j;if(h)for(j=h.length-1;j>=0;j--)C=c.g=h[j],R=O(C,p,!0,c)&&R;if(C=c.g=o,R=O(C,p,!0,c)&&R,R=O(C,p,!1,c)&&R,h)for(j=0;j<h.length;j++)C=c.g=h[j],R=O(C,p,!1,c)&&R}k.prototype.N=function(){if(k.Z.N.call(this),this.i){var o=this.i;for(const c in o.g){const h=o.g[c];for(let p=0;p<h.length;p++)dt(h[p]);delete o.g[c],o.h--}}this.G=null},k.prototype.J=function(o,c,h,p){return this.i.add(String(o),c,!1,h,p)},k.prototype.K=function(o,c,h,p){return this.i.add(String(o),c,!0,h,p)};function O(o,c,h,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();let R=!0;for(let C=0;C<c.length;++C){const j=c[C];if(j&&!j.da&&j.capture==h){const it=j.listener,Ot=j.ha||j.src;j.fa&&Nr(o.i,j),R=it.call(Ot,p)!==!1&&R}}return R&&!p.defaultPrevented}function J(o,c){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=f(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:a.setTimeout(o,c||0)}function q(o){o.g=J(()=>{o.g=null,o.i&&(o.i=!1,q(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Q extends A{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:q(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Z(o){A.call(this),this.h=o,this.g={}}g(Z,A);var ot=[];function _t(o){me(o.g,function(c,h){this.g.hasOwnProperty(h)&&w(c)},o),o.g={}}Z.prototype.N=function(){Z.Z.N.call(this),_t(this)},Z.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ft=a.JSON.stringify,Wt=a.JSON.parse,Qt=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function ue(){}function he(){}var Te={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jn(){v.call(this,"d")}g(Jn,v);function qt(){v.call(this,"c")}g(qt,v);var Ft={},Mr=null;function On(){return Mr=Mr||new k}Ft.Ia="serverreachability";function Il(o){v.call(this,Ft.Ia,o)}g(Il,v);function kr(o){const c=On();M(c,new Il(c))}Ft.STAT_EVENT="statevent";function wl(o,c){v.call(this,Ft.STAT_EVENT,o),this.stat=c}g(wl,v);function ee(o){const c=On();M(c,new wl(c,o))}Ft.Ja="timingevent";function Al(o,c){v.call(this,Ft.Ja,o),this.size=c}g(Al,v);function Lr(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},c)}function Fr(){this.g=!0}Fr.prototype.ua=function(){this.g=!1};function $d(o,c,h,p,R,C){o.info(function(){if(o.g)if(C){var j="",it=C.split("&");for(let Tt=0;Tt<it.length;Tt++){var Ot=it[Tt].split("=");if(Ot.length>1){const Ut=Ot[0];Ot=Ot[1];const Re=Ut.split("_");j=Re.length>=2&&Re[1]=="type"?j+(Ut+"="+Ot+"&"):j+(Ut+"=redacted&")}}}else j=null;else j=C;return"XMLHTTP REQ ("+p+") [attempt "+R+"]: "+c+`
`+h+`
`+j})}function qd(o,c,h,p,R,C,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+R+"]: "+c+`
`+h+`
`+C+" "+j})}function Zn(o,c,h,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+zd(o,h)+(p?" "+p:"")})}function Hd(o,c){o.info(function(){return"TIMEOUT: "+c})}Fr.prototype.info=function(){};function zd(o,c){if(!o.g)return c;if(!c)return null;try{const C=JSON.parse(c);if(C){for(o=0;o<C.length;o++)if(Array.isArray(C[o])){var h=C[o];if(!(h.length<2)){var p=h[1];if(Array.isArray(p)&&!(p.length<1)){var R=p[0];if(R!="noop"&&R!="stop"&&R!="close")for(let j=1;j<p.length;j++)p[j]=""}}}}return ft(C)}catch{return c}}var Os={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Rl;function ao(){}g(ao,ue),ao.prototype.g=function(){return new XMLHttpRequest},Rl=new ao;function Ur(o){return encodeURIComponent(String(o))}function Kd(o){var c=1;o=o.split(":");const h=[];for(;c>0&&o.length;)h.push(o.shift()),c--;return o.length&&h.push(o.join(":")),h}function tn(o,c,h,p){this.j=o,this.i=c,this.l=h,this.S=p||1,this.V=new Z(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Sl}function Sl(){this.i=null,this.g="",this.h=!1}var Cl={},lo={};function co(o,c,h){o.M=1,o.A=ks(be(c)),o.u=h,o.R=!0,Pl(o,null)}function Pl(o,c){o.F=Date.now(),Ms(o),o.B=be(o.A);var h=o.B,p=o.S;Array.isArray(p)||(p=[String(p)]),$l(h.i,"t",p),o.C=0,h=o.j.L,o.h=new Sl,o.g=oc(o.j,h?c:null,!o.u),o.P>0&&(o.O=new Q(f(o.Y,o,o.g),o.P)),c=o.V,h=o.g,p=o.ba;var R="readystatechange";Array.isArray(R)||(R&&(ot[0]=R.toString()),R=ot);for(let C=0;C<R.length;C++){const j=Or(h,R[C],p||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=o.J?Ae(o.J):{},o.u?(o.v||(o.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,c)):(o.v="GET",o.g.ea(o.B,o.v,null,c)),kr(),$d(o.i,o.v,o.B,o.l,o.S,o.u)}tn.prototype.ba=function(o){o=o.target;const c=this.O;c&&rn(o)==3?c.j():this.Y(o)},tn.prototype.Y=function(o){try{if(o==this.g)t:{const it=rn(this.g),Ot=this.g.ya(),Tt=this.g.ca();if(!(it<3)&&(it!=3||this.g&&(this.h.h||this.g.la()||Ql(this.g)))){this.K||it!=4||Ot==7||(Ot==8||Tt<=0?kr(3):kr(2)),uo(this);var c=this.g.ca();this.X=c;var h=Gd(this);if(this.o=c==200,qd(this.i,this.v,this.B,this.l,this.S,it,c),this.o){if(this.U&&!this.L){e:{if(this.g){var p,R=this.g;if((p=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(p)){var C=p;break e}}C=null}if(o=C)Zn(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ho(this,o);else{this.o=!1,this.m=3,ee(12),Mn(this),Br(this);break t}}if(this.R){o=!0;let Ut;for(;!this.K&&this.C<h.length;)if(Ut=Wd(this,h),Ut==lo){it==4&&(this.m=4,ee(14),o=!1),Zn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==Cl){this.m=4,ee(15),Zn(this.i,this.l,h,"[Invalid Chunk]"),o=!1;break}else Zn(this.i,this.l,Ut,null),ho(this,Ut);if(Vl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||h.length!=0||this.h.h||(this.m=1,ee(16),o=!1),this.o=this.o&&o,!o)Zn(this.i,this.l,h,"[Invalid Chunked Response]"),Mn(this),Br(this);else if(h.length>0&&!this.W){this.W=!0;var j=this.j;j.g==this&&j.aa&&!j.P&&(j.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),To(j),j.P=!0,ee(11))}}else Zn(this.i,this.l,h,null),ho(this,h);it==4&&Mn(this),this.o&&!this.K&&(it==4?nc(this.j,this):(this.o=!1,Ms(this)))}else lp(this.g),c==400&&h.indexOf("Unknown SID")>0?(this.m=3,ee(12)):(this.m=0,ee(13)),Mn(this),Br(this)}}}catch{}finally{}};function Gd(o){if(!Vl(o))return o.g.la();const c=Ql(o.g);if(c==="")return"";let h="";const p=c.length,R=rn(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return Mn(o),Br(o),"";o.h.i=new a.TextDecoder}for(let C=0;C<p;C++)o.h.h=!0,h+=o.h.i.decode(c[C],{stream:!(R&&C==p-1)});return c.length=0,o.h.g+=h,o.C=0,o.h.g}function Vl(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function Wd(o,c){var h=o.C,p=c.indexOf(`
`,h);return p==-1?lo:(h=Number(c.substring(h,p)),isNaN(h)?Cl:(p+=1,p+h>c.length?lo:(c=c.slice(p,p+h),o.C=p+h,c)))}tn.prototype.cancel=function(){this.K=!0,Mn(this)};function Ms(o){o.T=Date.now()+o.H,Dl(o,o.H)}function Dl(o,c){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Lr(f(o.aa,o),c)}function uo(o){o.D&&(a.clearTimeout(o.D),o.D=null)}tn.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(Hd(this.i,this.B),this.M!=2&&(kr(),ee(17)),Mn(this),this.m=2,Br(this)):Dl(this,this.T-o)};function Br(o){o.j.I==0||o.K||nc(o.j,o)}function Mn(o){uo(o);var c=o.O;c&&typeof c.dispose=="function"&&c.dispose(),o.O=null,_t(o.V),o.g&&(c=o.g,o.g=null,c.abort(),c.dispose())}function ho(o,c){try{var h=o.j;if(h.I!=0&&(h.g==o||fo(h.h,o))){if(!o.L&&fo(h.h,o)&&h.I==3){try{var p=h.Ba.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var R=p;if(R[0]==0){t:if(!h.v){if(h.g)if(h.g.F+3e3<o.F)js(h),Us(h);else break t;Eo(h),ee(18)}}else h.xa=R[1],0<h.xa-h.K&&R[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=Lr(f(h.Va,h),6e3));Ol(h.h)<=1&&h.ta&&(h.ta=void 0)}else Ln(h,11)}else if((o.L||h.g==o)&&js(h),!y(c))for(R=h.Ba.g.parse(c),c=0;c<R.length;c++){let Tt=R[c];const Ut=Tt[0];if(!(Ut<=h.K))if(h.K=Ut,Tt=Tt[1],h.I==2)if(Tt[0]=="c"){h.M=Tt[1],h.ba=Tt[2];const Re=Tt[3];Re!=null&&(h.ka=Re,h.j.info("VER="+h.ka));const Fn=Tt[4];Fn!=null&&(h.za=Fn,h.j.info("SVER="+h.za));const sn=Tt[5];sn!=null&&typeof sn=="number"&&sn>0&&(p=1.5*sn,h.O=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;const on=o.g;if(on){const qs=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qs){var C=p.h;C.g||qs.indexOf("spdy")==-1&&qs.indexOf("quic")==-1&&qs.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(po(C,C.h),C.h=null))}if(p.G){const vo=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;vo&&(p.wa=vo,At(p.J,p.G,vo))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-o.F,h.j.info("Handshake RTT: "+h.T+"ms")),p=h;var j=o;if(p.na=ic(p,p.L?p.ba:null,p.W),j.L){Ml(p.h,j);var it=j,Ot=p.O;Ot&&(it.H=Ot),it.D&&(uo(it),Ms(it)),p.g=j}else tc(p);h.i.length>0&&Bs(h)}else Tt[0]!="stop"&&Tt[0]!="close"||Ln(h,7);else h.I==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?Ln(h,7):yo(h):Tt[0]!="noop"&&h.l&&h.l.qa(Tt),h.A=0)}}kr(4)}catch{}}var Qd=class{constructor(o,c){this.g=o,this.map=c}};function xl(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Nl(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Ol(o){return o.h?1:o.g?o.g.size:0}function fo(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function po(o,c){o.g?o.g.add(c):o.h=c}function Ml(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}xl.prototype.cancel=function(){if(this.i=kl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function kl(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const h of o.g.values())c=c.concat(h.G);return c}return S(o.i)}var Ll=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xd(o,c){if(o){o=o.split("&");for(let h=0;h<o.length;h++){const p=o[h].indexOf("=");let R,C=null;p>=0?(R=o[h].substring(0,p),C=o[h].substring(p+1)):R=o[h],c(R,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function en(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;o instanceof en?(this.l=o.l,jr(this,o.j),this.o=o.o,this.g=o.g,$r(this,o.u),this.h=o.h,go(this,ql(o.i)),this.m=o.m):o&&(c=String(o).match(Ll))?(this.l=!1,jr(this,c[1]||"",!0),this.o=qr(c[2]||""),this.g=qr(c[3]||"",!0),$r(this,c[4]),this.h=qr(c[5]||"",!0),go(this,c[6]||"",!0),this.m=qr(c[7]||"")):(this.l=!1,this.i=new zr(null,this.l))}en.prototype.toString=function(){const o=[];var c=this.j;c&&o.push(Hr(c,Fl,!0),":");var h=this.g;return(h||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Hr(c,Fl,!0),"@"),o.push(Ur(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&o.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Hr(h,h.charAt(0)=="/"?Zd:Jd,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Hr(h,ep)),o.join("")},en.prototype.resolve=function(o){const c=be(this);let h=!!o.j;h?jr(c,o.j):h=!!o.o,h?c.o=o.o:h=!!o.g,h?c.g=o.g:h=o.u!=null;var p=o.h;if(h)$r(c,o.u);else if(h=!!o.h){if(p.charAt(0)!="/")if(this.g&&!this.h)p="/"+p;else{var R=c.h.lastIndexOf("/");R!=-1&&(p=c.h.slice(0,R+1)+p)}if(R=p,R==".."||R==".")p="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){p=R.lastIndexOf("/",0)==0,R=R.split("/");const C=[];for(let j=0;j<R.length;){const it=R[j++];it=="."?p&&j==R.length&&C.push(""):it==".."?((C.length>1||C.length==1&&C[0]!="")&&C.pop(),p&&j==R.length&&C.push("")):(C.push(it),p=!0)}p=C.join("/")}else p=R}return h?c.h=p:h=o.i.toString()!=="",h?go(c,ql(o.i)):h=!!o.m,h&&(c.m=o.m),c};function be(o){return new en(o)}function jr(o,c,h){o.j=h?qr(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function $r(o,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);o.u=c}else o.u=null}function go(o,c,h){c instanceof zr?(o.i=c,np(o.i,o.l)):(h||(c=Hr(c,tp)),o.i=new zr(c,o.l))}function At(o,c,h){o.i.set(c,h)}function ks(o){return At(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function qr(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Hr(o,c,h){return typeof o=="string"?(o=encodeURI(o).replace(c,Yd),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Yd(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Fl=/[#\/\?@]/g,Jd=/[#\?:]/g,Zd=/[#\?]/g,tp=/[#\?@]/g,ep=/#/g;function zr(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function kn(o){o.g||(o.g=new Map,o.h=0,o.i&&Xd(o.i,function(c,h){o.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}e=zr.prototype,e.add=function(o,c){kn(this),this.i=null,o=tr(this,o);let h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(c),this.h+=1,this};function Ul(o,c){kn(o),c=tr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Bl(o,c){return kn(o),c=tr(o,c),o.g.has(c)}e.forEach=function(o,c){kn(this),this.g.forEach(function(h,p){h.forEach(function(R){o.call(c,R,p,this)},this)},this)};function jl(o,c){kn(o);let h=[];if(typeof c=="string")Bl(o,c)&&(h=h.concat(o.g.get(tr(o,c))));else for(o=Array.from(o.g.values()),c=0;c<o.length;c++)h=h.concat(o[c]);return h}e.set=function(o,c){return kn(this),this.i=null,o=tr(this,o),Bl(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=jl(this,o),o.length>0?String(o[0]):c):c};function $l(o,c,h){Ul(o,c),h.length>0&&(o.i=null,o.g.set(tr(o,c),S(h)),o.h+=h.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(let p=0;p<c.length;p++){var h=c[p];const R=Ur(h);h=jl(this,h);for(let C=0;C<h.length;C++){let j=R;h[C]!==""&&(j+="="+Ur(h[C])),o.push(j)}}return this.i=o.join("&")};function ql(o){const c=new zr;return c.i=o.i,o.g&&(c.g=new Map(o.g),c.h=o.h),c}function tr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function np(o,c){c&&!o.j&&(kn(o),o.i=null,o.g.forEach(function(h,p){const R=p.toLowerCase();p!=R&&(Ul(this,p),$l(this,R,h))},o)),o.j=c}function rp(o,c){const h=new Fr;if(a.Image){const p=new Image;p.onload=d(nn,h,"TestLoadImage: loaded",!0,c,p),p.onerror=d(nn,h,"TestLoadImage: error",!1,c,p),p.onabort=d(nn,h,"TestLoadImage: abort",!1,c,p),p.ontimeout=d(nn,h,"TestLoadImage: timeout",!1,c,p),a.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function sp(o,c){const h=new Fr,p=new AbortController,R=setTimeout(()=>{p.abort(),nn(h,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(C=>{clearTimeout(R),C.ok?nn(h,"TestPingServer: ok",!0,c):nn(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(R),nn(h,"TestPingServer: error",!1,c)})}function nn(o,c,h,p,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),p(h)}catch{}}function ip(){this.g=new Qt}function mo(o){this.i=o.Sb||null,this.h=o.ab||!1}g(mo,ue),mo.prototype.g=function(){return new Ls(this.i,this.h)};function Ls(o,c){k.call(this),this.H=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Ls,k),e=Ls.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=c,this.readyState=1,Gr(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(c.body=o),(this.H||a).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Kr(this)),this.readyState=0},e.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Gr(this)),this.g&&(this.readyState=3,Gr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Hl(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function Hl(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}e.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Kr(this):Gr(this),this.readyState==3&&Hl(this)}},e.Oa=function(o){this.g&&(this.response=this.responseText=o,Kr(this))},e.Na=function(o){this.g&&(this.response=o,Kr(this))},e.ga=function(){this.g&&Kr(this)};function Kr(o){o.readyState=4,o.l=null,o.j=null,o.B=null,Gr(o)}e.setRequestHeader=function(o,c){this.A.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=c.next();return o.join(`\r
`)};function Gr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function zl(o){let c="";return me(o,function(h,p){c+=p,c+=":",c+=h,c+=`\r
`}),c}function _o(o,c,h){t:{for(p in h){var p=!1;break t}p=!0}p||(h=zl(h),typeof o=="string"?h!=null&&Ur(h):At(o,c,h))}function Pt(o){k.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Pt,k);var op=/^https?$/i,ap=["POST","PUT"];e=Pt.prototype,e.Fa=function(o){this.H=o},e.ea=function(o,c,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Rl.g(),this.g.onreadystatechange=E(f(this.Ca,this));try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(C){Kl(this,C);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var R in p)h.set(R,p[R]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const C of p.keys())h.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),R=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(ap,c,void 0)>=0)||p||R||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[C,j]of h)this.g.setRequestHeader(C,j);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(C){Kl(this,C)}};function Kl(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.o=5,Gl(o),Fs(o)}function Gl(o){o.A||(o.A=!0,M(o,"complete"),M(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,M(this,"complete"),M(this,"abort"),Fs(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fs(this,!0)),Pt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Wl(this):this.Xa())},e.Xa=function(){Wl(this)};function Wl(o){if(o.h&&typeof i<"u"){if(o.v&&rn(o)==4)setTimeout(o.Ca.bind(o),0);else if(M(o,"readystatechange"),rn(o)==4){o.h=!1;try{const C=o.ca();t:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var h;if(!(h=c)){var p;if(p=C===0){let j=String(o.D).match(Ll)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),p=!op.test(j?j.toLowerCase():"")}h=p}if(h)M(o,"complete"),M(o,"success");else{o.o=6;try{var R=rn(o)>2?o.g.statusText:""}catch{R=""}o.l=R+" ["+o.ca()+"]",Gl(o)}}finally{Fs(o)}}}}function Fs(o,c){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const h=o.g;o.g=null,c||M(o,"ready");try{h.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function rn(o){return o.g?o.g.readyState:0}e.ca=function(){try{return rn(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Wt(c)}};function Ql(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function lp(o){const c={};o=(o.g&&rn(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(y(o[p]))continue;var h=Kd(o[p]);const R=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const C=c[R]||[];c[R]=C,C.push(h)}Xn(c,function(p){return p.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wr(o,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||c}function Xl(o){this.za=0,this.i=[],this.j=new Fr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Wr("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Wr("baseRetryDelayMs",5e3,o),this.Za=Wr("retryDelaySeedMs",1e4,o),this.Ta=Wr("forwardChannelMaxRetries",2,o),this.va=Wr("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new xl(o&&o.concurrentRequestLimit),this.Ba=new ip,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=Xl.prototype,e.ka=8,e.I=1,e.connect=function(o,c,h,p){ee(0),this.W=o,this.H=c||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.J=ic(this,null,this.W),Bs(this)};function yo(o){if(Yl(o),o.I==3){var c=o.V++,h=be(o.J);if(At(h,"SID",o.M),At(h,"RID",c),At(h,"TYPE","terminate"),Qr(o,h),c=new tn(o,o.j,c),c.M=2,c.A=ks(be(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(c.A.toString(),"")}catch{}!h&&a.Image&&(new Image().src=c.A,h=!0),h||(c.g=oc(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Ms(c)}sc(o)}function Us(o){o.g&&(To(o),o.g.cancel(),o.g=null)}function Yl(o){Us(o),o.v&&(a.clearTimeout(o.v),o.v=null),js(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function Bs(o){if(!Nl(o.h)&&!o.m){o.m=!0;var c=o.Ea;ct||m(),Et||(ct(),Et=!0),I.add(c,o),o.D=0}}function cp(o,c){return Ol(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=c.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Lr(f(o.Ea,o,c),rc(o,o.D)),o.D++,!0)}e.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const R=new tn(this,this.j,o);let C=this.o;if(this.U&&(C?(C=Ae(C),xr(C,this.U)):C=this.U),this.u!==null||this.R||(R.J=C,C=null),this.S)t:{for(var c=0,h=0;h<this.i.length;h++){e:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,c>4096){c=h;break t}if(c===4096||h===this.i.length-1){c=h+1;break t}}c=1e3}else c=1e3;c=Zl(this,R,c),h=be(this.J),At(h,"RID",o),At(h,"CVER",22),this.G&&At(h,"X-HTTP-Session-Id",this.G),Qr(this,h),C&&(this.R?c="headers="+Ur(zl(C))+"&"+c:this.u&&_o(h,this.u,C)),po(this.h,R),this.Ra&&At(h,"TYPE","init"),this.S?(At(h,"$req",c),At(h,"SID","null"),R.U=!0,co(R,h,null)):co(R,h,c),this.I=2}}else this.I==3&&(o?Jl(this,o):this.i.length==0||Nl(this.h)||Jl(this))};function Jl(o,c){var h;c?h=c.l:h=o.V++;const p=be(o.J);At(p,"SID",o.M),At(p,"RID",h),At(p,"AID",o.K),Qr(o,p),o.u&&o.o&&_o(p,o.u,o.o),h=new tn(o,o.j,h,o.D+1),o.u===null&&(h.J=o.o),c&&(o.i=c.G.concat(o.i)),c=Zl(o,h,1e3),h.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),po(o.h,h),co(h,p,c)}function Qr(o,c){o.H&&me(o.H,function(h,p){At(c,p,h)}),o.l&&me({},function(h,p){At(c,p,h)})}function Zl(o,c,h){h=Math.min(o.i.length,h);const p=o.l?f(o.l.Ka,o.l,o):null;t:{var R=o.i;let it=-1;for(;;){const Ot=["count="+h];it==-1?h>0?(it=R[0].g,Ot.push("ofs="+it)):it=0:Ot.push("ofs="+it);let Tt=!0;for(let Ut=0;Ut<h;Ut++){var C=R[Ut].g;const Re=R[Ut].map;if(C-=it,C<0)it=Math.max(0,R[Ut].g-100),Tt=!1;else try{C="req"+C+"_"||"";try{var j=Re instanceof Map?Re:Object.entries(Re);for(const[Fn,sn]of j){let on=sn;l(sn)&&(on=ft(sn)),Ot.push(C+Fn+"="+encodeURIComponent(on))}}catch(Fn){throw Ot.push(C+"type="+encodeURIComponent("_badmap")),Fn}}catch{p&&p(Re)}}if(Tt){j=Ot.join("&");break t}}j=void 0}return o=o.i.splice(0,h),c.G=o,j}function tc(o){if(!o.g&&!o.v){o.Y=1;var c=o.Da;ct||m(),Et||(ct(),Et=!0),I.add(c,o),o.A=0}}function Eo(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Lr(f(o.Da,o),rc(o,o.A)),o.A++,!0)}e.Da=function(){if(this.v=null,ec(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Lr(f(this.Wa,this),o)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ee(10),Us(this),ec(this))};function To(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function ec(o){o.g=new tn(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var c=be(o.na);At(c,"RID","rpc"),At(c,"SID",o.M),At(c,"AID",o.K),At(c,"CI",o.F?"0":"1"),!o.F&&o.ia&&At(c,"TO",o.ia),At(c,"TYPE","xmlhttp"),Qr(o,c),o.u&&o.o&&_o(c,o.u,o.o),o.O&&(o.g.H=o.O);var h=o.g;o=o.ba,h.M=1,h.A=ks(be(c)),h.u=null,h.R=!0,Pl(h,o)}e.Va=function(){this.C!=null&&(this.C=null,Us(this),Eo(this),ee(19))};function js(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function nc(o,c){var h=null;if(o.g==c){js(o),To(o),o.g=null;var p=2}else if(fo(o.h,c))h=c.G,Ml(o.h,c),p=1;else return;if(o.I!=0){if(c.o)if(p==1){h=c.u?c.u.length:0,c=Date.now()-c.F;var R=o.D;p=On(),M(p,new Al(p,h)),Bs(o)}else tc(o);else if(R=c.m,R==3||R==0&&c.X>0||!(p==1&&cp(o,c)||p==2&&Eo(o)))switch(h&&h.length>0&&(c=o.h,c.i=c.i.concat(h)),R){case 1:Ln(o,5);break;case 4:Ln(o,10);break;case 3:Ln(o,6);break;default:Ln(o,2)}}}function rc(o,c){let h=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(h*=2),h*c}function Ln(o,c){if(o.j.info("Error code "+c),c==2){var h=f(o.bb,o),p=o.Ua;const R=!p;p=new en(p||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||jr(p,"https"),ks(p),R?rp(p.toString(),h):sp(p.toString(),h)}else ee(2);o.I=0,o.l&&o.l.pa(c),sc(o),Yl(o)}e.bb=function(o){o?(this.j.info("Successfully pinged google.com"),ee(2)):(this.j.info("Failed to ping google.com"),ee(1))};function sc(o){if(o.I=0,o.ja=[],o.l){const c=kl(o.h);(c.length!=0||o.i.length!=0)&&(L(o.ja,c),L(o.ja,o.i),o.h.i.length=0,S(o.i),o.i.length=0),o.l.oa()}}function ic(o,c,h){var p=h instanceof en?be(h):new en(h);if(p.g!="")c&&(p.g=c+"."+p.g),$r(p,p.u);else{var R=a.location;p=R.protocol,c=c?c+"."+R.hostname:R.hostname,R=+R.port;const C=new en(null);p&&jr(C,p),c&&(C.g=c),R&&$r(C,R),h&&(C.h=h),p=C}return h=o.G,c=o.wa,h&&c&&At(p,h,c),At(p,"VER",o.ka),Qr(o,p),p}function oc(o,c,h){if(c&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Aa&&!o.ma?new Pt(new mo({ab:h})):new Pt(o.ma),c.Fa(o.L),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function ac(){}e=ac.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function $s(){}$s.prototype.g=function(o,c){return new fe(o,c)};function fe(o,c){k.call(this),this.g=new Xl(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(o?o["X-WebChannel-Client-Profile"]=c.sa:o={"X-WebChannel-Client-Profile":c.sa}),this.g.U=o,(o=c&&c.Qb)&&!y(o)&&(this.g.u=o),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!y(c)&&(this.g.G=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new er(this)}g(fe,k),fe.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fe.prototype.close=function(){yo(this.g)},fe.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.v&&(h={},h.__data__=ft(o),o=h);c.i.push(new Qd(c.Ya++,o)),c.I==3&&Bs(c)},fe.prototype.N=function(){this.g.l=null,delete this.j,yo(this.g),delete this.g,fe.Z.N.call(this)};function lc(o){Jn.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const h in c){o=h;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}g(lc,Jn);function cc(){qt.call(this),this.status=1}g(cc,qt);function er(o){this.g=o}g(er,ac),er.prototype.ra=function(){M(this.g,"a")},er.prototype.qa=function(o){M(this.g,new lc(o))},er.prototype.pa=function(o){M(this.g,new cc)},er.prototype.oa=function(){M(this.g,"b")},$s.prototype.createWebChannel=$s.prototype.g,fe.prototype.send=fe.prototype.o,fe.prototype.open=fe.prototype.m,fe.prototype.close=fe.prototype.close,_f=function(){return new $s},mf=function(){return On()},gf=Ft,oa={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Os.NO_ERROR=0,Os.TIMEOUT=8,Os.HTTP_ERROR=6,si=Os,bl.COMPLETE="complete",pf=bl,he.EventType=Te,Te.OPEN="a",Te.CLOSE="b",Te.ERROR="c",Te.MESSAGE="d",k.prototype.listen=k.prototype.J,Zr=he,Pt.prototype.listenOnce=Pt.prototype.K,Pt.prototype.getLastError=Pt.prototype.Ha,Pt.prototype.getLastErrorCode=Pt.prototype.ya,Pt.prototype.getStatus=Pt.prototype.ca,Pt.prototype.getResponseJson=Pt.prototype.La,Pt.prototype.getResponseText=Pt.prototype.la,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Fa,df=Pt}).apply(typeof Gs<"u"?Gs:typeof self<"u"?self:typeof window<"u"?window:{});const Zc="@firebase/firestore",tu="4.9.2";class Yt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");let Cr="12.3.0";const zn=new of("@firebase/firestore");function ir(){return zn.logLevel}function H(e,...t){if(zn.logLevel<=ht.DEBUG){const n=t.map(Ka);zn.debug(`Firestore (${Cr}): ${e}`,...n)}}function Xe(e,...t){if(zn.logLevel<=ht.ERROR){const n=t.map(Ka);zn.error(`Firestore (${Cr}): ${e}`,...n)}}function Tr(e,...t){if(zn.logLevel<=ht.WARN){const n=t.map(Ka);zn.warn(`Firestore (${Cr}): ${e}`,...n)}}function Ka(e){if(typeof e=="string")return e;try{return(function(n){return JSON.stringify(n)})(e)}catch{return e}}function tt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,yf(e,r,n)}function yf(e,t,n){let r=`FIRESTORE (${Cr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Xe(r),new Error(r)}function mt(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||yf(t,s,r)}function rt(e,t){return e}const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Sr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _n{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class Ef{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ly{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Yt.UNAUTHENTICATED)))}shutdown(){}}class Fy{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Uy{constructor(t){this.t=t,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){mt(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new _n;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _n,t.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const u=i;t.enqueueRetryable((async()=>{await u.promise,await s(this.currentUser)}))},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>l(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _n)}}),0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string",31837,{l:r}),new Ef(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return mt(t===null||typeof t=="string",2055,{h:t}),new Yt(t)}}class By{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jy{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new By(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Yt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class eu{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $y{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ty(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){mt(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable((()=>r(i)))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new eu(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(mt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new eu(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function qy(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ga{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=qy(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function at(e,t){return e<t?-1:e>t?1:0}function aa(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const s=e.charAt(r),i=t.charAt(r);if(s!==i)return Uo(s)===Uo(i)?at(s,i):Uo(s)?1:-1}return at(e.length,t.length)}const Hy=55296,zy=57343;function Uo(e){const t=e.charCodeAt(0);return t>=Hy&&t<=zy}function vr(e,t,n){return e.length===t.length&&e.every(((r,s)=>n(r,t[s])))}const nu="__name__";class Pe{constructor(t,n,r){n===void 0?n=0:n>t.length&&tt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&tt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Pe.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Pe?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=Pe.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return at(t.length,n.length)}static compareSegments(t,n){const r=Pe.isNumericId(t),s=Pe.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Pe.extractNumericId(t).compare(Pe.extractNumericId(n)):aa(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return mn.fromString(t.substring(4,t.length-2))}}class bt extends Pe{construct(t,n,r){return new bt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new G(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new bt(n)}static emptyPath(){return new bt([])}}const Ky=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends Pe{construct(t,n,r){return new Kt(t,n,r)}static isValidIdentifier(t){return Ky.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nu}static keyField(){return new Kt([nu])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(D.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new G(D.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new G(D.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Kt(n)}static emptyPath(){return new Kt([])}}class Y{constructor(t){this.path=t}static fromPath(t){return new Y(bt.fromString(t))}static fromName(t){return new Y(bt.fromString(t).popFirst(5))}static empty(){return new Y(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&bt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return bt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Y(new bt(t.slice()))}}function Tf(e,t,n){if(!n)throw new G(D.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Gy(e,t,n,r){if(t===!0&&r===!0)throw new G(D.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ru(e){if(!Y.isDocumentKey(e))throw new G(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function su(e){if(Y.isDocumentKey(e))throw new G(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function vf(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Wa(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":tt(12329,{type:typeof e})}function Ir(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new G(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wa(e);throw new G(D.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function xt(e,t){const n={typeString:e};return t&&(n.value=t),n}function Ps(e,t){if(!vf(e))throw new G(D.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new G(D.INVALID_ARGUMENT,n);return!0}const iu=-62135596800,ou=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(t){return Rt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*ou);return new Rt(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new G(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<iu)throw new G(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new G(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ou}_compareTo(t){return this.seconds===t.seconds?at(this.nanoseconds,t.nanoseconds):at(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ps(t,Rt._jsonSchema))return new Rt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-iu;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:xt("string",Rt._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};class et{static fromTimestamp(t){return new et(t)}static min(){return new et(new Rt(0,0))}static max(){return new et(new Rt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const vs=-1;function Wy(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=et.fromTimestamp(r===1e9?new Rt(n+1,0):new Rt(n,r));return new wn(s,Y.empty(),t)}function Qy(e){return new wn(e.readTime,e.key,vs)}class wn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new wn(et.min(),Y.empty(),vs)}static max(){return new wn(et.max(),Y.empty(),vs)}}function Xy(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Y.comparator(e.documentKey,t.documentKey),n!==0?n:at(e.largestBatchId,t.largestBatchId))}const Yy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Pr(e){if(e.code!==D.FAILED_PRECONDITION||e.message!==Yy)throw e;H("LocalStore","Unexpectedly lost primary lease")}class V{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new V(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):V.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):V.reject(n)}static resolve(t){return new V(((n,r)=>{n(t)}))}static reject(t){return new V(((n,r)=>{r(t)}))}static waitFor(t){return new V(((n,r)=>{let s=0,i=0,a=!1;t.forEach((l=>{++s,l.next((()=>{++i,a&&i===s&&n()}),(u=>r(u)))})),a=!0,i===s&&n()}))}static or(t){let n=V.resolve(!1);for(const r of t)n=n.next((s=>s?V.resolve(s):r()));return n}static forEach(t,n){const r=[];return t.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(t,n){return new V(((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const f=u;n(t[f]).next((d=>{a[f]=d,++l,l===i&&r(a)}),(d=>s(d)))}}))}static doWhile(t,n){return new V(((r,s)=>{const i=()=>{t()===!0?n().next((()=>{i()}),s):r()};i()}))}}function Zy(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vr(e){return e.name==="IndexedDbTransactionError"}class qi{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}qi.ce=-1;const Qa=-1;function Hi(e){return e==null}function vi(e){return e===0&&1/e==-1/0}function tE(e){return typeof e=="number"&&Number.isInteger(e)&&!vi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const If="";function eE(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=au(t)),t=nE(e.get(n),t);return au(t)}function nE(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case If:n+="";break;default:n+=i}}return n}function au(e){return e+If+""}function lu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Vn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ct{constructor(t,n){this.comparator=t,this.root=n||Ht.EMPTY}insert(t,n){return new Ct(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(t){return new Ct(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ws(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ws(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ws(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ws(this.root,t,this.comparator,!0)}}class Ws{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ht{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Ht.RED,this.left=s??Ht.EMPTY,this.right=i??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Ht(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Ht.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw tt(27949);return t+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new Ht(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class kt{constructor(t){this.comparator=t,this.data=new Ct(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new cu(this.data.getIterator())}getIteratorFrom(t){return new cu(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof kt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new kt(this.comparator);return n.data=t,n}}class cu{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ge{constructor(t){this.fields=t,t.sort(Kt.comparator)}static empty(){return new ge([])}unionWith(t){let n=new kt(Kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new ge(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return vr(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}class Af extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Af("Invalid base64 string: "+i):i}})(t);return new Gt(n)}static fromUint8Array(t){const n=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(t);return new Gt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return at(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const rE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function An(e){if(mt(!!e,39018),typeof e=="string"){let t=0;const n=rE.exec(e);if(mt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Vt(e.seconds),nanos:Vt(e.nanos)}}function Vt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function bn(e){return typeof e=="string"?Gt.fromBase64String(e):Gt.fromUint8Array(e)}const bf="server_timestamp",Rf="__type__",Sf="__previous_value__",Cf="__local_write_time__";function Xa(e){return(e?.mapValue?.fields||{})[Rf]?.stringValue===bf}function zi(e){const t=e.mapValue.fields[Sf];return Xa(t)?zi(t):t}function Is(e){const t=An(e.mapValue.fields[Cf].timestampValue);return new Rt(t.seconds,t.nanos)}class sE{constructor(t,n,r,s,i,a,l,u,f,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=d}}const Ii="(default)";class ws{constructor(t,n){this.projectId=t,this.database=n||Ii}static empty(){return new ws("","")}get isDefaultDatabase(){return this.database===Ii}isEqual(t){return t instanceof ws&&t.projectId===this.projectId&&t.database===this.database}}const Pf="__type__",iE="__max__",Qs={mapValue:{}},Vf="__vector__",wi="value";function Rn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xa(e)?4:aE(e)?9007199254740991:oE(e)?10:11:tt(28295,{value:e})}function Be(e,t){if(e===t)return!0;const n=Rn(e);if(n!==Rn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Is(e).isEqual(Is(t));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=An(s.timestampValue),l=An(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(s,i){return bn(s.bytesValue).isEqual(bn(i.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(s,i){return Vt(s.geoPointValue.latitude)===Vt(i.geoPointValue.latitude)&&Vt(s.geoPointValue.longitude)===Vt(i.geoPointValue.longitude)})(e,t);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Vt(s.integerValue)===Vt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Vt(s.doubleValue),l=Vt(i.doubleValue);return a===l?vi(a)===vi(l):isNaN(a)&&isNaN(l)}return!1})(e,t);case 9:return vr(e.arrayValue.values||[],t.arrayValue.values||[],Be);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(lu(a)!==lu(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Be(a[u],l[u])))return!1;return!0})(e,t);default:return tt(52216,{left:e})}}function As(e,t){return(e.values||[]).find((n=>Be(n,t)))!==void 0}function wr(e,t){if(e===t)return 0;const n=Rn(e),r=Rn(t);if(n!==r)return at(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return at(e.booleanValue,t.booleanValue);case 2:return(function(i,a){const l=Vt(i.integerValue||i.doubleValue),u=Vt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1})(e,t);case 3:return uu(e.timestampValue,t.timestampValue);case 4:return uu(Is(e),Is(t));case 5:return aa(e.stringValue,t.stringValue);case 6:return(function(i,a){const l=bn(i),u=bn(a);return l.compareTo(u)})(e.bytesValue,t.bytesValue);case 7:return(function(i,a){const l=i.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){const d=at(l[f],u[f]);if(d!==0)return d}return at(l.length,u.length)})(e.referenceValue,t.referenceValue);case 8:return(function(i,a){const l=at(Vt(i.latitude),Vt(a.latitude));return l!==0?l:at(Vt(i.longitude),Vt(a.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return hu(e.arrayValue,t.arrayValue);case 10:return(function(i,a){const l=i.fields||{},u=a.fields||{},f=l[wi]?.arrayValue,d=u[wi]?.arrayValue,g=at(f?.values?.length||0,d?.values?.length||0);return g!==0?g:hu(f,d)})(e.mapValue,t.mapValue);case 11:return(function(i,a){if(i===Qs.mapValue&&a===Qs.mapValue)return 0;if(i===Qs.mapValue)return 1;if(a===Qs.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),f=a.fields||{},d=Object.keys(f);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const E=aa(u[g],d[g]);if(E!==0)return E;const S=wr(l[u[g]],f[d[g]]);if(S!==0)return S}return at(u.length,d.length)})(e.mapValue,t.mapValue);default:throw tt(23264,{he:n})}}function uu(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return at(e,t);const n=An(e),r=An(t),s=at(n.seconds,r.seconds);return s!==0?s:at(n.nanos,r.nanos)}function hu(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=wr(n[s],r[s]);if(i)return i}return at(n.length,r.length)}function Ar(e){return la(e)}function la(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const r=An(n);return`time(${r.seconds},${r.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return bn(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return Y.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=la(i);return r+"]"})(e.arrayValue):"mapValue"in e?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${la(n.fields[a])}`;return s+"}"})(e.mapValue):tt(61005,{value:e})}function ii(e){switch(Rn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=zi(e);return t?16+ii(t):16;case 5:return 2*e.stringValue.length;case 6:return bn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+ii(i)),0)})(e.arrayValue);case 10:case 11:return(function(r){let s=0;return Vn(r.fields,((i,a)=>{s+=i.length+ii(a)})),s})(e.mapValue);default:throw tt(13486,{value:e})}}function ca(e){return!!e&&"integerValue"in e}function Ya(e){return!!e&&"arrayValue"in e}function fu(e){return!!e&&"nullValue"in e}function du(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function oi(e){return!!e&&"mapValue"in e}function oE(e){return(e?.mapValue?.fields||{})[Pf]?.stringValue===Vf}function us(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Vn(e.mapValue.fields,((n,r)=>t.mapValue.fields[n]=us(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=us(e.arrayValue.values[n]);return t}return{...e}}function aE(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===iE}class le{constructor(t){this.value=t}static empty(){return new le({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!oi(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=us(n)}setAll(t){let n=Kt.emptyPath(),r={},s=[];t.forEach(((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=us(a):s.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());oi(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Be(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];oi(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Vn(n,((s,i)=>t[s]=i));for(const s of r)delete t[s]}clone(){return new le(us(this.value))}}function Df(e){const t=[];return Vn(e.fields,((n,r)=>{const s=new Kt([n]);if(oi(r)){const i=Df(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)})),new ge(t)}class Zt{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new Zt(t,0,et.min(),et.min(),et.min(),le.empty(),0)}static newFoundDocument(t,n,r,s){return new Zt(t,1,n,et.min(),r,s,0)}static newNoDocument(t,n){return new Zt(t,2,n,et.min(),et.min(),le.empty(),0)}static newUnknownDocument(t,n){return new Zt(t,3,n,et.min(),et.min(),le.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=le.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=le.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Zt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ai{constructor(t,n){this.position=t,this.inclusive=n}}function pu(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(a.referenceValue),n.key):r=wr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function gu(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Be(e.position[n],t.position[n]))return!1;return!0}class bi{constructor(t,n="asc"){this.field=t,this.dir=n}}function lE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class xf{}class Mt extends xf{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new uE(t,n,r):n==="array-contains"?new dE(t,r):n==="in"?new pE(t,r):n==="not-in"?new gE(t,r):n==="array-contains-any"?new mE(t,r):new Mt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new hE(t,r):new fE(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(wr(n,this.value)):n!==null&&Rn(this.value)===Rn(n)&&this.matchesComparison(wr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class je extends xf{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new je(t,n)}matches(t){return Nf(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Nf(e){return e.op==="and"}function Of(e){return cE(e)&&Nf(e)}function cE(e){for(const t of e.filters)if(t instanceof je)return!1;return!0}function ua(e){if(e instanceof Mt)return e.field.canonicalString()+e.op.toString()+Ar(e.value);if(Of(e))return e.filters.map((t=>ua(t))).join(",");{const t=e.filters.map((n=>ua(n))).join(",");return`${e.op}(${t})`}}function Mf(e,t){return e instanceof Mt?(function(r,s){return s instanceof Mt&&r.op===s.op&&r.field.isEqual(s.field)&&Be(r.value,s.value)})(e,t):e instanceof je?(function(r,s){return s instanceof je&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,l)=>i&&Mf(a,s.filters[l])),!0):!1})(e,t):void tt(19439)}function kf(e){return e instanceof Mt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ar(n.value)}`})(e):e instanceof je?(function(n){return n.op.toString()+" {"+n.getFilters().map(kf).join(" ,")+"}"})(e):"Filter"}class uE extends Mt{constructor(t,n,r){super(t,n,r),this.key=Y.fromName(r.referenceValue)}matches(t){const n=Y.comparator(t.key,this.key);return this.matchesComparison(n)}}class hE extends Mt{constructor(t,n){super(t,"in",n),this.keys=Lf("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class fE extends Mt{constructor(t,n){super(t,"not-in",n),this.keys=Lf("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function Lf(e,t){return(t.arrayValue?.values||[]).map((n=>Y.fromName(n.referenceValue)))}class dE extends Mt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Ya(n)&&As(n.arrayValue,this.value)}}class pE extends Mt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&As(this.value.arrayValue,n)}}class gE extends Mt{constructor(t,n){super(t,"not-in",n)}matches(t){if(As(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!As(this.value.arrayValue,n)}}class mE extends Mt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Ya(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>As(this.value.arrayValue,r)))}}class _E{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function mu(e,t=null,n=[],r=[],s=null,i=null,a=null){return new _E(e,t,n,r,s,i,a)}function Ja(e){const t=rt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>ua(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Hi(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>Ar(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>Ar(r))).join(",")),t.Te=n}return t.Te}function Za(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!lE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Mf(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!gu(e.startAt,t.startAt)&&gu(e.endAt,t.endAt)}function ha(e){return Y.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}class Ki{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function yE(e,t,n,r,s,i,a,l){return new Ki(e,t,n,r,s,i,a,l)}function Ff(e){return new Ki(e)}function _u(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function EE(e){return e.collectionGroup!==null}function hs(e){const t=rt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new kt(Kt.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(t).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new bi(i,r))})),n.has(Kt.keyField().canonicalString())||t.Ie.push(new bi(Kt.keyField(),r))}return t.Ie}function Oe(e){const t=rt(e);return t.Ee||(t.Ee=TE(t,hs(e))),t.Ee}function TE(e,t){if(e.limitType==="F")return mu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new bi(s.field,i)}));const n=e.endAt?new Ai(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ai(e.startAt.position,e.startAt.inclusive):null;return mu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function fa(e,t,n){return new Ki(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Gi(e,t){return Za(Oe(e),Oe(t))&&e.limitType===t.limitType}function Uf(e){return`${Ja(Oe(e))}|lt:${e.limitType}`}function or(e){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>kf(s))).join(", ")}]`),Hi(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Ar(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Ar(s))).join(",")),`Target(${r})`})(Oe(e))}; limitType=${e.limitType})`}function Wi(e,t){return t.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(e,t)&&(function(r,s){for(const i of hs(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(e,t)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(e,t)&&(function(r,s){return!(r.startAt&&!(function(a,l,u){const f=pu(a,l,u);return a.inclusive?f<=0:f<0})(r.startAt,hs(r),s)||r.endAt&&!(function(a,l,u){const f=pu(a,l,u);return a.inclusive?f>=0:f>0})(r.endAt,hs(r),s))})(e,t)}function vE(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Bf(e){return(t,n)=>{let r=!1;for(const s of hs(e)){const i=IE(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function IE(e,t,n){const r=e.field.isKeyField()?Y.comparator(t.key,n.key):(function(i,a,l){const u=a.data.field(i),f=l.data.field(i);return u!==null&&f!==null?wr(u,f):tt(42886)})(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:e.dir})}}class Wn{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Vn(this.inner,((n,r)=>{for(const[s,i]of r)t(s,i)}))}isEmpty(){return wf(this.inner)}size(){return this.innerSize}}const wE=new Ct(Y.comparator);function Ye(){return wE}const jf=new Ct(Y.comparator);function ts(...e){let t=jf;for(const n of e)t=t.insert(n.key,n);return t}function $f(e){let t=jf;return e.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function qn(){return fs()}function qf(){return fs()}function fs(){return new Wn((e=>e.toString()),((e,t)=>e.isEqual(t)))}const AE=new Ct(Y.comparator),bE=new kt(Y.comparator);function lt(...e){let t=bE;for(const n of e)t=t.add(n);return t}const RE=new kt(at);function SE(){return RE}function tl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vi(t)?"-0":t}}function Hf(e){return{integerValue:""+e}}function CE(e,t){return tE(t)?Hf(t):tl(e,t)}class Qi{constructor(){this._=void 0}}function PE(e,t,n){return e instanceof Ri?(function(s,i){const a={fields:{[Rf]:{stringValue:bf},[Cf]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Xa(i)&&(i=zi(i)),i&&(a.fields[Sf]=i),{mapValue:a}})(n,t):e instanceof bs?Kf(e,t):e instanceof Rs?Gf(e,t):(function(s,i){const a=zf(s,i),l=yu(a)+yu(s.Ae);return ca(a)&&ca(s.Ae)?Hf(l):tl(s.serializer,l)})(e,t)}function VE(e,t,n){return e instanceof bs?Kf(e,t):e instanceof Rs?Gf(e,t):n}function zf(e,t){return e instanceof Si?(function(r){return ca(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(t)?t:{integerValue:0}:null}class Ri extends Qi{}class bs extends Qi{constructor(t){super(),this.elements=t}}function Kf(e,t){const n=Wf(t);for(const r of e.elements)n.some((s=>Be(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Rs extends Qi{constructor(t){super(),this.elements=t}}function Gf(e,t){let n=Wf(t);for(const r of e.elements)n=n.filter((s=>!Be(s,r)));return{arrayValue:{values:n}}}class Si extends Qi{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function yu(e){return Vt(e.integerValue||e.doubleValue)}function Wf(e){return Ya(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function DE(e,t){return e.field.isEqual(t.field)&&(function(r,s){return r instanceof bs&&s instanceof bs||r instanceof Rs&&s instanceof Rs?vr(r.elements,s.elements,Be):r instanceof Si&&s instanceof Si?Be(r.Ae,s.Ae):r instanceof Ri&&s instanceof Ri})(e.transform,t.transform)}class xE{constructor(t,n){this.version=t,this.transformResults=n}}class Me{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Me}static exists(t){return new Me(void 0,t)}static updateTime(t){return new Me(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ai(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Xi{}function Qf(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Yf(e.key,Me.none()):new Vs(e.key,e.data,Me.none());{const n=e.data,r=le.empty();let s=new kt(Kt.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Dn(e.key,r,new ge(s.toArray()),Me.none())}}function NE(e,t,n){e instanceof Vs?(function(s,i,a){const l=s.value.clone(),u=Tu(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(e,t,n):e instanceof Dn?(function(s,i,a){if(!ai(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Tu(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Xf(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(e,t,n):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,t,n)}function ds(e,t,n,r){return e instanceof Vs?(function(i,a,l,u){if(!ai(i.precondition,a))return l;const f=i.value.clone(),d=vu(i.fieldTransforms,u,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(e,t,n,r):e instanceof Dn?(function(i,a,l,u){if(!ai(i.precondition,a))return l;const f=vu(i.fieldTransforms,u,a),d=a.data;return d.setAll(Xf(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((g=>g.field)))})(e,t,n,r):(function(i,a,l){return ai(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(e,t,n)}function OE(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=zf(r.transform,s||null);i!=null&&(n===null&&(n=le.empty()),n.set(r.field,i))}return n||null}function Eu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&vr(r,s,((i,a)=>DE(i,a)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Vs extends Xi{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Dn extends Xi{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Xf(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Tu(e,t,n){const r=new Map;mt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,VE(a,l,n[s]))}return r}function vu(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,PE(i,a,t))}return r}class Yf extends Xi{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ME extends Xi{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class kE{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&NE(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=ds(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=ds(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=qf();return this.mutations.forEach((s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=Qf(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(et.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),lt())}isEqual(t){return this.batchId===t.batchId&&vr(this.mutations,t.mutations,((n,r)=>Eu(n,r)))&&vr(this.baseMutations,t.baseMutations,((n,r)=>Eu(n,r)))}}class el{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){mt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let s=(function(){return AE})();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new el(t,n,r,s)}}class LE{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class FE{constructor(t,n){this.count=t,this.unchangedNames=n}}var Dt,ut;function UE(e){switch(e){case D.OK:return tt(64938);case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return tt(15467,{code:e})}}function Jf(e){if(e===void 0)return Xe("GRPC error has no .code"),D.UNKNOWN;switch(e){case Dt.OK:return D.OK;case Dt.CANCELLED:return D.CANCELLED;case Dt.UNKNOWN:return D.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return D.INTERNAL;case Dt.UNAVAILABLE:return D.UNAVAILABLE;case Dt.UNAUTHENTICATED:return D.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case Dt.NOT_FOUND:return D.NOT_FOUND;case Dt.ALREADY_EXISTS:return D.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return D.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case Dt.ABORTED:return D.ABORTED;case Dt.OUT_OF_RANGE:return D.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return D.UNIMPLEMENTED;case Dt.DATA_LOSS:return D.DATA_LOSS;default:return tt(39323,{code:e})}}(ut=Dt||(Dt={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";function BE(){return new TextEncoder}const jE=new mn([4294967295,4294967295],0);function Iu(e){const t=BE().encode(e),n=new ff;return n.update(t),new Uint8Array(n.digest())}function wu(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new mn([n,r],0),new mn([s,i],0)]}class nl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new es(`Invalid padding: ${n}`);if(r<0)throw new es(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new es(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new es(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=mn.fromNumber(this.ge)}ye(t,n,r){let s=t.add(n.multiply(mn.fromNumber(r)));return s.compare(jE)===1&&(s=new mn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Iu(t),[r,s]=wu(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new nl(i,s,n);return r.forEach((l=>a.insert(l))),a}insert(t){if(this.ge===0)return;const n=Iu(t),[r,s]=wu(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class es extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yi{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Ds.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Yi(et.min(),s,new Ct(at),Ye(),lt())}}class Ds{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Ds(r,n,lt(),lt(),lt())}}class li{constructor(t,n,r,s){this.be=t,this.removedTargetIds=n,this.key=r,this.De=s}}class Zf{constructor(t,n){this.targetId=t,this.Ce=n}}class td{constructor(t,n,r=Gt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Au{constructor(){this.ve=0,this.Fe=bu(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=lt(),n=lt(),r=lt();return this.Fe.forEach(((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:tt(38017,{changeType:i})}})),new Ds(this.Me,this.xe,t,n,r)}qe(){this.Oe=!1,this.Fe=bu()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $E{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ye(),this.Je=Xs(),this.He=Xs(),this.Ye=new Ct(at)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:tt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(t){const n=t.targetId,r=t.Ce.count,s=this.ot(n);if(s){const i=s.target;if(ha(i))if(r===0){const a=new Y(i.path);this.et(n,a,Zt.newNoDocument(a,et.min()))}else mt(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=bn(r).toUint8Array()}catch(u){if(u instanceof Af)return Tr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new nl(a,s,i)}catch(u){return Tr(u instanceof es?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.et(n,i,null),s++)})),s}Tt(t){const n=new Map;this.ze.forEach(((i,a)=>{const l=this.ot(a);if(l){if(i.current&&ha(l.target)){const u=new Y(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Zt.newNoDocument(u,t))}i.Be&&(n.set(a,i.ke()),i.qe())}}));let r=lt();this.He.forEach(((i,a)=>{let l=!0;a.forEachWhile((u=>{const f=this.ot(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.je.forEach(((i,a)=>a.setReadTime(t)));const s=new Yi(t,n,this.Ye,this.je,r);return this.je=Ye(),this.Je=Xs(),this.He=Xs(),this.Ye=new Ct(at),s}Xe(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Au,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new kt(at),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new kt(at),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Au),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Xs(){return new Ct(Y.comparator)}function bu(){return new Ct(Y.comparator)}const qE={asc:"ASCENDING",desc:"DESCENDING"},HE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zE={and:"AND",or:"OR"};class KE{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function da(e,t){return e.useProto3Json||Hi(t)?t:{value:t}}function Ci(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ed(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function GE(e,t){return Ci(e,t.toTimestamp())}function ke(e){return mt(!!e,49232),et.fromTimestamp((function(n){const r=An(n);return new Rt(r.seconds,r.nanos)})(e))}function rl(e,t){return pa(e,t).canonicalString()}function pa(e,t){const n=(function(s){return new bt(["projects",s.projectId,"databases",s.database])})(e).child("documents");return t===void 0?n:n.child(t)}function nd(e){const t=bt.fromString(e);return mt(ad(t),10190,{key:t.toString()}),t}function ga(e,t){return rl(e.databaseId,t.path)}function Bo(e,t){const n=nd(t);if(n.get(1)!==e.databaseId.projectId)throw new G(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new G(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Y(sd(n))}function rd(e,t){return rl(e.databaseId,t)}function WE(e){const t=nd(e);return t.length===4?bt.emptyPath():sd(t)}function ma(e){return new bt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function sd(e){return mt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function Ru(e,t,n){return{name:ga(e,t),fields:n.value.mapValue.fields}}function QE(e,t){let n;if("targetChange"in t){t.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:tt(39313,{state:f})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=(function(f,d){return f.useProto3Json?(mt(d===void 0||typeof d=="string",58123),Gt.fromBase64String(d||"")):(mt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Gt.fromUint8Array(d||new Uint8Array))})(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&(function(f){const d=f.code===void 0?D.UNKNOWN:Jf(f.code);return new G(d,f.message||"")})(a);n=new td(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Bo(e,r.document.name),i=ke(r.document.updateTime),a=r.document.createTime?ke(r.document.createTime):et.min(),l=new le({mapValue:{fields:r.document.fields}}),u=Zt.newFoundDocument(s,i,a,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new li(f,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Bo(e,r.document),i=r.readTime?ke(r.readTime):et.min(),a=Zt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new li([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Bo(e,r.document),i=r.removedTargetIds||[];n=new li([],i,s,null)}else{if(!("filter"in t))return tt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new FE(s,i),l=r.targetId;n=new Zf(l,a)}}return n}function XE(e,t){let n;if(t instanceof Vs)n={update:Ru(e,t.key,t.value)};else if(t instanceof Yf)n={delete:ga(e,t.key)};else if(t instanceof Dn)n={update:Ru(e,t.key,t.data),updateMask:iT(t.fieldMask)};else{if(!(t instanceof ME))return tt(16599,{Vt:t.type});n={verify:ga(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(i,a){const l=a.transform;if(l instanceof Ri)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof bs)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Rs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Si)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw tt(20930,{transform:a.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:GE(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:tt(27497)})(e,t.precondition)),n}function YE(e,t){return e&&e.length>0?(mt(t!==void 0,14353),e.map((n=>(function(s,i){let a=s.updateTime?ke(s.updateTime):ke(i);return a.isEqual(et.min())&&(a=ke(i)),new xE(a,s.transformResults||[])})(n,t)))):[]}function JE(e,t){return{documents:[rd(e,t.path)]}}function ZE(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rd(e,s);const i=(function(f){if(f.length!==0)return od(je.create(f,"and"))})(t.filters);i&&(n.structuredQuery.where=i);const a=(function(f){if(f.length!==0)return f.map((d=>(function(E){return{field:ar(E.field),direction:nT(E.dir)}})(d)))})(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=da(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(t.endAt)),{ft:n,parent:s}}function tT(e){let t=WE(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){mt(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=(function(g){const E=id(g);return E instanceof je&&Of(E)?E.getFilters():[E]})(n.where));let a=[];n.orderBy&&(a=(function(g){return g.map((E=>(function(L){return new bi(lr(L.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(E)))})(n.orderBy));let l=null;n.limit&&(l=(function(g){let E;return E=typeof g=="object"?g.value:g,Hi(E)?null:E})(n.limit));let u=null;n.startAt&&(u=(function(g){const E=!!g.before,S=g.values||[];return new Ai(S,E)})(n.startAt));let f=null;return n.endAt&&(f=(function(g){const E=!g.before,S=g.values||[];return new Ai(S,E)})(n.endAt)),yE(t,s,a,i,l,"F",u,f)}function eT(e,t){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:s})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function id(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=lr(n.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=lr(n.unaryFilter.field);return Mt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=lr(n.unaryFilter.field);return Mt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=lr(n.unaryFilter.field);return Mt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}})(e):e.fieldFilter!==void 0?(function(n){return Mt.create(lr(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return je.create(n.compositeFilter.filters.map((r=>id(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return tt(1026)}})(n.compositeFilter.op))})(e):tt(30097,{filter:e})}function nT(e){return qE[e]}function rT(e){return HE[e]}function sT(e){return zE[e]}function ar(e){return{fieldPath:e.canonicalString()}}function lr(e){return Kt.fromServerFormat(e.fieldPath)}function od(e){return e instanceof Mt?(function(n){if(n.op==="=="){if(du(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NAN"}};if(fu(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(du(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NOT_NAN"}};if(fu(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ar(n.field),op:rT(n.op),value:n.value}}})(e):e instanceof je?(function(n){const r=n.getFilters().map((s=>od(s)));return r.length===1?r[0]:{compositeFilter:{op:sT(n.op),filters:r}}})(e):tt(54877,{filter:e})}function iT(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function ad(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}class hn{constructor(t,n,r,s,i=et.min(),a=et.min(),l=Gt.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new hn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class oT{constructor(t){this.yt=t}}function aT(e){const t=tT({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?fa(t,t.limit,"L"):t}class lT{constructor(){this.Cn=new cT}addToCollectionParentIndex(t,n){return this.Cn.add(n),V.resolve()}getCollectionParents(t,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return V.resolve()}deleteFieldIndex(t,n){return V.resolve()}deleteAllFieldIndexes(t){return V.resolve()}createTargetIndexes(t,n){return V.resolve()}getDocumentsMatchingTarget(t,n){return V.resolve(null)}getIndexType(t,n){return V.resolve(0)}getFieldIndexes(t,n){return V.resolve([])}getNextCollectionGroupToUpdate(t){return V.resolve(null)}getMinOffset(t,n){return V.resolve(wn.min())}getMinOffsetFromCollectionGroup(t,n){return V.resolve(wn.min())}updateCollectionGroup(t,n,r){return V.resolve()}updateIndexEntries(t,n){return V.resolve()}}class cT{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new kt(bt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new kt(bt.comparator)).toArray()}}const Su={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ld=41943040;class ae{static withCacheSize(t){return new ae(t,ae.DEFAULT_COLLECTION_PERCENTILE,ae.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}ae.DEFAULT_COLLECTION_PERCENTILE=10,ae.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ae.DEFAULT=new ae(ld,ae.DEFAULT_COLLECTION_PERCENTILE,ae.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ae.DISABLED=new ae(-1,0,0);class br{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new br(0)}static cr(){return new br(-1)}}const Cu="LruGarbageCollector",uT=1048576;function Pu([e,t],[n,r]){const s=at(e,n);return s===0?at(t,r):s}class hT{constructor(t){this.Ir=t,this.buffer=new kt(Pu),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Pu(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fT{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){H(Cu,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vr(n)?H(Cu,"Ignoring IndexedDB error during garbage collection: ",n):await Pr(n)}await this.Vr(3e5)}))}}class dT{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return V.resolve(qi.ce);const r=new hT(n);return this.mr.forEachTarget(t,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(t,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.mr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(Su)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Su):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let r,s,i,a,l,u,f;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(t,s)))).next((g=>(r=g,l=Date.now(),this.removeTargets(t,r,n)))).next((g=>(i=g,u=Date.now(),this.removeOrphanedDocuments(t,r)))).next((g=>(f=Date.now(),ir()<=ht.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(f-u)+`ms
Total Duration: ${f-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:g}))))}}function pT(e,t){return new dT(e,t)}class gT{constructor(){this.changes=new Wn((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Zt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class mT{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}class _T{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(t,n)))).next((s=>(r!==null&&ds(r.mutation,s,ge.empty(),Rt.now()),s)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,lt()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=lt()){const s=qn();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,r).next((i=>{let a=ts();return i.forEach(((l,u)=>{a=a.insert(l,u.overlayedDocument)})),a}))))}getOverlayedDocuments(t,n){const r=qn();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,lt())))}populateOverlays(t,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(t,s).next((i=>{i.forEach(((a,l)=>{n.set(a,l)}))}))}computeViews(t,n,r,s){let i=Ye();const a=fs(),l=(function(){return fs()})();return n.forEach(((u,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof Dn)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),ds(d.mutation,f,d.mutation.getFieldMask(),Rt.now())):a.set(f.key,ge.empty())})),this.recalculateAndSaveOverlays(t,i).next((u=>(u.forEach(((f,d)=>a.set(f,d))),n.forEach(((f,d)=>l.set(f,new mT(d,a.get(f)??null)))),l)))}recalculateAndSaveOverlays(t,n){const r=fs();let s=new Ct(((a,l)=>a-l)),i=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((a=>{for(const l of a)l.keys().forEach((u=>{const f=n.get(u);if(f===null)return;let d=r.get(u)||ge.empty();d=l.applyToLocalView(f,d),r.set(u,d);const g=(s.get(l.batchId)||lt()).add(u);s=s.insert(l.batchId,g)}))})).next((()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,d=u.value,g=qf();d.forEach((E=>{if(!i.has(E)){const S=Qf(n.get(E),r.get(E));S!==null&&g.set(E,S),i=i.add(E)}})),a.push(this.documentOverlayCache.saveOverlays(t,f,g))}return V.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,s){return(function(a){return Y.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):EE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):V.resolve(qn());let l=vs,u=i;return a.next((f=>V.forEach(f,((d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(d)?V.resolve():this.remoteDocumentCache.getEntry(t,d).next((E=>{u=u.insert(d,E)}))))).next((()=>this.populateOverlays(t,f,i))).next((()=>this.computeViews(t,u,f,lt()))).next((d=>({batchId:l,changes:$f(d)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Y(n)).next((r=>{let s=ts();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=ts();return this.indexManager.getCollectionParents(t,i).next((l=>V.forEach(l,(u=>{const f=(function(g,E){return new Ki(E,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(t,f,r,s).next((d=>{d.forEach(((g,E)=>{a=a.insert(g,E)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s)))).next((a=>{i.forEach(((u,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,Zt.newInvalidDocument(d)))}));let l=ts();return a.forEach(((u,f)=>{const d=i.get(u);d!==void 0&&ds(d.mutation,f,ge.empty(),Rt.now()),Wi(n,f)&&(l=l.insert(u,f))})),l}))}}class yT{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return V.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:ke(s.createTime)}})(n)),V.resolve()}getNamedQuery(t,n){return V.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:aT(s.bundledQuery),readTime:ke(s.readTime)}})(n)),V.resolve()}}class ET{constructor(){this.overlays=new Ct(Y.comparator),this.qr=new Map}getOverlay(t,n){return V.resolve(this.overlays.get(n))}getOverlays(t,n){const r=qn();return V.forEach(n,(s=>this.getOverlay(t,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((s,i)=>{this.St(t,n,i)})),V.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(t,n,r){const s=qn(),i=n.length+1,a=new Y(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return V.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Ct(((f,d)=>f-d));const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=qn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=qn(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((f,d)=>l.set(f,d))),!(l.size()>=s)););return V.resolve(l)}St(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new LE(n,r));let i=this.qr.get(n);i===void 0&&(i=lt(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}class TT{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(t){return V.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,V.resolve()}}class sl{constructor(){this.Qr=new kt(Bt.$r),this.Ur=new kt(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const r=new Bt(t,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Gr(new Bt(t,n))}zr(t,n){t.forEach((r=>this.removeReference(r,n)))}jr(t){const n=new Y(new bt([])),r=new Bt(n,t),s=new Bt(n,t+1),i=[];return this.Ur.forEachInRange([r,s],(a=>{this.Gr(a),i.push(a.key)})),i}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Y(new bt([])),r=new Bt(n,t),s=new Bt(n,t+1);let i=lt();return this.Ur.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(t){const n=new Bt(t,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Bt{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Y.comparator(t.key,n.key)||at(t.Yr,n.Yr)}static Kr(t,n){return at(t.Yr,n.Yr)||Y.comparator(t.key,n.key)}}class vT{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new kt(Bt.$r)}checkEmpty(t){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new kE(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Bt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return V.resolve(a)}lookupMutationBatch(t,n){return V.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?Qa:this.tr-1)}getAllMutationBatches(t){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Bt(n,0),s=new Bt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(a=>{const l=this.Xr(a.Yr);i.push(l)})),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new kt(at);return n.forEach((s=>{const i=new Bt(s,0),a=new Bt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],(l=>{r=r.add(l.Yr)}))})),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const a=new Bt(new Y(i),0);let l=new kt(at);return this.Zr.forEachWhile((u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(u.Yr)),!0)}),a),V.resolve(this.ti(l))}ti(t){const n=[];return t.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(t,n){mt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(n.mutations,(s=>{const i=new Bt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,n){const r=new Bt(n,0),s=this.Zr.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,V.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class IT{constructor(t){this.ri=t,this.docs=(function(){return new Ct(Y.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(t,n){let r=Ye();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Zt.newInvalidDocument(s))})),V.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=Ye();const a=n.path,l=new Y(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:d}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||Xy(Qy(d),r)<=0||(s.has(d.key)||Wi(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(t,n,r,s){tt(9500)}ii(t,n){return V.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new wT(this)}getSize(t){return V.resolve(this.size)}}class wT extends gT{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(r)})),V.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}class AT{constructor(t){this.persistence=t,this.si=new Wn((n=>Ja(n)),Za),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.oi=0,this._i=new sl,this.targetCount=0,this.ai=br.ur()}forEachTarget(t,n){return this.si.forEach(((r,s)=>n(s))),V.resolve()}getLastRemoteSnapshotVersion(t){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return V.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),V.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new br(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,V.resolve()}updateTargetData(t,n){return this.Pr(n),V.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.si.forEach(((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)})),V.waitFor(i).next((()=>s))}getTargetCount(t){return V.resolve(this.targetCount)}getTargetData(t,n){const r=this.si.get(n)||null;return V.resolve(r)}addMatchingKeys(t,n,r){return this._i.Wr(n,r),V.resolve()}removeMatchingKeys(t,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((a=>{i.push(s.markPotentiallyOrphaned(t,a))})),V.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),V.resolve()}getMatchingKeysForTargetId(t,n){const r=this._i.Hr(n);return V.resolve(r)}containsKey(t,n){return V.resolve(this._i.containsKey(n))}}class cd{constructor(t,n){this.ui={},this.overlays={},this.ci=new qi(0),this.li=!1,this.li=!0,this.hi=new TT,this.referenceDelegate=t(this),this.Pi=new AT(this),this.indexManager=new lT,this.remoteDocumentCache=(function(s){return new IT(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new oT(n),this.Ii=new yT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new ET,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ui[t.toKey()];return r||(r=new vT(n,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,r){H("MemoryPersistence","Starting transaction:",t);const s=new bT(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(t,n){return V.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,n))))}}class bT extends Jy{constructor(t){super(),this.currentSequenceNumber=t}}class il{constructor(t){this.persistence=t,this.Ri=new sl,this.Vi=null}static mi(t){return new il(t)}get fi(){if(this.Vi)return this.Vi;throw tt(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),V.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),V.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,(r=>{const s=Y.fromPath(r);return this.gi(t,s).next((i=>{i||n.removeEntry(s,et.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Pi{constructor(t,n){this.persistence=t,this.pi=new Wn((r=>eE(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=pT(this,n)}static mi(t,n){return new Pi(t,n)}Ei(){}di(t){return V.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((s=>r+s))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}pr(t,n){return V.forEach(this.pi,((r,s)=>this.br(t,r,s).next((i=>i?V.resolve():n(s)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(t,(a=>this.br(t,a,n).next((l=>{l||(r++,i.removeEntry(a,et.min()))})))).next((()=>i.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),V.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),V.resolve()}removeReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),V.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),V.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=ii(t.data.value)),n}br(t,n,r){return V.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class ol{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.Es=r,this.ds=s}static As(t,n){let r=lt(),s=lt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ol(t,n.fromCache,r,s)}}class RT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class ST{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return __()?8:Zy(g_())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ys(t,n).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ws(t,n,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new RT;return this.Ss(t,n,a).next((l=>{if(i.result=l,this.Vs)return this.bs(t,n,a,l.size)}))})).next((()=>i.result))}bs(t,n,r,s){return r.documentReadCount<this.fs?(ir()<=ht.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",or(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(ir()<=ht.DEBUG&&H("QueryEngine","Query:",or(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ir()<=ht.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",or(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Oe(n))):V.resolve())}ys(t,n){if(_u(n))return V.resolve(null);let r=Oe(n);return this.indexManager.getIndexType(t,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=fa(n,null,"F"),r=Oe(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((i=>{const a=lt(...i);return this.ps.getDocuments(t,a).next((l=>this.indexManager.getMinOffset(t,r).next((u=>{const f=this.Ds(n,l);return this.Cs(n,f,a,u.readTime)?this.ys(t,fa(n,null,"F")):this.vs(t,f,n,u)}))))})))))}ws(t,n,r,s){return _u(n)||s.isEqual(et.min())?V.resolve(null):this.ps.getDocuments(t,r).next((i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?V.resolve(null):(ir()<=ht.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),or(n)),this.vs(t,a,n,Wy(s,vs)).next((l=>l)))}))}Ds(t,n){let r=new kt(Bf(t));return n.forEach(((s,i)=>{Wi(t,i)&&(r=r.add(i))})),r}Cs(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(t,n,r){return ir()<=ht.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",or(n)),this.ps.getDocumentsMatchingQuery(t,n,wn.min(),r)}vs(t,n,r,s){return this.ps.getDocumentsMatchingQuery(t,r,s).next((i=>(n.forEach((a=>{i=i.insert(a.key,a)})),i)))}}const al="LocalStore",CT=3e8;class PT{constructor(t,n,r,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new Ct(at),this.xs=new Wn((i=>Ja(i)),Za),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new _T(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function VT(e,t,n,r){return new PT(e,t,n,r)}async function ud(e,t){const n=rt(e);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],l=[];let u=lt();for(const f of s){a.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}for(const f of i){l.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next((f=>({Ls:f,removedBatchIds:a,addedBatchIds:l})))}))}))}function DT(e,t){const n=rt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,u,f,d){const g=f.batch,E=g.keys();let S=V.resolve();return E.forEach((L=>{S=S.next((()=>d.getEntry(u,L))).next((B=>{const U=f.docVersions.get(L);mt(U!==null,48541),B.version.compareTo(U)<0&&(g.applyToRemoteDocument(B,f),B.isValidDocument()&&(B.setReadTime(f.commitVersion),d.addEntry(B)))}))})),S.next((()=>l.mutationQueue.removeMutationBatch(u,g)))})(n,r,t,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let u=lt();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u})(t)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function hd(e){const t=rt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function xT(e,t){const n=rt(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];t.targetChanges.forEach(((d,g)=>{const E=s.get(g);if(!E)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,g).next((()=>n.Pi.addMatchingKeys(i,d.addedDocuments,g))));let S=E.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(g)!==null?S=S.withResumeToken(Gt.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):d.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(d.resumeToken,r)),s=s.insert(g,S),(function(B,U,z){return B.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=CT?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(E,S,d)&&l.push(n.Pi.updateTargetData(i,S))}));let u=Ye(),f=lt();if(t.documentUpdates.forEach((d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))})),l.push(NT(i,a,t.documentUpdates).next((d=>{u=d.ks,f=d.qs}))),!r.isEqual(et.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next((g=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(d)}return V.waitFor(l).next((()=>a.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,u,f))).next((()=>u))})).then((i=>(n.Ms=s,i)))}function NT(e,t,n){let r=lt(),s=lt();return n.forEach((i=>r=r.add(i))),t.getEntries(e,r).next((i=>{let a=Ye();return n.forEach(((l,u)=>{const f=i.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(et.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(al,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)})),{ks:a,qs:s}}))}function OT(e,t){const n=rt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=Qa),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function MT(e,t){const n=rt(e);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,t).next((i=>i?(s=i,V.resolve(s)):n.Pi.allocateTargetId(r).next((a=>(s=new hn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(t,r.targetId)),r}))}async function _a(e,t,n){const r=rt(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!Vr(a))throw a;H(al,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function Vu(e,t,n){const r=rt(e);let s=et.min(),i=lt();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,f,d){const g=rt(u),E=g.xs.get(d);return E!==void 0?V.resolve(g.Ms.get(E)):g.Pi.getTargetData(f,d)})(r,a,Oe(t)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next((u=>{i=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,t,n?s:et.min(),n?i:lt()))).next((l=>(kT(r,vE(t),l),{documents:l,Qs:i})))))}function kT(e,t,n){let r=e.Os.get(t)||et.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),e.Os.set(t,r)}class Du{constructor(){this.activeTargetIds=SE()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class LT{constructor(){this.Mo=new Du,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,r){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Du,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class FT{Oo(t){}shutdown(){}}const xu="ConnectivityMonitor";class Nu{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(xu,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){H(xu,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ys=null;function ya(){return Ys===null?Ys=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ys++,"0x"+Ys.toString(16)}const jo="RestConnection",UT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BT{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Ii?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(t,n,r,s,i){const a=ya(),l=this.zo(t,n.toUriEncodedString());H(jo,`Sending RPC '${t}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:f}=new URL(l),d=Ha(f);return this.Jo(t,l,u,r,d).then((g=>(H(jo,`Received RPC '${t}' ${a}: `,g),g)),(g=>{throw Tr(jo,`RPC '${t}' ${a} failed with error: `,g,"url: ",l,"request:",r),g}))}Ho(t,n,r,s,i,a){return this.Go(t,n,r,s,i)}jo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Cr})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>t[i]=s)),r&&r.headers.forEach(((s,i)=>t[i]=s))}zo(t,n){const r=UT[t];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class jT{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const Xt="WebChannelConnection";class $T extends BT{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,s,i){const a=ya();return new Promise(((l,u)=>{const f=new df;f.setWithCredentials(!0),f.listenOnce(pf.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case si.NO_ERROR:const g=f.getResponseJson();H(Xt,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),l(g);break;case si.TIMEOUT:H(Xt,`RPC '${t}' ${a} timed out`),u(new G(D.DEADLINE_EXCEEDED,"Request time out"));break;case si.HTTP_ERROR:const E=f.getStatus();if(H(Xt,`RPC '${t}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const L=S?.error;if(L&&L.status&&L.message){const B=(function(z){const W=z.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(W)>=0?W:D.UNKNOWN})(L.status);u(new G(B,L.message))}else u(new G(D.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new G(D.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{l_:t,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{H(Xt,`RPC '${t}' ${a} completed.`)}}));const d=JSON.stringify(s);H(Xt,`RPC '${t}' ${a} sending request:`,s),f.send(n,"POST",d,r,15)}))}T_(t,n,r){const s=ya(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=_f(),l=mf(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");H(Xt,`Creating RPC '${t}' stream ${s}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let E=!1,S=!1;const L=new jT({Yo:U=>{S?H(Xt,`Not sending because RPC '${t}' stream ${s} is closed:`,U):(E||(H(Xt,`Opening RPC '${t}' stream ${s} transport.`),g.open(),E=!0),H(Xt,`RPC '${t}' stream ${s} sending:`,U),g.send(U))},Zo:()=>g.close()}),B=(U,z,W)=>{U.listen(z,(X=>{try{W(X)}catch(K){setTimeout((()=>{throw K}),0)}}))};return B(g,Zr.EventType.OPEN,(()=>{S||(H(Xt,`RPC '${t}' stream ${s} transport opened.`),L.o_())})),B(g,Zr.EventType.CLOSE,(()=>{S||(S=!0,H(Xt,`RPC '${t}' stream ${s} transport closed`),L.a_(),this.E_(g))})),B(g,Zr.EventType.ERROR,(U=>{S||(S=!0,Tr(Xt,`RPC '${t}' stream ${s} transport errored. Name:`,U.name,"Message:",U.message),L.a_(new G(D.UNAVAILABLE,"The operation could not be completed")))})),B(g,Zr.EventType.MESSAGE,(U=>{if(!S){const z=U.data[0];mt(!!z,16349);const W=z,X=W?.error||W[0]?.error;if(X){H(Xt,`RPC '${t}' stream ${s} received error:`,X);const K=X.status;let ct=(function(m){const T=Dt[m];if(T!==void 0)return Jf(T)})(K),Et=X.message;ct===void 0&&(ct=D.INTERNAL,Et="Unknown error status: "+K+" with message "+X.message),S=!0,L.a_(new G(ct,Et)),g.close()}else H(Xt,`RPC '${t}' stream ${s} received:`,z),L.u_(z)}})),B(l,gf.STAT_EVENT,(U=>{U.stat===oa.PROXY?H(Xt,`RPC '${t}' stream ${s} detected buffering proxy`):U.stat===oa.NOPROXY&&H(Xt,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function $o(){return typeof document<"u"?document:null}function Ji(e){return new KE(e,!0)}class fd{constructor(t,n,r=1e3,s=1.5,i=6e4){this.Mi=t,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Ou="PersistentStream";class dd{constructor(t,n,r,s,i,a,l,u){this.Mi=t,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fd(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(Xe(n.toString()),Xe("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{t((()=>{const s=new G(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(t,n){const r=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return H(Ou,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(H(Ou,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qT extends dd{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=QE(this.serializer,t),r=(function(i){if(!("targetChange"in i))return et.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?et.min():a.readTime?ke(a.readTime):et.min()})(t);return this.listener.H_(n,r)}Y_(t){const n={};n.database=ma(this.serializer),n.addTarget=(function(i,a){let l;const u=a.target;if(l=ha(u)?{documents:JE(i,u)}:{query:ZE(i,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=ed(i,a.resumeToken);const f=da(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(et.min())>0){l.readTime=Ci(i,a.snapshotVersion.toTimestamp());const f=da(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,t);const r=eT(this.serializer,t);r&&(n.labels=r),this.q_(n)}Z_(t){const n={};n.database=ma(this.serializer),n.removeTarget=t,this.q_(n)}}class HT extends dd{constructor(t,n,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return mt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,mt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){mt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=YE(t.writeResults,t.commitTime),r=ke(t.commitTime);return this.listener.na(r,n)}ra(){const t={};t.database=ma(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>XE(this.serializer,r)))};this.q_(n)}}class zT{}class KT extends zT{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new G(D.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(t,pa(n,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(D.UNKNOWN,i.toString())}))}Ho(t,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Ho(t,pa(n,r),s,a,l,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(D.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class GT{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xe(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Kn="RemoteStore";class WT{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{Qn(this)&&(H(Kn,"Restarting streams for network reachability change."),await(async function(u){const f=rt(u);f.Ea.add(4),await xs(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Zi(f)})(this))}))})),this.Ra=new GT(r,s)}}async function Zi(e){if(Qn(e))for(const t of e.da)await t(!0)}async function xs(e){for(const t of e.da)await t(!1)}function pd(e,t){const n=rt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),hl(n)?ul(n):Dr(n).O_()&&cl(n,t))}function ll(e,t){const n=rt(e),r=Dr(n);n.Ia.delete(t),r.O_()&&gd(n,t),n.Ia.size===0&&(r.O_()?r.L_():Qn(n)&&n.Ra.set("Unknown"))}function cl(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(et.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Dr(e).Y_(t)}function gd(e,t){e.Va.Ue(t),Dr(e).Z_(t)}function ul(e){e.Va=new $E({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Dr(e).start(),e.Ra.ua()}function hl(e){return Qn(e)&&!Dr(e).x_()&&e.Ia.size>0}function Qn(e){return rt(e).Ea.size===0}function md(e){e.Va=void 0}async function QT(e){e.Ra.set("Online")}async function XT(e){e.Ia.forEach(((t,n)=>{cl(e,t)}))}async function YT(e,t){md(e),hl(e)?(e.Ra.ha(t),ul(e)):e.Ra.set("Unknown")}async function JT(e,t,n){if(e.Ra.set("Online"),t instanceof td&&t.state===2&&t.cause)try{await(async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))})(e,t)}catch(r){H(Kn,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Vi(e,r)}else if(t instanceof li?e.Va.Ze(t):t instanceof Zf?e.Va.st(t):e.Va.tt(t),!n.isEqual(et.min()))try{const r=await hd(e.localStore);n.compareTo(r)>=0&&await(function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach(((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.Ia.get(f);d&&i.Ia.set(f,d.withResumeToken(u.resumeToken,a))}})),l.targetMismatches.forEach(((u,f)=>{const d=i.Ia.get(u);if(!d)return;i.Ia.set(u,d.withResumeToken(Gt.EMPTY_BYTE_STRING,d.snapshotVersion)),gd(i,u);const g=new hn(d.target,u,f,d.sequenceNumber);cl(i,g)})),i.remoteSyncer.applyRemoteEvent(l)})(e,n)}catch(r){H(Kn,"Failed to raise snapshot:",r),await Vi(e,r)}}async function Vi(e,t,n){if(!Vr(t))throw t;e.Ea.add(1),await xs(e),e.Ra.set("Offline"),n||(n=()=>hd(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{H(Kn,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Zi(e)}))}function _d(e,t){return t().catch((n=>Vi(e,n,t)))}async function to(e){const t=rt(e),n=Sn(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Qa;for(;ZT(t);)try{const s=await OT(t.localStore,r);if(s===null){t.Ta.length===0&&n.L_();break}r=s.batchId,tv(t,s)}catch(s){await Vi(t,s)}yd(t)&&Ed(t)}function ZT(e){return Qn(e)&&e.Ta.length<10}function tv(e,t){e.Ta.push(t);const n=Sn(e);n.O_()&&n.X_&&n.ea(t.mutations)}function yd(e){return Qn(e)&&!Sn(e).x_()&&e.Ta.length>0}function Ed(e){Sn(e).start()}async function ev(e){Sn(e).ra()}async function nv(e){const t=Sn(e);for(const n of e.Ta)t.ea(n.mutations)}async function rv(e,t,n){const r=e.Ta.shift(),s=el.from(r,t,n);await _d(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await to(e)}async function sv(e,t){t&&Sn(e).X_&&await(async function(r,s){if((function(a){return UE(a)&&a!==D.ABORTED})(s.code)){const i=r.Ta.shift();Sn(r).B_(),await _d(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await to(r)}})(e,t),yd(e)&&Ed(e)}async function Mu(e,t){const n=rt(e);n.asyncQueue.verifyOperationInProgress(),H(Kn,"RemoteStore received new credentials");const r=Qn(n);n.Ea.add(3),await xs(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Zi(n)}async function iv(e,t){const n=rt(e);t?(n.Ea.delete(2),await Zi(n)):t||(n.Ea.add(2),await xs(n),n.Ra.set("Unknown"))}function Dr(e){return e.ma||(e.ma=(function(n,r,s){const i=rt(n);return i.sa(),new qT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Xo:QT.bind(null,e),t_:XT.bind(null,e),r_:YT.bind(null,e),H_:JT.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),hl(e)?ul(e):e.Ra.set("Unknown")):(await e.ma.stop(),md(e))}))),e.ma}function Sn(e){return e.fa||(e.fa=(function(n,r,s){const i=rt(n);return i.sa(),new HT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:ev.bind(null,e),r_:sv.bind(null,e),ta:nv.bind(null,e),na:rv.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await to(e)):(await e.fa.stop(),e.Ta.length>0&&(H(Kn,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}class fl{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new _n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new fl(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(D.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dl(e,t){if(Xe("AsyncQueue",`${t}: ${e}`),Vr(e))return new G(D.UNAVAILABLE,`${t}: ${e}`);throw e}class mr{static emptySet(t){return new mr(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=ts(),this.sortedSet=new Ct(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof mr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new mr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}class ku{constructor(){this.ga=new Ct(Y.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):tt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,r)=>{t.push(r)})),t}}class Rr{constructor(t,n,r,s,i,a,l,u,f){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach((l=>{a.push({type:0,doc:l})})),new Rr(t,n,mr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Gi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class ov{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class av{constructor(){this.queries=Lu(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=rt(n),i=s.queries;s.queries=Lu(),i.forEach(((a,l)=>{for(const u of l.Sa)u.onError(r)}))})(this,new G(D.ABORTED,"Firestore shutting down"))}}function Lu(){return new Wn((e=>Uf(e)),Gi)}async function lv(e,t){const n=rt(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new ov,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=dl(a,`Initialization of query '${or(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&pl(n)}async function cv(e,t){const n=rt(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(t);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function uv(e,t){const n=rt(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&pl(n)}function hv(e,t,n){const r=rt(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function pl(e){e.Ca.forEach((t=>{t.next()}))}var Ea,Fu;(Fu=Ea||(Ea={})).Ma="default",Fu.Cache="cache";class fv{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Rr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Rr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Ea.Cache}}class Td{constructor(t){this.key=t}}class vd{constructor(t){this.key=t}}class dv{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=lt(),this.mutatedKeys=lt(),this.eu=Bf(t),this.tu=new mr(this.eu)}get nu(){return this.Ya}ru(t,n){const r=n?n.iu:new ku,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((d,g)=>{const E=s.get(d),S=Wi(this.query,g)?g:null,L=!!E&&this.mutatedKeys.has(E.key),B=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let U=!1;E&&S?E.data.isEqual(S.data)?L!==B&&(r.track({type:3,doc:S}),U=!0):this.su(E,S)||(r.track({type:2,doc:S}),U=!0,(u&&this.eu(S,u)>0||f&&this.eu(S,f)<0)&&(l=!0)):!E&&S?(r.track({type:0,doc:S}),U=!0):E&&!S&&(r.track({type:1,doc:E}),U=!0,(u||f)&&(l=!0)),U&&(S?(a=a.add(S),i=B?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort(((d,g)=>(function(S,L){const B=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{Rt:U})}};return B(S)-B(L)})(d.type,g.type)||this.eu(d.doc,g.doc))),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,f=u!==this.Za;return this.Za=u,a.length!==0||f?{snapshot:new Rr(this.query,t.tu,i,a,t.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ku,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=lt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return t.forEach((r=>{this.Xa.has(r)||n.push(new vd(r))})),this.Xa.forEach((r=>{t.has(r)||n.push(new Td(r))})),n}cu(t){this.Ya=t.Qs,this.Xa=lt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Rr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gl="SyncEngine";class pv{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class gv{constructor(t){this.key=t,this.hu=!1}}class mv{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Wn((l=>Uf(l)),Gi),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(Y.comparator),this.Au=new Map,this.Ru=new sl,this.Vu={},this.mu=new Map,this.fu=br.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _v(e,t,n=!0){const r=Sd(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Id(r,t,n,!0),s}async function yv(e,t){const n=Sd(e);await Id(n,t,!0,!1)}async function Id(e,t,n,r){const s=await MT(e.localStore,Oe(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Ev(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&pd(e.remoteStore,s),l}async function Ev(e,t,n,r,s){e.pu=(g,E,S)=>(async function(B,U,z,W){let X=U.view.ru(z);X.Cs&&(X=await Vu(B.localStore,U.query,!1).then((({documents:I})=>U.view.ru(I,X))));const K=W&&W.targetChanges.get(U.targetId),ct=W&&W.targetMismatches.get(U.targetId)!=null,Et=U.view.applyChanges(X,B.isPrimaryClient,K,ct);return Bu(B,U.targetId,Et.au),Et.snapshot})(e,g,E,S);const i=await Vu(e.localStore,t,!0),a=new dv(t,i.Qs),l=a.ru(i.documents),u=Ds.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),f=a.applyChanges(l,e.isPrimaryClient,u);Bu(e,n,f.au);const d=new pv(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),f.snapshot}async function Tv(e,t,n){const r=rt(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((a=>!Gi(a,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await _a(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ll(r.remoteStore,s.targetId),Ta(r,s.targetId)})).catch(Pr)):(Ta(r,s.targetId),await _a(r.localStore,s.targetId,!0))}async function vv(e,t){const n=rt(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ll(n.remoteStore,r.targetId))}async function Iv(e,t,n){const r=Pv(e);try{const s=await(function(a,l){const u=rt(a),f=Rt.now(),d=l.reduce(((S,L)=>S.add(L.key)),lt());let g,E;return u.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let L=Ye(),B=lt();return u.Ns.getEntries(S,d).next((U=>{L=U,L.forEach(((z,W)=>{W.isValidDocument()||(B=B.add(z))}))})).next((()=>u.localDocuments.getOverlayedDocuments(S,L))).next((U=>{g=U;const z=[];for(const W of l){const X=OE(W,g.get(W.key).overlayedDocument);X!=null&&z.push(new Dn(W.key,X,Df(X.value.mapValue),Me.exists(!0)))}return u.mutationQueue.addMutationBatch(S,f,z,l)})).next((U=>{E=U;const z=U.applyToLocalDocumentSet(g,B);return u.documentOverlayCache.saveOverlays(S,U.batchId,z)}))})).then((()=>({batchId:E.batchId,changes:$f(g)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),(function(a,l,u){let f=a.Vu[a.currentUser.toKey()];f||(f=new Ct(at)),f=f.insert(l,u),a.Vu[a.currentUser.toKey()]=f})(r,s.batchId,n),await Ns(r,s.changes),await to(r.remoteStore)}catch(s){const i=dl(s,"Failed to persist write");n.reject(i)}}async function wd(e,t){const n=rt(e);try{const r=await xT(n.localStore,t);t.targetChanges.forEach(((s,i)=>{const a=n.Au.get(i);a&&(mt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?mt(a.hu,14607):s.removedDocuments.size>0&&(mt(a.hu,42227),a.hu=!1))})),await Ns(n,r,t)}catch(r){await Pr(r)}}function Uu(e,t,n){const r=rt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)})),(function(a,l){const u=rt(a);u.onlineState=l;let f=!1;u.queries.forEach(((d,g)=>{for(const E of g.Sa)E.va(l)&&(f=!0)})),f&&pl(u)})(r.eventManager,t),s.length&&r.Pu.H_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function wv(e,t,n){const r=rt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let a=new Ct(Y.comparator);a=a.insert(i,Zt.newNoDocument(i,et.min()));const l=lt().add(i),u=new Yi(et.min(),new Map,new Ct(at),a,l);await wd(r,u),r.du=r.du.remove(i),r.Au.delete(t),ml(r)}else await _a(r.localStore,t,!1).then((()=>Ta(r,t,n))).catch(Pr)}async function Av(e,t){const n=rt(e),r=t.batch.batchId;try{const s=await DT(n.localStore,t);bd(n,r,null),Ad(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ns(n,s)}catch(s){await Pr(s)}}async function bv(e,t,n){const r=rt(e);try{const s=await(function(a,l){const u=rt(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let d;return u.mutationQueue.lookupMutationBatch(f,l).next((g=>(mt(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(f,g)))).next((()=>u.mutationQueue.performConsistencyCheck(f))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(f,d,l))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d))).next((()=>u.localDocuments.getDocuments(f,d)))}))})(r.localStore,t);bd(r,t,n),Ad(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ns(r,s)}catch(s){await Pr(s)}}function Ad(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function bd(e,t,n){const r=rt(e);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function Ta(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((r=>{e.Ru.containsKey(r)||Rd(e,r)}))}function Rd(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(ll(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),ml(e))}function Bu(e,t,n){for(const r of n)r instanceof Td?(e.Ru.addReference(r.key,t),Rv(e,r)):r instanceof vd?(H(gl,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Rd(e,r.key)):tt(19791,{wu:r})}function Rv(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(H(gl,"New document in limbo: "+n),e.Eu.add(r),ml(e))}function ml(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Y(bt.fromString(t)),r=e.fu.next();e.Au.set(r,new gv(n)),e.du=e.du.insert(n,r),pd(e.remoteStore,new hn(Oe(Ff(n.path)),r,"TargetPurposeLimboResolution",qi.ce))}}async function Ns(e,t,n){const r=rt(e),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,u)=>{a.push(r.pu(u,t,n).then((f=>{if((f||n)&&r.isPrimaryClient){const d=f?!f.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(f){s.push(f);const d=ol.As(u.targetId,f);i.push(d)}})))})),await Promise.all(a),r.Pu.H_(s),await(async function(u,f){const d=rt(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>V.forEach(f,(E=>V.forEach(E.Es,(S=>d.persistence.referenceDelegate.addReference(g,E.targetId,S))).next((()=>V.forEach(E.ds,(S=>d.persistence.referenceDelegate.removeReference(g,E.targetId,S)))))))))}catch(g){if(!Vr(g))throw g;H(al,"Failed to update sequence numbers: "+g)}for(const g of f){const E=g.targetId;if(!g.fromCache){const S=d.Ms.get(E),L=S.snapshotVersion,B=S.withLastLimboFreeSnapshotVersion(L);d.Ms=d.Ms.insert(E,B)}}})(r.localStore,i))}async function Sv(e,t){const n=rt(e);if(!n.currentUser.isEqual(t)){H(gl,"User change. New user:",t.toKey());const r=await ud(n.localStore,t);n.currentUser=t,(function(i,a){i.mu.forEach((l=>{l.forEach((u=>{u.reject(new G(D.CANCELLED,a))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Ns(n,r.Ls)}}function Cv(e,t){const n=rt(e),r=n.Au.get(t);if(r&&r.hu)return lt().add(r.key);{let s=lt();const i=n.Iu.get(t);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function Sd(e){const t=rt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=wd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=wv.bind(null,t),t.Pu.H_=uv.bind(null,t.eventManager),t.Pu.yu=hv.bind(null,t.eventManager),t}function Pv(e){const t=rt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Av.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bv.bind(null,t),t}class Di{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ji(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return VT(this.persistence,new ST,t.initialUser,this.serializer)}Cu(t){return new cd(il.mi,this.serializer)}Du(t){return new LT}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Di.provider={build:()=>new Di};class Vv extends Di{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){mt(this.persistence.referenceDelegate instanceof Pi,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new fT(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?ae.withCacheSize(this.cacheSizeBytes):ae.DEFAULT;return new cd((r=>Pi.mi(r,n)),this.serializer)}}class va{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Uu(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sv.bind(null,this.syncEngine),await iv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new av})()}createDatastore(t){const n=Ji(t.databaseInfo.databaseId),r=(function(i){return new $T(i)})(t.databaseInfo);return(function(i,a,l,u){return new KT(i,a,l,u)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,s,i,a,l){return new WT(r,s,i,a,l)})(this.localStore,this.datastore,t.asyncQueue,(n=>Uu(this.syncEngine,n,0)),(function(){return Nu.v()?new Nu:new FT})())}createSyncEngine(t,n){return(function(s,i,a,l,u,f,d){const g=new mv(s,i,a,l,u,f);return d&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=rt(n);H(Kn,"RemoteStore shutting down."),r.Ea.add(5),await xs(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}va.provider={build:()=>new va};class Dv{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Xe("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}const Cn="FirestoreClient";class xv{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Yt.UNAUTHENTICATED,this.clientId=Ga.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{H(Cn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(H(Cn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new _n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=dl(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function qo(e,t){e.asyncQueue.verifyOperationInProgress(),H(Cn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async s=>{r.isEqual(s)||(await ud(t.localStore,s),r=s)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function ju(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Nv(e);H(Cn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((r=>Mu(t.remoteStore,r))),e.setAppCheckTokenChangeListener(((r,s)=>Mu(t.remoteStore,s))),e._onlineComponents=t}async function Nv(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(Cn,"Using user provided OfflineComponentProvider");try{await qo(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(s){return s.name==="FirebaseError"?s.code===D.FAILED_PRECONDITION||s.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Tr("Error using user provided cache. Falling back to memory cache: "+n),await qo(e,new Di)}}else H(Cn,"Using default OfflineComponentProvider"),await qo(e,new Vv(void 0));return e._offlineComponents}async function Cd(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(Cn,"Using user provided OnlineComponentProvider"),await ju(e,e._uninitializedComponentsProvider._online)):(H(Cn,"Using default OnlineComponentProvider"),await ju(e,new va))),e._onlineComponents}function Ov(e){return Cd(e).then((t=>t.syncEngine))}async function Mv(e){const t=await Cd(e),n=t.eventManager;return n.onListen=_v.bind(null,t.syncEngine),n.onUnlisten=Tv.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=yv.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=vv.bind(null,t.syncEngine),n}function kv(e,t,n={}){const r=new _n;return e.asyncQueue.enqueueAndForget((async()=>(function(i,a,l,u,f){const d=new Dv({next:E=>{d.Nu(),a.enqueueAndForget((()=>cv(i,g))),E.fromCache&&u.source==="server"?f.reject(new G(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),g=new fv(l,d,{includeMetadataChanges:!0,qa:!0});return lv(i,g)})(await Mv(e),e.asyncQueue,t,n,r))),r.promise}function Pd(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}const $u=new Map;const Vd="firestore.googleapis.com",qu=!0;class Hu{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new G(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vd,this.ssl=qu}else this.host=t.host,this.ssl=t.ssl??qu;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=ld;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<uT)throw new G(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Gy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pd(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(D.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class eo{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new G(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hu(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Ly;switch(r.type){case"firstParty":return new jy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=$u.get(n);r&&(H("ComponentProvider","Removing Datastore"),$u.delete(n),r.terminate())})(this),Promise.resolve()}}function Lv(e,t,n,r={}){e=Ir(e,eo);const s=Ha(t),i=e._getSettings(),a={...i,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(u_(`https://${l}`),p_("Firestore",!0)),i.host!==Vd&&i.host!==l&&Tr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!yi(u,a)&&(e._setSettings(u),r.mockUserToken)){let f,d;if(typeof r.mockUserToken=="string")f=r.mockUserToken,d=Yt.MOCK_USER;else{f=h_(r.mockUserToken,e._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new G(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Yt(g)}e._authCredentials=new Fy(new Ef(f,d))}}class no{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new no(this.firestore,t,this._query)}}class jt{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new jt(this.firestore,t,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Ps(n,jt._jsonSchema))return new jt(t,r||null,new Y(bt.fromString(n.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:xt("string",jt._jsonSchemaVersion),referencePath:xt("string")};class yn extends no{constructor(t,n,r){super(t,n,Ff(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new jt(this.firestore,null,new Y(t))}withConverter(t){return new yn(this.firestore,t,this._path)}}function Fv(e,t,...n){if(e=In(e),Tf("collection","path",t),e instanceof eo){const r=bt.fromString(t,...n);return su(r),new yn(e,null,r)}{if(!(e instanceof jt||e instanceof yn))throw new G(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(bt.fromString(t,...n));return su(r),new yn(e.firestore,null,r)}}function Dd(e,t,...n){if(e=In(e),arguments.length===1&&(t=Ga.newId()),Tf("doc","path",t),e instanceof eo){const r=bt.fromString(t,...n);return ru(r),new jt(e,null,new Y(r))}{if(!(e instanceof jt||e instanceof yn))throw new G(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(bt.fromString(t,...n));return ru(r),new jt(e.firestore,e instanceof yn?e.converter:null,new Y(r))}}const zu="AsyncQueue";class Ku{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fd(this,"async_queue_retry"),this._c=()=>{const r=$o();r&&H(zu,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=$o();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=$o();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new _n;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Vr(t))throw t;H(zu,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Xe("INTERNAL UNHANDLED ERROR: ",Gu(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=fl.createAndSchedule(this,t,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&tt(47125,{Pc:Gu(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Gu(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class ro extends eo{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new Ku,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Ku(t),this._firestoreClient=void 0,await t}}}function Uv(e,t){const n=typeof e=="object"?e:Ay(),r=typeof e=="string"?e:Ii,s=Ey(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=l_("firestore");i&&Lv(s,...i)}return s}function xd(e){if(e._terminated)throw new G(D.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Bv(e),e._firestoreClient}function Bv(e){const t=e._freezeSettings(),n=(function(s,i,a,l){return new sE(s,i,a,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Pd(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new xv(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(e._componentsProvider))}class _e{constructor(t){this._byteString=t}static fromBase64String(t){try{return new _e(Gt.fromBase64String(t))}catch(n){throw new G(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new _e(Gt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:_e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ps(t,_e._jsonSchema))return _e.fromBase64String(t.bytes)}}_e._jsonSchemaVersion="firestore/bytes/1.0",_e._jsonSchema={type:xt("string",_e._jsonSchemaVersion),bytes:xt("string")};class so{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new G(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class _l{constructor(t){this._methodName=t}}class Le{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new G(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new G(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return at(this._lat,t._lat)||at(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Le._jsonSchemaVersion}}static fromJSON(t){if(Ps(t,Le._jsonSchema))return new Le(t.latitude,t.longitude)}}Le._jsonSchemaVersion="firestore/geoPoint/1.0",Le._jsonSchema={type:xt("string",Le._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};class Fe{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Fe._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ps(t,Fe._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Fe(t.vectorValues);throw new G(D.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fe._jsonSchemaVersion="firestore/vectorValue/1.0",Fe._jsonSchema={type:xt("string",Fe._jsonSchemaVersion),vectorValues:xt("object")};const jv=/^__.*__$/;class $v{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Dn(t,this.data,this.fieldMask,n,this.fieldTransforms):new Vs(t,this.data,n,this.fieldTransforms)}}class Nd{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Dn(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Od(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{Ac:e})}}class yl{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new yl({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),r=this.Vc({path:n,fc:!1});return r.gc(t),r}yc(t){const n=this.path?.child(t),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return xi(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Od(this.Ac)&&jv.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class qv{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Ji(t)}Cc(t,n,r,s=!1){return new yl({Ac:t,methodName:n,Dc:r,path:Kt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Md(e){const t=e._freezeSettings(),n=Ji(e._databaseId);return new qv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Hv(e,t,n,r,s,i={}){const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);El("Data must be an object, but it was:",a,r);const l=kd(r,a);let u,f;if(i.merge)u=new ge(a.fieldMask),f=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const g of i.mergeFields){const E=Ia(t,g,n);if(!a.contains(E))throw new G(D.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);Fd(d,E)||d.push(E)}u=new ge(d),f=a.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,f=a.fieldTransforms;return new $v(new le(l),u,f)}class io extends _l{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof io}}function zv(e,t,n,r){const s=e.Cc(1,t,n);El("Data must be an object, but it was:",s,r);const i=[],a=le.empty();Vn(r,((u,f)=>{const d=Tl(t,u,n);f=In(f);const g=s.yc(d);if(f instanceof io)i.push(d);else{const E=oo(f,g);E!=null&&(i.push(d),a.set(d,E))}}));const l=new ge(i);return new Nd(a,l,s.fieldTransforms)}function Kv(e,t,n,r,s,i){const a=e.Cc(1,t,n),l=[Ia(t,r,n)],u=[s];if(i.length%2!=0)throw new G(D.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<i.length;E+=2)l.push(Ia(t,i[E])),u.push(i[E+1]);const f=[],d=le.empty();for(let E=l.length-1;E>=0;--E)if(!Fd(f,l[E])){const S=l[E];let L=u[E];L=In(L);const B=a.yc(S);if(L instanceof io)f.push(S);else{const U=oo(L,B);U!=null&&(f.push(S),d.set(S,U))}}const g=new ge(f);return new Nd(d,g,a.fieldTransforms)}function oo(e,t){if(Ld(e=In(e)))return El("Unsupported field value:",t,e),kd(e,t);if(e instanceof _l)return(function(r,s){if(!Od(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const l of r){let u=oo(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}})(e,t)}return(function(r,s){if((r=In(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Rt.fromDate(r);return{timestampValue:Ci(s.serializer,i)}}if(r instanceof Rt){const i=new Rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ci(s.serializer,i)}}if(r instanceof Le)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _e)return{bytesValue:ed(s.serializer,r._byteString)};if(r instanceof jt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Fe)return(function(a,l){return{mapValue:{fields:{[Pf]:{stringValue:Vf},[wi]:{arrayValue:{values:a.toArray().map((f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return tl(l.serializer,f)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Wa(r)}`)})(e,t)}function kd(e,t){const n={};return wf(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vn(e,((r,s)=>{const i=oo(s,t.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function Ld(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Rt||e instanceof Le||e instanceof _e||e instanceof jt||e instanceof _l||e instanceof Fe)}function El(e,t,n){if(!Ld(n)||!vf(n)){const r=Wa(n);throw r==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Ia(e,t,n){if((t=In(t))instanceof so)return t._internalPath;if(typeof t=="string")return Tl(e,t);throw xi("Field path arguments must be of type string or ",e,!1,void 0,n)}const Gv=new RegExp("[~\\*/\\[\\]]");function Tl(e,t,n){if(t.search(Gv)>=0)throw xi(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new so(...t.split("."))._internalPath}catch{throw xi(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function xi(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new G(D.INVALID_ARGUMENT,l+e+u)}function Fd(e,t){return e.some((n=>n.isEqual(t)))}class Ud{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Wv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Bd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Wv extends Ud{data(){return super.data()}}function Bd(e,t){return typeof t=="string"?Tl(e,t):t instanceof so?t._internalPath:t._delegate._internalPath}function Qv(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new G(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xv{convertValue(t,n="none"){switch(Rn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Vt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(bn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw tt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Vn(t,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(t){const n=t.fields?.[wi].arrayValue?.values?.map((r=>Vt(r.doubleValue)));return new Fe(n)}convertGeoPoint(t){return new Le(Vt(t.latitude),Vt(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=zi(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Is(t));default:return null}}convertTimestamp(t){const n=An(t);return new Rt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=bt.fromString(t);mt(ad(r),9688,{name:t});const s=new ws(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||Xe(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function Yv(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class Js{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class _r extends Ud{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new ci(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Bd("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(D.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=_r._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}_r._jsonSchemaVersion="firestore/documentSnapshot/1.0",_r._jsonSchema={type:xt("string",_r._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class ci extends _r{data(t={}){return super.data(t)}}class yr{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Js(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new ci(this._firestore,this._userDataWriter,r.key,r,new Js(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((l=>{const u=new ci(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Js(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const u=new ci(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Js(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,d=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:Jv(l.type),doc:u,oldIndex:f,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(D.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=yr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Ga.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Jv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:e})}}yr._jsonSchemaVersion="firestore/querySnapshot/1.0",yr._jsonSchema={type:xt("string",yr._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};class Zv extends Xv{constructor(t){super(),this.firestore=t}convertBytes(t){return new _e(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function tI(e){e=Ir(e,no);const t=Ir(e.firestore,ro),n=xd(t),r=new Zv(t);return Qv(e._query),kv(n,e._query).then((s=>new yr(t,r,e,s)))}function eI(e,t,n,...r){e=Ir(e,jt);const s=Ir(e.firestore,ro),i=Md(s);let a;return a=typeof(t=In(t))=="string"||t instanceof so?Kv(i,"updateDoc",e._key,t,n,r):zv(i,"updateDoc",e._key,t),jd(s,[a.toMutation(e._key,Me.exists(!0))])}function nI(e,t){const n=Ir(e.firestore,ro),r=Dd(e),s=Yv(e.converter,t);return jd(n,[Hv(Md(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,Me.exists(!1))]).then((()=>r))}function jd(e,t){return(function(r,s){const i=new _n;return r.asyncQueue.enqueueAndForget((async()=>Iv(await Ov(r),s,i))),i.promise})(xd(e),t)}(function(t,n=!0){(function(s){Cr=s})(wy),Ti(new Es("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new ro(new Uy(r.getProvider("auth-internal")),new $y(a,r.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new G(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ws(f.options.projectId,d)})(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),gr(Zc,tu,t),gr(Zc,tu,"esm2020")})();const rI={apiKey:"AIzaSyCkbS-S75Ewh-CJvoJcTRZ6vAXcDJaJ3HY",authDomain:"library-app-9e7d7.firebaseapp.com",projectId:"library-app-9e7d7",storageBucket:"library-app-9e7d7.firebasestorage.app",messagingSenderId:"651749539548",appId:"1:651749539548:web:80f9f8f7b64ea7ea4cfe19",measurementId:"G-F0T5ZE1ZZF"},sI=cf(rI),Wu=Uv(sI),iI={class:"relative min-h-screen bg-cover bg-center flex flex-col items-center justify-center text-center",style:{"background-image":"url('../src/assets/image.webp')"}},oI={class:"relative z-10 bg-white/20 border border-white/30 backdrop-blur-xl rounded-3xl shadow-2xl p-10 max-w-5xl w-[90%]"},aI={__name:"App",setup(e){const t=fr([]),n=fr(null),r=fr(null),s=Fv(Wu,"books");async function i(){const g=await tI(s);t.value=g.docs.map(E=>({id:E.id,...E.data()}))}Ch(i);async function a(g){await nI(s,g),await i()}async function l(g){const E=Dd(Wu,"books",r.value.id);await eI(E,g),r.value=null,await i()}function u(g){n.value=g}function f(g){r.value=g}function d(){r.value=null}return(g,E)=>(xe(),cn("div",iI,[E[1]||(E[1]=yt("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-[4px]"},null,-1)),yt("div",oI,[E[0]||(E[0]=yt("h1",{class:"text-7xl md:text-8xl text-white font-bold mb-8 drop-shadow-lg"}," Library App ",-1)),Ie(Um,{editingBook:r.value,onAddBook:a,onUpdateBook:l,onClearEdit:d},null,8,["editingBook"]),Ie(Qm,{books:t.value,onSelectBook:u,onEditBook:f},null,8,["books"]),n.value?(xe(),Wh(Ym,{key:0,book:n.value},null,8,["book"])):Xg("",!0)])]))}};Nm(aI).mount("#app");
